(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/makeup/form/FormCom"],{1498:function(e,t,n){"use strict";n.r(t);var a=n("8584"),r=n("83e6");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i,l=n("f0c5"),c=Object(l["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);t["default"]=c.exports},"83e6":function(e,t,n){"use strict";n.r(t);var a=n("bbce"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},8584:function(e,t,n){"use strict";var a,r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.pxToREM(48)),a=e.__map(e.currentElements,(function(t,n){var a=e.showElementType.indexOf(t.baseType),r=e.showElement(t.baseType,[17]),o=e._f("formValue")(e.currentFormData,t),i=e.showElement(t.baseType,[1]),l=e._f("formValue")(e.currentFormData,t),c=e.showElement(t.baseType,[10]),s=e._f("formValue")(e.currentFormData,t),u=e.showElement(t.baseType,[3,12,25]),m=e._f("formValue")(e.currentFormData,t),f=e.showElement(t.baseType,[2,20,21,22]),d=e._f("formValue")(e.currentFormData,t,1),b=e.showElement(t.baseType,[15]),h=e._f("formValue")(e.currentFormData,t,1),p=e.showElement(t.baseType,[9,31],t.dataFormat),v=e._f("formValue")(e.currentFormData,t,3),T=e._f("formValue")(e.currentFormData,t),I=e.showElement(t.baseType,[32]),g=e.showElement(t.baseType,[8]),y=e._f("formValue")(e.currentFormData,t),E=e.imageConfig(t),S=e.requestConfig(t),F=e.showElement(t.baseType,[36]),D=e._f("formValue")(e.currentFormData,t),_=e.showElement(t.baseType,[46]),P=e._f("formValue")(e.currentFormData,t),O=e.showElement(t.baseType,[39]),C=e._f("formValue")(e.currentFormData,t),w=e._f("formValue")(e.currentConditions,t);return{$orig:e.__get_orig(t),g0:a,m0:r,f0:o,m1:i,f1:l,m2:c,f2:s,m3:u,f3:m,m4:f,f4:d,m5:b,f5:h,m6:p,f6:v,f7:T,m7:I,m8:g,f8:y,m9:E,m10:S,m11:F,f9:D,m13:_,f10:P,m14:O,f11:C,f12:w}}));e.$mp.data=Object.assign({},{$root:{m12:n,l0:a}})},o=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},bbce:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n("4795")),r=u(n("a6f1")),o=n("2f62"),i=n("f4db"),l=n("716c"),c=u(n("ea92")),s=n("32ae");function u(e){return e&&e.__esModule?e:{default:e}}function m(e){return h(e)||b(e)||d(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function h(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t,n,a,r,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(a,r)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){v(o,a,r,i,l,"next",e)}function l(e){v(o,a,r,i,l,"throw",e)}i(void 0)}))}}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){n.e("components/element/m-label").then(function(){return resolve(n("7467"))}.bind(null,n)).catch(n.oe)},S=function(){n.e("components/element/m-searchSelect").then(function(){return resolve(n("30ac"))}.bind(null,n)).catch(n.oe)},F=function(){Promise.all([n.e("common/vendor"),n.e("components/element/m-inputLable1")]).then(function(){return resolve(n("39c2"))}.bind(null,n)).catch(n.oe)},D=function(){n.e("components/element/m-select").then(function(){return resolve(n("3b27"))}.bind(null,n)).catch(n.oe)},_=function(){n.e("components/element/m-radio").then(function(){return resolve(n("53e5"))}.bind(null,n)).catch(n.oe)},P=function(){n.e("components/element/m-datePicker").then(function(){return resolve(n("530c"))}.bind(null,n)).catch(n.oe)},O=function(){n.e("components/element/m-datePickerRange").then(function(){return resolve(n("11ed"))}.bind(null,n)).catch(n.oe)},C=function(){n.e("components/element/m-textarea").then(function(){return resolve(n("a77c"))}.bind(null,n)).catch(n.oe)},w=function(){Promise.all([n.e("common/vendor"),n.e("components/mpvue-picker/mpvuePicker")]).then(function(){return resolve(n("ff63"))}.bind(null,n)).catch(n.oe)},M=function(){n.e("components/element/m-advancedFilter").then(function(){return resolve(n("fe53"))}.bind(null,n)).catch(n.oe)},A=function(){Promise.all([n.e("common/vendor"),n.e("components/mniUpload/MniUpload")]).then(function(){return resolve(n("0b04"))}.bind(null,n)).catch(n.oe)},B=function(){n.e("components/element/m-rate").then(function(){return resolve(n("2e34"))}.bind(null,n)).catch(n.oe)},j=function(){n.e("components/element/m-map").then(function(){return resolve(n("155f"))}.bind(null,n)).catch(n.oe)},R=function(){n.e("components/element/m-image").then(function(){return resolve(n("862b"))}.bind(null,n)).catch(n.oe)},k=function(){Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(n("42f9"))}.bind(null,n)).catch(n.oe)},V={},x={components:{mImage:R,mLabel:E,mSearchSelect:S,mInputLable:F,mSelect:D,mpvuePicker:w,mDatePicker:P,mDatePickerRange:O,mAdvancedFilter:M,mTextarea:C,mUpload:A,mRate:B,MniRich:k,mRadio:_,mMap:j},props:{tabInfo:{type:Object,required:!0},advancedFilterConditions:{type:Object,default:function(){return{}}},oldFormData:{type:Object,default:function(){return{}}},formConfig:{type:Object,default:function(){return{baseParams:{currentElements:[],currentBottomBtns:[],currentTopRightBtns:[],currentComboBoxs:[],tabElements:[]},otherParams:{}}}},showElementType:{type:Array,default:function(){return[1,2,3,8,9,10,12,15,17,20,21,22,25,36,32,39,46,45]}}},computed:g({},(0,o.mapState)("form",["filterSQLParams","currentBottomBtns","currentComboBoxs"]),{},(0,o.mapState)("common",["tabsFormDatas","tabsElements"]),{},(0,o.mapState)("verificationRule",{rules:"rules"}),{selectValueElement:function(){return this.selectElement.elementId},selectValueArray:function(){var e=[{value:"",label:this.$i18nMsg("lang-BRAT-delTip")}],t=[];return t=this.selectElement.static_advancedFilter?s.advancedFilterCondition:this.selectValueElement&&V[this.selectValueElement]||e,t},sourceType:function(){return this.tabInfo.templateType||"form"},imageConfig:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{allImgsParam:{element:e,triggerBaseType:"upImg"}}}},requestConfig:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="file/uploadFiles",n={};return 2===e.elementFormat?t="file/textEditorUpload":n={tableName:e.relationTableName},e.waterMarkId&&(n.waterMarkId=e.waterMarkId),{submitUrl:t,submitParam:n,getPicParam:{relationId:this.formConfig.otherParams.id,relationTableName:e.relationTableName,relationpriorityId:e.priorityId,relationStateId:e.stateId,relationTypeId:e.typeId,element:e}}}}}),data:function(){return{currentElements:[],currentFormData:{},selectElement:"",selectValueDefault:[0],pickerMode:"selector",currentConditions:{},fileIds:{}}},filters:{formValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=t.elementId,r=e[a]||"";try{r=JSON.parse(r)}catch(o){}return r=1===n?"object"!==typeof r?r:r.id||"":3===n?r||{}:"object"!==typeof r?r:r.name||"",4===t.relationColumnType&&r&&(r=(0,l.COMMON_FORMAT_DECIMAL)(r)),r},multipleFilter:function(e,t){var n=t.elementId,a=e[n]||"";try{a=JSON.parse(a)}catch(h){}for(var r=[],o=a,i=o.id,l=void 0===i?"":i,c=o.name,s=void 0===c?"":c,u="".concat(l)?l.split(","):[],m=s.split(","),f=0,d=u.length;f<d;f++){var b="";f<m.length&&(b=m[f]),r.push({value:u[f],label:b})}return r}},methods:g({},(0,o.mapMutations)("form",["SET_ALLBTNS","SET_FORM_OPTIONS"]),{},(0,o.mapMutations)("common",["SET_TABS_FORMDATAS","SET_TABS_SUBFORMDATAS","SET_TEMPLATE_PARAMS","SET_PANEL_PARAMS","SET_COM_TABCHILD"]),{},(0,o.mapMutations)("verificationRule",["CHECKED_FLAG","SET_VER_RULES"]),{},(0,o.mapMutations)("advanceFilter",["SET_CONNECTORS"]),{},(0,o.mapMutations)(["STATE_formElementFocus"]),{submitFormData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.currentFormData||{};t.static_fileIds=this.fileIds;var n={triggers:this.tabInfo.trigger,mobileTabId:this.tabInfo.mobileTabId,otherTabId:this.tabInfo.relationMainTab};return 1===e?c.default.getFormData(this.currentElements,t,n,this).formDatas:c.default.getFormData(this.currentElements,t,n,this)},verificationRule:function(){var e=this.submitFormData(2),t=e.formDatas,n=e.rules;return c.default.verificationForm(n,t,this.tabInfo.mobileTabId,this)},delImgInfo:function(e){var t=this;return T(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e in t.fileIds&&delete t.fileIds[e];case 1:case"end":return n.stop()}}),n)})))()},upBasicData:function(e){var t=this;return T(a.default.mark((function n(){var r,o,i,l,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(t,r=e.uploadPics,o=e.getPicParam,[],i=0,l=r.length;i<l;i++)try{""!=r[i].id&&(c=r[i].id,t.fileIds[c]={typeId:o.relationTypeId,stateId:o.relationStateId,priorityId:o.relationpriorityId})}catch(a){console.log("上传失败...")}case 4:case"end":return n.stop()}}),n)})))()},showElement:function(e,t,n){return 9===e&&1===n&&(e=31),-1!==t.indexOf(e)&&-1!==this.showElementType.indexOf(e)},selectSearchData:function(e){var t=e.isMultiple,n=e.elementId,a=e.selectListTabId,r=e.mainColumnName,o=this.currentFormData[n]||"";try{o=JSON.parse(o)}catch(O){}var i=this.tabInfo,l=i.relationMainTab,s=i.mobileTabId,u=i.jumpTag,m=i.bundleParams,f=i.bundleId,d=i.bundleName,b={relationMainTab:l,mobileTabId:s,element:e,jumpTag:u,bundleParams:m,bundleId:f,bundleName:d,showColumn:r,onKey:"searchSelect".concat(s)};if(t){for(var h=[],p=o,v=p.id,T=void 0===v?"":v,I=p.name,g=void 0===I?"":I,y="".concat(T)?T.split(","):[],E=g.split(","),S=0,F=y.length;S<F;S++){var D="";S<E.length&&(D=E[S]),h.push({value:y[S],label:D})}b.checkId=T,b.checkedList=h}else b.checkId="object"!==typeof o?o:o.id;if(a)b.selectListTabId=a;else{var _=this.filterSQLParams[b.mobileTabId]||{},P=_[e.elementId]||[];b.filterSQLParams=P,b.elementFilterParams=e.elementFilterParams}c.default.selectSearchData(e,b,this)},selectScan:function(e){var t=this.filterSQLParams[this.tabInfo.mobileTabId]||{},n=e.isMultiple,a=e.elementId,r=e.elementFilterParams,o=t[a]||[],i={relationMainTab:this.tabInfo.relationMainTab,mobileTabId:this.tabInfo.mobileTabId,elementFilterParams:r,filterSQLParams:o};if(n){var l=this.currentFormData[a]||{};i.elementValue=l.id||""}c.default.scanSearchData(e,i,this)},selectData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("advancedFilter"===t){var n=this.currentConditions[e.elementId]||3,a=s.advancedFilterCondition.findIndex((function(e){return e.value==n}));return this.pickerMode="selector",this.selectValueDefault=-1===a?[0]:[a],this.selectElement=g({},e,{},{static_advancedFilter:!0}),void this.$refs.selectPicker.show()}this.selectElement=g({},e,{},{rangeType:t});var r=this.currentFormData[e.elementId]||"";if(9===e.baseType||31===e.baseType){var o=e.elementFormat||1;this.pickerMode=1===o?"datetimeSelector":"dateSelector",this.selectValueDefault="rangeStart"===t&&r?r.start?r.start.split("-"):[]:"rangeEnd"===t&&r?r.end?r.end.split("-"):[]:r.id?r.id.split("-"):[]}else{var i=r.id,l=this.selectValueArray||[];"undefined"!==typeof i&&"object"!==typeof i||(i="");var c=l.findIndex((function(e){return e.value==i}));this.pickerMode="selector",this.selectValueDefault=-1===c?[0]:[c]}this.$refs.selectPicker.show()},selectDataChoice:function(e){var t=[9,31],n={id:e.value[0],name:e.label};-1===t.indexOf(this.selectElement.baseType)||this.selectElement.static_advancedFilter||(n=e.label),this.elementValueChang({element:this.selectElement,value:n,triggerBaseType:2,static_advancedFilter:this.selectElement.static_advancedFilter,rangeType:this.selectElement.rangeType})},jsFnc:function(e,t){var n=t[0].jsFunctionList||[],a=n.length>0?n[0].functionType:"";return e.jsFunctionList=n,e.mobileTabId=this.tabInfo.mobileTabId,1===a?c.default.checkedDateRange(e,this):2===a?c.default.checkedNumberRange(e,this):void 0},showElementRelationTab:function(e){var t=e.relationTabId,n=this.tabInfo.mobileTabs[t],a={mobileTabId:this.tabInfo.mobileTabId,bundleId:this.tabInfo.bundleId,mobileTabShowType:n.mobileTabShowType,jumpTag:this.tabInfo.jumpTag,bundleParams:this.tabInfo.bundleParams,mobileTabsBYRelation:n};c.default.elementRelationTab(e,a,this)},elementValueChang:function(e){var t=this;return T(a.default.mark((function n(){var r,o,l,c,s,u,m,f,d,b,h,p,v,T,I;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.static_advancedFilter){n.next=3;break}return t.advancedFilterConditions[e.element.elementId]=e.value.id,n.abrupt("return");case 3:if("rangeStart"!==e.rangeType){n.next=8;break}return t.currentFormData[e.element.elementId]=g({},t.currentFormData[e.element.elementId],{},{start:e.value}),n.abrupt("return");case 8:if("rangeEnd"!==e.rangeType){n.next=11;break}return t.currentFormData[e.element.elementId]=g({},t.currentFormData[e.element.elementId],{},{end:e.value}),n.abrupt("return");case 11:if(r=t.tabInfo.trigger[e.element.elementId]||[],o=r.filter((function(e){return 5===e.basetype&&4===e.triggerType}))||[],!(o.length>0)||t.jsFnc(e,o)){n.next=15;break}return t.STATE_formElementFocus(!1),n.abrupt("return");case 15:if(l=t.currentFormData,c={},[3,45],s=e.triggerBaseType,u=e.element,m=u.mainTableName,f=u.mainColumnName,d=u.baseType,b=u.elementId,3!==s||!e.value){n.next=26;break}return h={},p=!1,v="".concat(m,"_").concat(e.value),45===d&&(p=!0),n.next=23,i.commonApi.getSearchSelectById(t,{id:e.value,tabSource:m},p).then((function(e){c[v]=e;var t={};if(p){var n=[],a=[];e.map((function(e){a.push(e.id),n.push(e[f]||"")})),t={id:a.join(","),name:n.join(",")}}else t={id:e.id,name:e[f]||""};h=t}));case 23:l[b]=h,n.next=27;break;case 26:"upImg"===s?l[b]=e.value:(T=e.value,-1===[2,20,21,22].indexOf(d)&&(T={id:e.value,name:e.value}),l[b]=T);case 27:t.SET_TABS_FORMDATAS({tabId:t.tabInfo.mobileTabId,formData:l}),I={eventType:s,triggerList:t.tabInfo.trigger,relationMainTab:t.tabInfo.relationMainTab,mobileTabId:t.tabInfo.mobileTabId,triggerElements:[e.element],oldElements:t.formConfig.baseParams.tabElements,currentElements:t.currentElements,currentBottomBtns:t.formConfig.baseParams.currentBottomBtns||[],currentTopRightBtns:t.formConfig.baseParams.currentTopRightBtns||[],currentComboBoxs:t.formConfig.baseParams.currentComboBoxs||[],currentTabsChilds:t.formConfig.baseParams.currentTabsChilds||[],formData:l,oldFormData:g({},t.oldFormData),searchSelectInfo:c,rules:t.rules[t.tabInfo.mobileTabId],searchSelects:[],selecShasCanModify:[]},t.Static_GlobalFucs.formElementsTrigger(g({},I),t).then((function(e){t.currentFormData=g({},t.currentFormData,{},e.formData),t.SET_ALLBTNS({tabId:t.tabInfo.mobileTabId,comboBoxs:e.currentComboBoxs,bottomBtns:e.currentBottomBtns,topRightBtns:e.currentTopRightBtns}),t.SET_TABS_FORMDATAS({tabId:t.tabInfo.mobileTabId,formData:e.formData}),t.SET_COM_TABCHILD({tabId:t.tabInfo.mobileTabId,tabsChilds:e.currentTabsChilds}),e.updateElement&&e.updateElement.length>0&&t.$emit("childRelod",e.updateElement),t.SET_VER_RULES({tabId:t.tabInfo.mobileTabId,rules:e.rules}),t.STATE_formElementFocus(!1)}));case 30:case"end":return n.stop()}}),n)})))()}}),created:function(){var e=this;"advancedFilter"===this.tabInfo.templateType&&(this.currentConditions=this.advancedFilterConditions),this.currentFormData=g({},this.oldFormData),this.currentElements=this.formConfig.baseParams.currentElements;var t={dropDownList:[].concat(m(this.tabInfo.cascadeSelects),m(this.tabInfo.commonSelects)),relationMainTab:this.tabInfo.relationMainTab,mobileTabId:this.tabInfo.mobileTabId,filterParams:this.tabInfo.selectsFilterParams};t.dropDownList.length>0&&c.default.getSelectValues(t,this).then((function(t){for(var n in t){var a=t[n].map((function(e){return{value:e.id,label:e.name}})),r=m(a);r.unshift({value:"",label:e.$i18nMsg("lang-form-select")}),V[n]=r,e.SET_FORM_OPTIONS({elementId:n,options:a})}}));var n="searchSelect".concat(this.tabInfo.mobileTabId);r.default.$on(n,(function(t){t.id,t.element.mainTableName;var n=t.triggerBaseType||3,a={element:t.element,value:t.id,triggerBaseType:n};e.elementValueChang(a)}))},beforeDestroy:function(){var e="searchSelect".concat(this.tabInfo.mobileTabId);r.default.$off(e)}};t.default=x}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/makeup/form/FormCom-create-component',
    {
        'components/makeup/form/FormCom-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("1498"))
        })
    },
    [['components/makeup/form/FormCom-create-component']]
]);
