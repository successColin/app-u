{"version":3,"sources":["webpack:///D:/code/2.0app/pages/basic/fileList.vue?b068","webpack:///D:/code/2.0app/pages/basic/fileList.vue?f168","webpack:///D:/code/2.0app/pages/basic/fileList.vue?f9ff","webpack:///D:/code/2.0app/pages/basic/fileList.vue?4efd","uni-app:///pages/basic/fileList.vue","webpack:///D:/code/2.0app/pages/basic/fileList.vue?25b9"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","l0","__map","fileData","item","__i0__","m1","formatDate","createDate","$orig","__get_orig","m2","m3","m4","formatTime","currentTime","m5","surplusTime","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,mUACIA,EADJ,mKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2BACZ,aAAAF,E;;;;2GCvBf,2nC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,0BAElBC,EAAKR,EAAIS,MAAMT,EAAIU,UAAU,SAASC,EAAMC,GAC9C,IAAIC,EAAKb,EAAIc,WAAWH,EAAKI,YAC7B,MAAO,CACLC,MAAOhB,EAAIiB,WAAWN,GACtBE,GAAIA,MAIJK,EAAKlB,EAAIO,SAAS,oBAClBY,EAAKnB,EAAIO,SAAS,iCAClBa,EAAKpB,EAAIqB,WAAWrB,EAAIsB,YAAa,GACrCC,EAAKvB,EAAIqB,WAAWrB,EAAIwB,YAAa,GACzCxB,EAAIyB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLzB,GAAIA,EACJI,GAAIA,EACJU,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJG,GAAIA,MAKRO,GAAmB,EACnBC,EAAkB,GACtBhC,EAAOiC,eAAgB,G;;;;2DCnCvB,muBAA4qB,eAAG,G;;;;0IC8H/qB,sBAEA,6CACA,2C,k/BACA,cACA,CACA,gBACA,YACA,gBAEA,OACA,UACA,YACA,gBAGA,KAXA,WAYA,OACA,YACA,kBACA,gBACA,MACA,UACA,YACA,SAEA,YACA,eACA,eACA,iBACA,oBACA,WACA,UACA,+DACA,CACA,mDACA,QACA,yBACA,cAGA,qEACA,gBACA,gBACA,mBACA,aACA,UACA,oBACA,aACA,YACA,UACA,eACA,kBACA,kBACA,qBACA,YACA,cACA,cACA,WACA,mBAGA,eACA,6DADA,CAEA,YAFA,WAIA,0EAGA,SACA,UADA,SACA,GACA,iBAEA,YAJA,WAKA,WACA,kEACA,kBACA,uCACA,4CAEA,mBACA,mCAGA,SAfA,SAeA,kBACA,OAEA,UADA,GAGA,EAEA,6CACA,kBACA,uCACA,yCACA,MACA,mBACA,IACA,qEAEA,2CAEA,mBACA,mCAGA,SArCA,SAqCA,KACA,8BACA,SACA,6BACA,2CACA,gBACA,WAGA,wBAFA,kBAMA,aAlDA,SAkDA,OACA,WACA,kBACA,kBACA,iDACA,UACA,aACA,qCACA,kGACA,iDACA,+CACA,oBACA,WACA,wCACA,8GAMA,WACA,qBAGA,QA1EA,SA0EA,OACA,WACA,GACA,aACA,0BAEA,gCACA,mDACA,oDACA,SACA,mBAIA,YACA,UACA,iDACA,WAMA,OAFA,eAEA,SACA,OACA,uBACA,MACA,OACA,yBACA,MACA,OACA,sBACA,8CACA,YACA,uBACA,MACA,OACA,qBACA,+BACA,eACA,aACA,qCACA,sGACA,iDACA,+CACA,oBACA,WACA,iDACA,sFAKA,WAnCA,kBAqCA,IAEA,eAnIA,WAoIA,kBACA,yBAEA,WAvIA,SAuIA,GACA,kBACA,kBACA,iBACA,eACA,kBACA,eACA,mBACA,eACA,qBACA,eACA,qBAEA,OADA,eACA,iCAEA,WAtJA,SAsJA,GACA,cACA,0BAEA,OAGA,WA7JA,SA6JA,GACA,mBAEA,OADA,gBACA,GAEA,YAlKA,SAkKA,OACA,yBACA,8BACA,qBACA,SACA,qBACA,SACA,qBACA,SACA,uBAEA,0BAGA,aAhLA,SAgLA,GACA,gBACA,SACA,kBACA,sBAGA,iBACA,2BAKA,aA7LA,SA6LA,cACA,2BAGA,mDACA,6BAEA,0CACA,2CAEA,mCACA,uBAEA,iDACA,8CACA,uCACA,mEAGA,iBAhNA,WAiNA,iCACA,uBACA,qBACA,mBACA,oBAEA,aAvNA,SAuNA,GACA,uDACA,uBACA,iBAEA,iBA5NA,WA6NA,wBAEA,WA/NA,SA+NA,SAaA,WA5OA,SA4OA,KACA,cACA,4BACA,yBACA,YACA,QAEA,cAIA,QAvTA,WAwTA,gBACA,kD;;;;2DC5bA,oiCAA6+B,eAAG,G","file":"pages/basic/fileList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./fileList.vue?vue&type=template&id=56986834&scoped=true&name=fileList&\"\nvar renderjs\nimport script from \"./fileList.vue?vue&type=script&lang=js&\"\nexport * from \"./fileList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fileList.vue?vue&type=style&index=0&id=56986834&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56986834\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/basic/fileList.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileList.vue?vue&type=template&id=56986834&scoped=true&name=fileList&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-form-placeholder\")\n\n  var l0 = _vm.__map(_vm.fileData, function(item, __i0__) {\n    var m1 = _vm.formatDate(item.createDate)\n    return {\n      $orig: _vm.__get_orig(item),\n      m1: m1\n    }\n  })\n\n  var m2 = _vm.$i18nMsg(\"lang-downloading\")\n  var m3 = _vm.$i18nMsg(\"lang-fileList-cancel-download\")\n  var m4 = _vm.formatTime(_vm.currentTime, 2)\n  var m5 = _vm.formatTime(_vm.surplusTime, 1)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        l0: l0,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileList.vue?vue&type=script&lang=js&\"","<template name=\"fileList\">\r\n\t<view class=\"listCreateTemplate fileList\" :class=\"[themeClass_]\">\r\n\t\t\t<m-back-bar backStyle=\"backStyleNoBack\" >  <!-- 顶部返回组件，已经作为全局组件可以直接调用 class=\"calendar-page-header\" -->\r\n\t\t\t\t<block slot=\"barTitle\">{{barTitle}}</block>\r\n\t\t\t\t<block slot=\"barRight\">\r\n\t\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t\t<view class=\"list-search\">\r\n\t\t\t\t\t\t\t<view class=\"search-wrap\">\r\n\t\t\t\t\t\t\t\t<view class=\"search-view\">\r\n\t\t\t\t\t\t\t\t\t<input v-model=\"keywords\" @confirm=\"searchFiles()\" name=\"keywords\" type=\"text\" confirm-type=\"search\" class=\"keywords\" :placeholder=\"$i18nMsg('lang-form-placeholder')\" placeholder-class=\"placeholderSearch\" /> <!-- 中文：请输入关键字搜索 -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<m-font-icon  icon=\"iconsousuo\" :iconSize=\"30\" class=\"sousuo\"></m-font-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</m-back-bar>\r\n\t\t\r\n\t\t<view class=\"filepath\" :class=\"[themeClass_]\">\r\n\t\t\t<view class=\"path-wrap\">\r\n\t\t\t\t<p v-for=\"(item,index) in filePath\" :key=\"item.createDate\" @click=\"goToStep(item,index)\"><m-font-icon icon=\"iconzhishikuweizhihuidaodiyiji\" :iconSize=\"iconSize\" v-if=\"index == 0\"></m-font-icon>{{item.name}}<span v-if=\"index<filePath.length-1\">></span></p>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 内部文档 -->\r\n\t\t<scroll-view scroll-y class=\"list-wrap\">\r\n\t\t\t<view v-for=\"item in fileData\" @click=\"getFiles(item,item.id)\">\r\n\t\t\t\t<view class=\"fileItem\">\r\n\t\t\t\t\t<view class=\"icon-box\"><image src=\"@/static/images/imgwenjianjia.png\"></image></view>\r\n\t\t\t\t\t<view class=\"folder\">\r\n\t\t\t\t\t\t<p class=\"title\">{{item.name}}</p>\r\n\t\t\t\t\t\t<p class=\"date\">{{formatDate(item.createDate)}}</p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"fileSize\">{{item.pageNum}}项</view> -->\r\n\t\t\t\t\t<view class=\"arrow-right\"><span></span></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t\t<view v-for=\"item in getFileData\">\r\n\t\t\t\t<view class=\"fileItem\">\r\n\t\t\t\t\t<view class=\"icon-box fileicon\" @click=\"previewFile(item.id,item.displayFileName,item.url)\">\r\n\t\t\t\t\t\t<m-font-icon color=\"#4E94D9\" v-if=\"formatIcon(item.displayFileName) =='png'\"  icon=\"APP_40\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF8102\" v-else-if=\"formatIcon(item.displayFileName) =='jpg' || formatIcon(item.displayFileName) =='jpeg'\"  icon=\"APP_39\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF933D\" v-else-if=\"formatIcon(item.displayFileName) =='doc' || formatIcon(item.displayFileName) =='docx'\" icon=\"APP_37\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#47C69A\" v-else-if=\"formatIcon(item.displayFileName) =='ppt'||formatIcon(item.displayFileName) =='pptx'\" icon=\"APP_34\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#B9C1CF\" v-else-if=\"formatIcon(item.displayFileName) =='zip'||formatIcon(item.displayFileName) =='rar'\" icon=\"APP_36\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#F15643\" v-else-if=\"formatIcon(item.displayFileName) =='pdf'\"  icon=\"APP_35\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#F15643\" v-else-if=\"formatIcon(item.displayFileName) =='txt'\"  icon=\"APP_41\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF932F\" v-else-if=\"formatIcon(item.displayFileName) =='mp3'\"  icon=\"APP_42\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#4E7DD9\" v-else-if=\"formatIcon(item.displayFileName) =='mp4'\"  icon=\"APP_43\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#B9C1CF\" v-else  icon=\"APP_38\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"file\" @click=\"previewFile(item.id,item.displayFileName,item.url)\">\r\n\t\t\t\t\t\t<p class=\"title\">{{item.displayFileName}}</p>\r\n\t\t\t\t\t\t<p class=\"date\">{{formatDate(item.updateDate)}}\r\n\t\t\t\t\t<view class=\"fileSize\">{{formatSize(item.fileLength)}}</view></p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"downloadIcon\">\r\n\t\t\t\t\t\t<m-font-icon  icon=\"APP_44\" :iconSize=\"30\" class=\"xiazai\" @click=\"downloadFile(item.id,item.displayFileName,item.fileLength)\"></m-font-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t\r\n\t\t\t<!-- h5版本下载 -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view v-for=\"item in getFileData\">\r\n\t\t\t\t<view class=\"fileItem\">\r\n\t\t\t\t\t<view class=\"icon-box fileicon\" @click=\"previewFile(item.id,item.displayFileName,item.url)\">\r\n\t\t\t\t\t\t<m-font-icon color=\"#4E94D9\" v-if=\"formatIcon(item.displayFileName) =='png'\"  icon=\"APP_40\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF8102\" v-else-if=\"formatIcon(item.displayFileName) =='jpg' || formatIcon(item.displayFileName) =='jpeg'\"  icon=\"APP_39\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF933D\" v-else-if=\"formatIcon(item.displayFileName) =='doc' || formatIcon(item.displayFileName) =='docx'\" icon=\"APP_37\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#47C69A\" v-else-if=\"formatIcon(item.displayFileName) =='ppt'||formatIcon(item.displayFileName) =='pptx'\" icon=\"APP_34\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#B9C1CF\" v-else-if=\"formatIcon(item.displayFileName) =='zip'||formatIcon(item.displayFileName) =='rar'\" icon=\"APP_36\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#F15643\" v-else-if=\"formatIcon(item.displayFileName) =='pdf'\"  icon=\"APP_35\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#F15643\" v-else-if=\"formatIcon(item.displayFileName) =='txt'\"  icon=\"APP_41\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#FF932F\" v-else-if=\"formatIcon(item.displayFileName) =='mp3'\"  icon=\"APP_42\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#4E7DD9\" v-else-if=\"formatIcon(item.displayFileName) =='mp4'\"  icon=\"APP_43\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon color=\"#B9C1CF\" v-else  icon=\"APP_38\" :iconSize=\"64\"></m-font-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"file\" @click=\"previewFile(item.id,item.displayFileName,item.url)\" style=\"width: 85%;\">\r\n\t\t\t\t\t\t<p class=\"title\">{{item.displayFileName}}</p>\r\n\t\t\t\t\t\t<p class=\"date\">{{formatDate(item.updateDate)}}\r\n\t\t\t\t\t<view class=\"fileSize\">{{formatSize(item.fileLength)}}</view></p>\r\n\t\t\t\t\t</view>\r\n<!-- \t\t\t\t\t<view class=\"downloadIcon\">\r\n\t\t\t\t\t\t<a target=\"_blank\" :href=\"downloadUrl+'file/fileDownload?id='+item.id+'&token='+token\" :download=\"item.displayFileName\">\r\n\t\t\t\t\t\t\t<m-font-icon  icon=\"APP_44\" :iconSize=\"30\" class=\"xiazai\"></m-font-icon>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t\r\n\t\t</scroll-view>\r\n\t\t<view  v-if=\"fileData.length === 0 && getFileData.length===0 && !isLoading && tabIndex == 1\" class=\"animated nodata\" \r\n\t\t\t:class=\"[fileData.length === 0 && getFileData.length===0 ? 'fadeIn':'fadeOut']\" \r\n\t\t\t:style=\"{backgroundImage:`url(${nodataImg})`}\"></view>\r\n\t\t<view class=\"downloadPro\" v-if=\"isLoading\">\r\n\t\t\t<view class=\"downloadBox\">\r\n\t\t\t\t<p class=\"downname i18n\"><span>{{downFileName}}</span>{{ $i18nMsg('lang-downloading') }}...</p><!--中文：文件下载中-->\r\n\t\t\t\t<view class=\"progress-box progressBox\">\r\n\t\t\t\t\t<view class=\"progressState\" :style=\"{width:percent+'%'}\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<p class=\"downpro\">{{percent}}%</p>\r\n\t\t\t</view>\r\n\t\t\t<button type=\"default\" class=\"abort-download\" @click=\"cancleDownload\">{{ $i18nMsg('lang-fileList-cancel-download') }}</button><!-- 中文：取消下载 -->\r\n\t\t</view>\r\n\t\t<!-- 视频预览 -->\r\n\t\t<view v-if=\"isPreviewVideo\" class=\"previewVideoBox\">\r\n\t\t\t<video id=\"previewVideo\" :src=\"videoUrl\" controls></video>\r\n\t\t\t<m-font-icon class=\"closeVideo\" icon=\"iconqingchu\" :iconSize=\"32\" @click=\"shopPreviewVideo\"></m-font-icon>\r\n\t\t</view>\r\n\t\t<!-- 音频预览 -->\r\n\t\t<view v-if=\"isPreviewSound\" class=\"previewSoundBox\">\r\n\t\t\t<!-- <video id=\"previewVideo\" :src=\"videoUrl\" enable-danmu danmu-btn controls></video> -->\r\n\t\t\t<view class=\"soundPanel\">\r\n\t\t\t\t<view class=\"currentTime\">{{formatTime(currentTime,2)}}</view>\r\n\t\t\t\t<view class=\"progressBar\"><view :style=\"{width: durationWidth}\"></view></view>\r\n\t\t\t\t<view class=\"surplusTime\">{{formatTime(surplusTime,1)}}</view>\r\n\t\t\t</view>\r\n\t\t\t<m-font-icon class=\"closeSound\" icon=\"iconqingchu\" :iconSize=\"32\" @click=\"stopPreviewSound\"></m-font-icon>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { mapState } from 'vuex'\r\n\timport mInputSearch from '@/components/element/m-inputSearch.vue'\r\n\timport nodataImg from \"@/static/images/nodata.png\"\r\n\timport ClassList from '@/static/js/ClassList.js'\r\n\tlet listTem = new ClassList()\r\n\texport default {\r\n\t\tname:'fileList',\r\n\t\tcomponents: {\r\n\t\t\tmInputSearch,\r\n\t\t},\r\n\t\tprops:{\r\n\t\t\tbarTitle:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:'知识库'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\ticonSize:32,\r\n\t\t\t\ticonSizeFolder:66,\r\n\t\t\t\ticonSizeFile:74,\r\n\t\t\t\tid:'',\r\n\t\t\t\tuserInfo:{\r\n\t\t\t\t\tuserName:'',\r\n\t\t\t\t\tid:'12',\r\n\t\t\t\t},\r\n\t\t\t\tfileData:[],\t//文件夹\r\n\t\t\t\tfileAllData:[],\r\n\t\t\t\tgetFileData:[],\t\t//文件\r\n\t\t\t\tcloudFileData:[],\t//专家文库文件夹\r\n\t\t\t\tgetCloudFileData:[],\t\t//专家文库文件\r\n\t\t\t\ttabIndex:1,\r\n\t\t\t\ttabList:[{\r\n\t\t\t\t\tname:this.$i18nMsg('lang-filelist-internal-document'),value:1}, //中文：'内部文档'\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:this.$i18nMsg('lang-filelist-Expert-library'), // 中文：'专家文库'\r\n\t\t\t\t\t\tvalue:2,\r\n\t\t\t\t\t\ticon:'iconzhuanjiawenku',\r\n\t\t\t\t\t\ticonSize:24\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tfilePath:[{name:this.$i18nMsg('lang-filelist-knowledge-base'),id:1}],// 中文：'知识库'\r\n\t\t\t\ttempFilePath:'',\r\n\t\t\t\tdownFileName:'',\r\n\t\t\t\tdownFileProsess:'',\r\n\t\t\t\tisLoading:false,\r\n\t\t\t\tpercent:1,\r\n\t\t\t\tnodataImg:nodataImg,\r\n\t\t\t\tfileLength: 0,\r\n\t\t\t\tkeywords: '',\r\n\t\t\t\tgroupId: 1,\r\n\t\t\t\tdownloadUrl: '',\r\n\t\t\t\tisPreviewVideo:'',\r\n\t\t\t\tisPreviewSound:'',\r\n\t\t\t\tinnerAudioContext:'',//音频播放\r\n\t\t\t\tvideoUrl:'',//视频播放\r\n\t\t\t\tcurrentTime:0,\r\n\t\t\t\tsurplusTime:0,\r\n\t\t\t\tduration:0,\r\n\t\t\t\tdurationWidth:'',\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState([\"baseUrl\",\"defaultUrl\",\"token\",\"themeColor\"]),\r\n\t\t\tthemeClass_(){//与主题she检修关联\r\n\t\t\t\tconst mainColor = [\"mainColor\",\"whiteColor\"]\r\n\t\t\t\treturn this.themeColor !=='red' ? (\"mainColor-\" + this.themeColor) : 'mainColor'\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods:{ \r\n\t\t\tchangeTab(v){\r\n\t\t\t\tthis.tabIndex = v;\r\n\t\t\t},\r\n\t\t\tsearchFiles(){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\t_this.$http.post('file/getFiles',{groupId: _this.groupId, name: _this.keywords})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\t_this.getFileData = res.data.data.fileList || [];\r\n\t\t\t\t\t_this.fileData = res.data.data.filegroupList || [];\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(err))\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetFiles(item,groupId,arr){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tif(groupId){\r\n\t\t\t\t\t_this.groupId = groupId;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.groupId = 1;\r\n\t\t\t\t}\r\n\t\t\t\t_this.$http.post('file/getFiles',{groupId:groupId ||1})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\t_this.getFileData = res.data.data.fileList || [];\r\n\t\t\t\t\t_this.fileData = res.data.data.filegroupList || [];\r\n\t\t\t\t\tif(groupId&&!arr){\r\n\t\t\t\t\t\t_this.filePath.push(item);\r\n\t\t\t\t\t}else if(!arr){\r\n\t\t\t\t\t\t_this.filePath = [{name:this.$i18nMsg('lang-filelist-knowledge-base'),id:1}]; // 中文：'知识库'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setStorageSync('filePath', _this.filePath);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(err))\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgoToStep(e,index){\r\n\t\t\t\tif(index!=undefined&&index!='undefined'){\r\n\t\t\t\t\tlet arr=[];\r\n\t\t\t\t\tarr = this.filePath.slice(0,index+1);\r\n\t\t\t\t\tuni.setStorageSync('filePath', this.filePath);\r\n\t\t\t\t\tthis.filePath = arr;\r\n\t\t\t\t\tif(!e || e.id == 1){ // 中文：'知识库'\r\n\t\t\t\t\t\tthis.getFiles();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.getFiles(e,e.id,arr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdownloadFile(id, name, fileLength) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tvar FileSystemURL = '_downloads/' + name;\r\n\t\t\t\tthis.fileLength = fileLength;\r\n\t\t\t\tplus.io.resolveLocalFileSystemURL(FileSystemURL, function(entry) {\r\n\t\t\t\t\tif(entry.isFile) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: _this.$i18nMsg('lang-myself-Tips'), // 中文：'提示'\r\n\t\t\t\t\t\t\tcontent: _this.$i18nMsg('lang-filelist-Whether-open') + name + _this.$i18nMsg('lang-filelist-attachment-to-view'),// 中文：'是否打开XX附件查看?'\r\n\t\t\t\t\t\t\tconfirmText:_this.$i18nMsg('lang-form-modalConfirm'),\r\n\t\t\t\t\t\t\tcancelText:_this.$i18nMsg('lang-form-modalCancel'),\r\n\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tplus.runtime.openFile(FileSystemURL, {}, function(e) {\r\n\t\t\t\t\t\t\t\t\t\tplus.nativeUI.alert(_this.$i18nMsg('lang-filelist-Unable-open-file')+ \"：entry\" + entry.toLocalURL() + 'symurl' + FileSystemURL); //中文：无法打开此文件\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\t_this.dowload(id, name, fileLength);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdowload(id, name, fileLength) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\tfilename: \"_downloads/\"+name,\r\n\t\t\t\t};\r\n\t\t\t\tlet baseUrl = this.baseUrl || this.defaultUrl;\r\n\t\t\t\tvar url=baseUrl+'file/fileDownload?id='+id+'&token='+this.token;\r\n\t\t\t\tvar dtask = plus.downloader.createDownload(url, options, function(d, status) {\r\n\t\t\t\t\tif(status != 200) { \r\n\t\t\t\t\t\t_this.isLoading = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_this.percent = 0;\r\n\t\t\t\tdtask.start();\r\n\t\t\t\tdtask.addEventListener(\"statechanged\", function(task, status) {\r\n\t\t\t\t\tif(status === 401) {\r\n\t\t\t\t\t\t_this.isLoading = false;\r\n\t\t\t\t\t\treturn \r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.isLoading = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch(task.state) {\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tconsole.log(\"开始下载...\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tconsole.log(\"链接到服务器...\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\tconsole.log('已接受到数据');\r\n\t\t\t\t\t\t\tvar a = Math.floor(task.downloadedSize / fileLength / 10.24) || 0;\r\n\t\t\t\t\t\t\t_this.percent = a;\r\n\t\t\t\t\t\t\tconsole.log(_this.percent)\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\tconsole.log(\"下载完成！\");\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify( task));\r\n\t\t\t\t\t\t\t_this.isLoading = false;\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: _this.$i18nMsg('lang-myself-Tips'),// 中文：'提示'\r\n\t\t\t\t\t\t\t\tcontent: _this.$i18nMsg('lang-filelist-Whether-open') + name + _this.$i18nMsg('lang-filelist-attachment-to-view')+'?',\r\n\t\t\t\t\t\t\t\tconfirmText:_this.$i18nMsg('lang-form-modalConfirm'),\r\n\t\t\t\t\t\t\t\tcancelText:_this.$i18nMsg('lang-form-modalCancel'),\r\n\t\t\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tplus.runtime.openFile(task.filename, {}, function(e) {\r\n\t\t\t\t\t\t\t\t\t\t\tplus.nativeUI.alert(_this.$i18nMsg('lang-filelist-Unable-open-file') + \"：\" + e.message);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\t} ,\r\n\t\t\tcancleDownload(){\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\tplus.downloader.clear();\r\n\t\t\t},\r\n\t\t\tformatDate(value) {\r\n\t\t\t\tlet date = new Date(value);\r\n\t\t\t\tlet y = date.getFullYear();\r\n\t\t\t\tlet MM = date.getMonth() + 1;\r\n\t\t\t\tMM = MM < 10 ? ('0' + MM) : MM;\r\n\t\t\t\tlet d = date.getDate();\r\n\t\t\t\td = d < 10 ? ('0' + d) : d;\r\n\t\t\t\tlet h = date.getHours();\r\n\t\t\t\th = h < 10 ? ('0' + h) : h;\r\n\t\t\t\tlet m = date.getMinutes();\r\n\t\t\t\tm = m < 10 ? ('0' + m) : m;\r\n\t\t\t\tlet s = date.getSeconds();\r\n\t\t\t\ts = s < 10 ? ('0' + s) : s;\r\n\t\t\t\treturn y + '-' + MM + '-' + d + ' ' + h + ':' + m + ':' + s;\r\n\t\t\t},\r\n\t\t\tformatSize(length){\r\n\t\t\t\tif(length>1024){\r\n\t\t\t\t\treturn parseInt(length/10.24)/100 + 'M';\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn length +'K';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tformatIcon(name){\r\n\t\t\t\tlet names = name.split('.');\r\n\t\t\t\tname = names[names.length - 1];\r\n\t\t\t\treturn name;\r\n\t\t\t},\r\n\t\t\tpreviewFile(id, name, url){\r\n\t\t\t\tconst fileName = this.formatIcon(name);\r\n\t\t\t\tif(fileName == 'jpg' || fileName == 'jpeg' || fileName == 'png'){\r\n\t\t\t\t\tthis.previewImage(url)\r\n\t\t\t\t}else if(fileName == 'mp3'){\r\n\t\t\t\t\tthis.previewSound(url);\r\n\t\t\t\t}else if(fileName == 'mp4'){\r\n\t\t\t\t\tthis.previerVideo(url);\r\n\t\t\t\t}else if(fileName == 'pdf'){\r\n\t\t\t\t\tthis.previerPdf(id, name, url);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.downloadFile(id, name, url)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpreviewImage(url){\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [url],\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpreviewSound(url){\r\n\t\t\t\tif(this.innerAudioContext.src == url){\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tthis.innerAudioContext.src = url;\r\n\t\t\t\t// this.innerAudioContext.play()\r\n\t\t\t\tthis.innerAudioContext.onPlay(() => {\r\n\t\t\t\t\tthis.duration = this.innerAudioContext.duration\r\n\t\t\t\t});\r\n\t\t\t\tthis.innerAudioContext.autoplay = true;\r\n\t\t\t\tthis.isPreviewSound = true;\r\n\t\t\t\t// this.isPreviewSound = true;\r\n\t\t\t\tthis.innerAudioContext.onTimeUpdate((res) => {\r\n\t\t\t\t\tthis.currentTime = this.innerAudioContext.currentTime\r\n\t\t\t\t\tthis.surplusTime = this.duration - this.currentTime\r\n\t\t\t\t\tthis.durationWidth = parseInt(this.currentTime*10000/this.duration)/100 + '%' \r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopPreviewSound(){\r\n\t\t\t\tthis.innerAudioContext.destroy()\r\n\t\t\t\tthis.isPreviewSound = false;\r\n\t\t\t\tthis.durationWidth = 0;\r\n\t\t\t\tthis.currentTime = 0;\r\n\t\t\t\tthis.surplusTime = 0;\r\n\t\t\t},\r\n\t\t\tprevierVideo(url){\r\n\t\t\t\tthis.videoContext = uni.createVideoContext('previerVideo')\r\n\t\t\t\tthis.isPreviewVideo = true;\r\n\t\t\t\tthis.videoUrl = url;\r\n\t\t\t},\r\n\t\t\tshopPreviewVideo(){\r\n\t\t\t\tthis.isPreviewVideo = false;\r\n\t\t\t},\r\n\t\t\tprevierPdf(id, name, url){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\turl = '/pages/common/preview?url='+url;\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:url\r\n\t\t\t\t\t})\r\n\t\t\t\t},100)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tthis.downloadFile(id, name, url)\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tformatTime(time,type){\r\n\t\t\t\ttime = parseInt(time);\r\n\t\t\t\tlet m = time>60?parseInt(time/60):0;\r\n\t\t\t\tlet s = time%60>=10 ? time%60 : '0' + time%60;\r\n\t\t\t\tif(type == 1){\r\n\t\t\t\t\treturn m + ':' + s\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn '-' + m + ':' + s\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.getFiles();\r\n\t\t\tthis.downloadUrl = this.baseUrl || this.defaultUrl\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.haveStatusBar,.topshow-status,.topBtn,.hasstatus{\r\n\t\theight: var(--status-bar-height);\r\n\t}\r\n\t.tab-box{top: var(--status-bar-height);}\r\n\t.path-wrap,.list-wrap{margin-top: var(--status-bar-height);}\r\n</style>","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileList.vue?vue&type=style&index=0&id=56986834&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./fileList.vue?vue&type=style&index=0&id=56986834&scoped=true&lang=css&\""],"sourceRoot":""}