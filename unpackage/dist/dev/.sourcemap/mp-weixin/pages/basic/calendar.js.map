{"version":3,"sources":["webpack:///D:/code/2.0app/pages/basic/calendar.vue?21f3","webpack:///D:/code/2.0app/pages/basic/calendar.vue?e900","webpack:///D:/code/2.0app/pages/basic/calendar.vue?1176","webpack:///D:/code/2.0app/pages/basic/calendar.vue?cf40","uni-app:///pages/basic/calendar.vue","webpack:///D:/code/2.0app/pages/basic/calendar.vue?3628"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","__map","calendarContent","item","index","m0","listConfig","$orig","__get_orig","g0","checkConditionData","join","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,+RACIA,EADJ,mKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2BACZ,aAAAF,E;;;;2GCvBf,+mC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,iBAAiB,SAASC,EAAMC,GACrD,IAAIC,EAAKX,EAAIY,WAAWH,EAAKG,YAC7B,MAAO,CACLC,MAAOb,EAAIc,WAAWL,GACtBE,GAAIA,OAIJI,EAAKf,EAAIgB,mBAAmBC,KAAK,KACrCjB,EAAIkB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLlB,GAAIA,EACJW,GAAIA,MAKRQ,GAAmB,EACnBC,EAAkB,GACtBzB,EAAO0B,eAAgB,G;;;;2DC1BvB,muBAA4qB,eAAG,G;;;;0ICsD/qB,sCAKA,sCACA,kBACA,4CACA,2C,u/CACA,gB,EACA,CACA,kDACA,OACA,UACA,YACA,eAGA,KARA,WASA,OACA,yBACA,iBACA,sBACA,mBACA,aACA,QACA,YACA,eACA,aAGA,eACA,sBACA,sBACA,kCAHA,IAKA,0EALA,CAMA,oBANA,WAOA,+CAEA,gBATA,WAUA,oDAEA,WAZA,WAaA,mBAIA,OAHA,gBACA,mDAEA,MAGA,8BApBA,CAqBA,YArBA,WAuBA,0EAGA,cACA,mDADA,IAEA,kDAFA,IAGA,0CAHA,IAIA,uEAJA,CAKA,UALA,SAKA,GAEA,mCAEA,qBACA,eACA,WACA,IACA,gBACA,UACA,yBACA,QAEA,uBAEA,uCAEA,0DACA,0BACA,+BACA,QACA,qCACA,oBACA,KACA,qCACA,kCAGA,2EACA,cACA,UAGA,gBAtCA,WAuCA,uCACA,uEACA,GACA,WACA,sCACA,cAGA,wBACA,cAEA,oCAEA,mBApDA,SAoDA,GACA,iBAEA,gBAvDA,SAuDA,GAKA,IAJA,QACA,KACA,0CAEA,wBACA,cACA,UAEA,0BAEA,iDACA,+BACA,MACA,mBACA,MAGA,OACA,WAEA,mCACA,OACA,0BACA,SACA,mBAIA,sCACA,qCACA,yCAGA,kBAzFA,WA0FA,iCAEA,gBA5FA,SA4FA,GACA,0BACA,iBACA,yBACA,YAEA,kCACA,kDACA,yBACA,GACA,iBACA,aACA,aACA,SAEA,qGAGA,YA9GA,SA8GA,KACA,kBACA,MAEA,IACA,eACA,OACA,kCAGA,yBACA,kCACA,wCACA,qBAEA,KACA,8CACA,eACA,0BACA,kCACA,cACA,uBACA,kCACA,eACA,QACA,mDACA,aACA,gBAGA,cACA,WACA,yBAEA,iBACA,wBACA,gDACA,iDACA,YAEA,4BAGA,OACA,eACA,WACA,cACA,mBACA,wBACA,0BAGA,2BACA,WACA,cACA,aACA,YAIA,mBAEA,kBACA,QACA,+BACA,qCAEA,uBACA,QACA,wBAGA,cAtLA,WAyLA,IAFA,qBACA,OAFA,WAGA,KACA,WACA,sBACA,kBACA,+BAEA,qBACA,aAEA,kBACA,sBAGA,oBAbA,+BAiBA,kBA1MA,WA2MA,2CAGA,QA7PA,WA+PA,mDACA,sBAEA,gCAEA,gDACA,qBAEA,SAEA,aADA,sBACA,oBACA,gDACA,gCACA,kCAGA,0BAGA,qCACA,OACA,6BACA,4CAGA,cAxRA,WA0RA,qCACA,oB;;;;2DC3VA,4gCAAq9B,eAAG,G","file":"pages/basic/calendar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./calendar.vue?vue&type=template&id=3cf34538&name=calendar&\"\nvar renderjs\nimport script from \"./calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./calendar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/basic/calendar.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./calendar.vue?vue&type=template&id=3cf34538&name=calendar&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.calendarContent, function(item, index) {\n    var m0 = _vm.listConfig(item.listConfig)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  var g0 = _vm.checkConditionData.join(\",\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./calendar.vue?vue&type=script&lang=js&\"","<template name=\"calendar\">\r\n\t<view class=\"calendar-page\" :class=\"[themeClass_]\">\r\n\t\t<m-back-bar backStyle=\"backStyleNoBack\" >  <!-- 顶部返回组件，已经作为全局组件可以直接调用 class=\"calendar-page-header\" -->\r\n\t\t\t<block slot=\"barTitle\">{{barTitle}}</block>\r\n\t\t\t<block slot=\"barRight\">\r\n\t\t\t\t<m-button :isFontBtn=\"true\" @elementClick=\"showConditionList()\" style=\"display: inline-block; margin-right: 15px; color: white;\">\r\n\t\t\t\t\t<block slot=\"buttonIcon\">\r\n\t\t\t\t\t\t<m-font-icon icon=\"iconyewushaixuan2\" :iconSize=\"40\"></m-font-icon>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</m-button>\r\n\t\t\t\t<m-button :isFontBtn=\"true\" @elementClick=\"hangdleChangeType()\" style=\"display: inline-block; margin-right: 10px; color: white;\">\r\n\t\t\t\t\t<block slot=\"buttonIcon\">\r\n\t\t\t\t\t\t<m-font-icon icon=\"iconzhouyueqiehuan\" :iconSize=\"40\" style=\"backgroun: white;\"></m-font-icon>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</m-button>\r\n\t\t\t</block>\r\n\t\t</m-back-bar>\r\n\t\t<!-- 插入模式 -->\r\n\t\t<view class=\"calendar-page-content\">\r\n\t\t\t<uni-calendar ref=\"calendar\" :insert=\"true\" showType=\"day\" class=\"uniCalendar\"\r\n\t\t\t\t:otherParams=\"calendarOtherParams\"\r\n\t\t\t\t:isVisiabled=\"false\"\r\n\t\t\t\t@changeType=\"changeCalendarType\"\r\n\t\t\t\t@change=\"handleClickDate\">\r\n\t\t\t</uni-calendar>\r\n\t\t\t<view  class=\"calendar-page-data\">\r\n\t\t\t\t<scroll-view scroll-y class=\"calendar-page-data-scroll\">\r\n\t\t\t\t\t<block v-for=\"(item, index) in calendarContent\" :key='index'>\r\n\t\t\t\t\t\t<view class=\"calendar-page-group\"  v-if=\"isShows[item.mobileTabId] && calendarBundle[item.bundleId].checked\">\r\n\t\t\t\t\t\t\t<view class=\"title\">{{ calendarBundle[item.bundleId].text }}</view>\r\n\t\t\t\t\t\t\t<view class=\"list-data\">\r\n\t\t\t\t\t\t\t\t<ListCom :tabInfo=\"item.tabInfo\" \r\n\t\t\t\t\t\t\t\t :ref=\"item.bundleId\"\r\n\t\t\t\t\t\t\t\t :listConfig = \"listConfig(item.listConfig)\" \r\n\t\t\t\t\t\t\t\t :showNoData=\"false\"\r\n\t\t\t\t\t\t\t\t @clickList=\"clickList\">\r\n\t\t\t\t\t\t\t\t</ListCom>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<m-plain-list ref=\"conditionList\" \r\n\t\t\t:insert=\"false\" \r\n\t\t\t:multiple=\"true\" \r\n\t\t\t:config=\"conditionConfig\" \r\n\t\t\t:showColumns=\"listShowColumns\"\r\n\t\t\t:alreadyCheckId=\"checkConditionData.join(',')\"\r\n\t\t\t@onConfirm=\"handleCondition\"></m-plain-list>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport bus from '@/static/js/bus'\r\n\timport uniCalendar from '@/components/plugin/calendar/uni-calendar.vue'\r\n\timport ListCom from '@/components/makeup/list/ListCom.vue'\r\n\timport mPlainList from '@/components/makeup/m-plainList.vue'\r\n\t\r\n\timport {homeApi} from '@/common/request/api.js'\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\timport { mobileTabShowType } from '@/common/constant/constant.js'\r\n\timport ClassList from '@/static/js/ClassList.js'\r\n\tlet listTem = new ClassList()\r\n\texport default {\r\n\t\tcomponents: {uniCalendar,ListCom,mPlainList},\r\n\t\tprops:{\r\n\t\t\tbarTitle:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:'日历'\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlistShowColumns:[\"text\"],\r\n\t\t\t\tconditionData:[],\r\n\t\t\t\tcheckConditionData:[],\r\n\t\t\t\tcalendarContent:[],\r\n\t\t\t\tbundleIds:[],\r\n\t\t\t\tdate:\"\",\r\n\t\t\t\tfulldate:\"\",\r\n\t\t\t\tshowType:\"day\",\r\n\t\t\t\tisShows:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(\"home\", {\r\n\t\t\t\tnewBundle:'newBundle',\r\n\t\t\t\tcalendarBundle:'calendarBundle'\r\n\t\t\t}),\r\n\t\t\t...mapState(\"common\", [\"templateParams\",\"tabsElements\",\"tabsFormDatas\"]), //面板参数\r\n\t\t\tcalendarOtherParams(){\r\n\t\t\t\treturn {ids:this.checkConditionData.join(\",\")}\r\n\t\t\t},\r\n\t\t\tconditionConfig(){\r\n\t\t\t\treturn {defaultLoad:false,listData:this.conditionData}\r\n\t\t\t},\r\n\t\t\tlistConfig(){\r\n\t\t\t\treturn function(baseConfig){\r\n\t\t\t\t\tif(this.fulldate) {\r\n\t\t\t\t\t\tbaseConfig.otherParams.calendarList[0].value = this.fulldate\r\n\t\t\t\t\t}  \r\n\t\t\t\t\treturn baseConfig\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t...mapState([\"themeColor\"]),\r\n\t\t\tthemeClass_(){//与主题she检修关联\r\n\t\t\t\tconst mainColor = [\"mainColor\",\"whiteColor\"]\r\n\t\t\t\treturn this.themeColor !=='red' ? (\"mainColor-\" + this.themeColor) : 'mainColor'\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"SET_BusinessID\",\"SET_bundle\"]),\r\n\t\t\t...mapMutations(\"home\",[\"SET_CALENDAR_BUNDLE\"]),\r\n\t\t\t...mapMutations(\"form\", [\"SET_ALLBTNS\"]),\r\n\t\t\t...mapMutations(\"common\",[\"SET_TEMPLATE_PARAMS\",\"SET_TABS_ELEMENT\"]),//设置面板变量\r\n\t\t\tclickList(params){\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tif(!params.mobileTabRelationTabShowType) return \r\n\t\t\t\t//设置主业务id\r\n\t\t\t\tconst node = params.listItem || {},\r\n\t\t\t\t\t  primaryKey = params.primaryKey\r\n\t\t\t\tlet businessID = node[primaryKey] || \"\"\r\n\t\t\t\ttry{\r\n\t\t\t\t\tbusinessID = JSON.parse(businessID)\r\n\t\t\t\t}catch(e){}\r\n\t\t\t\tif(businessID && typeof businessID === \"object\"){\r\n\t\t\t\t\tbusinessID = businessID.id\r\n\t\t\t\t}\r\n\t\t\t\tthis.SET_BusinessID(businessID)\r\n\t\t\t\t//如果有bundleId传递过来默认显示\r\n\t\t\t\tthis.SET_bundle({bundleId:params.bundleId})\r\n\t\t\t\t\r\n\t\t\t\tlet static_mobileTabShowType = mobileTabShowType[params.mobileTabRelationTabShowType]\r\n\t\t\t\tthis.SET_TEMPLATE_PARAMS({//设置下一个面板的参数\r\n\t\t\t\t\ttabId:params.mobileTabRelationTabId,\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\trelationTab:params.mobileTabRelationTabId,\r\n\t\t\t\t\t\tbundleId:params.bundleId,\r\n\t\t\t\t\t\tid:businessID,\r\n\t\t\t\t\t\tonkey:`listReload${this._uid}`,\r\n\t\t\t\t\t\trefreshParams:{key:params.bundleId}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet url = `/pages/${static_mobileTabShowType}?relationTab=${params.mobileTabRelationTabId}`\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:url \r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetCalendarData(){\r\n\t\t\t\tif(this.checkConditionData.length===0) return \r\n\t\t\t\tlet selectDate = this.$dateFormat.formatDate(this.fulldate, \"yyyy-MM-dd hh:mm:ss\")\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tdateType:1,\r\n\t\t\t\t\tids:this.checkConditionData.join(\",\"),\r\n\t\t\t\t\tselectDate:selectDate\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(this.showType===\"day\"){\r\n\t\t\t\t\tparams.dateType=2\r\n\t\t\t\t}\r\n\t\t\t\thomeApi.calendarGetData(this, params)\r\n\t\t\t},\r\n\t\t\tchangeCalendarType(type){//改变日历显示周期，1周；1月\r\n\t\t\t\tthis.showType = type\r\n\t\t\t},\r\n\t\t\thandleCondition(e){//选择显示bundle\r\n\t\t\t\tlet checkNodes = e,\r\n\t\t\t\t\tcheckConditionData = [],\r\n\t\t\t\t\tcalendarBundles = uni.getStorageSync(\"calendarBundles\") || {}\r\n\t\t\t\t\r\n\t\t\t\tfor(let i = 0,len=checkNodes.length;i<len;i++){\r\n\t\t\t\t\tconst bundleId = checkNodes[i].id\r\n\t\t\t\t\tcheckConditionData.push(bundleId)\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkConditionData = checkConditionData\r\n\t\t\t\t\r\n\t\t\t\tfor(let i = 0,len=this.conditionData.length;i<len;i++){\r\n\t\t\t\t\tconst bundleId = this.conditionData[i].id\r\n\t\t\t\t\tlet checked = false\r\n\t\t\t\t\tif(checkConditionData.indexOf(bundleId) !==-1){\r\n\t\t\t\t\t\tchecked = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst check = {\r\n\t\t\t\t\t\tchecked:checked\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet calendarBundle = {...this.conditionData[i],...check}\r\n\t\t\t\t\tcalendarBundles[bundleId] = calendarBundle\r\n\t\t\t\t\tthis.SET_CALENDAR_BUNDLE({\r\n\t\t\t\t\t\tbundle:bundleId,\r\n\t\t\t\t\t\tcalendarBundle:calendarBundle\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//将日历bundle存入bundlePermissiones缓存种\r\n\t\t\t\tuni.setStorageSync(\"calendarBundles\",calendarBundles)\r\n\t\t\t\tthis.$refs.calendar.getCalendarData({\r\n\t\t\t\t\tids:this.checkConditionData.join(\",\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowConditionList(){\r\n\t\t\t\tthis.$refs.conditionList.show()\r\n\t\t\t},\r\n\t\t\thandleClickDate(e){//时间改变\r\n\t\t\t\tif(e.type===\"selectDays\"){//如果选择了日期重新获取数据\r\n\t\t\t\t\tlet time = e.fulldate\r\n\t\t\t\t\tthis.fulldate = e.fulldate\r\n\t\t\t\t\tthis.date = time\r\n\t\t\t\t}\r\n\t\t\t\tfor(let key in this.calendarBundle){\r\n\t\t\t\t\tconst calendarSearchColumn = this.calendarBundle[key].calendarSearchColumn\r\n\t\t\t\t\tconst value = this.calendarBundle[key]\r\n\t\t\t\t\tconst query = {\r\n\t\t\t\t\t\tvalue:e.fulldate,\r\n\t\t\t\t\t\ttableName:'',\r\n\t\t\t\t\t\telementId:'',\r\n\t\t\t\t\t\tfield:calendarSearchColumn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(value.checked) this.$refs[key] && this.$refs[key][0].doSearch && this.$refs[key][0].doSearch({calendarList:[query]})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetPageInfo(mobileTabs,bundleId){//根据relationTab取具体面板信息\r\n\t\t\t\tconst relationTab = mobileTabs.mainTabID\r\n\t\t\t\tif(!relationTab) return\r\n\t\t\t\t\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tconst mobileTab = mobileTabs.mobileTabs\r\n\t\t\t\tlet  mobileTabsBYRelation = mobileTab[relationTab],\r\n\t\t\t\t\t mobileTabRelationTab = mobileTab[mobileTabsBYRelation.mobileTabRelationTabId] || {}\r\n\t\t\t\t\r\n\t\t\t\t//设置列表参数\r\n\t\t\t\tconst queryParams = listTem.advancedParams(this,{\r\n\t\t\t\t\tadvancedQuery:mobileTabsBYRelation.advancedQuery || {},//过滤条件中需要转化的变量\r\n\t\t\t\t\tadvancedSqlQuery:mobileTabsBYRelation.advancedSqlQuery || [],//sql中的变量\r\n\t\t\t\t\trelationMainTab:\"\"\r\n\t\t\t\t})//获取过滤条件中的变量\r\n\t\t\t\tconst listConfig = {},\r\n\t\t\t\t\t  calendarSearchColumn = this.calendarBundle[bundleId].calendarSearchColumn\r\n\t\t\t\tlistConfig.otherParams = {//列表额外参数，过滤条件中设置的参数\r\n\t\t\t\t\tglobalMap:queryParams.advancedQuery,\r\n\t\t\t\t\tglobalQueryMap:queryParams.advancedSqlQuery,\r\n\t\t\t\t\tmobileTabId:relationTab,\r\n\t\t\t\t\telementList:mobileTabsBYRelation.elements,\r\n\t\t\t\t\tmobileTabSource:mobileTabsBYRelation.mobileTabSource,\r\n\t\t\t\t\tcalendarList:[{\r\n\t\t\t\t\t\tfield:calendarSearchColumn,\r\n\t\t\t\t\t\tvalue:this.$dateFormat.formatDate('', \"yyyy-MM-dd\"),\r\n\t\t\t\t\t\ttableName:'',\r\n\t\t\t\t\t\telementId:''\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.baseParams = {//列表基本参数\r\n\t\t\t\t\thasIcon:true,\r\n\t\t\t\t\tlistIcon:mobileTabsBYRelation.listIcon || {},\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.goEventParams = {//列表点击返回参数\r\n\t\t\t\t\tprimaryKey:mobileTabsBYRelation.primaryKey,\r\n\t\t\t\t\tmobileTabRelationTabId:mobileTabsBYRelation.mobileTabRelationTabId,\r\n\t\t\t\t\tmobileTabRelationTabShowType:mobileTabRelationTab.mobileTabShowType,\r\n\t\t\t\t\tbundleId:bundleId\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.url = \"currencyGetListData\"\r\n\t\t\t\t\r\n\t\t\t\t//定义面板信息\r\n\t\t\t\tlet tabInfo = {\r\n\t\t\t\t\t_uid:this._uid,\r\n\t\t\t\t\tbundleId:bundleId,\r\n\t\t\t\t\tmobileTabId:relationTab,\r\n\t\t\t\t\trelationMainTab:\"\",\r\n\t\t\t\t\tmobileTabs:mobileTabs.mobileTabs,\r\n\t\t\t\t\ttrigger:mobileTabs.triggerMap || {}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.calendarContent.push({\r\n\t\t\t\t\tbundleId:bundleId,\r\n\t\t\t\t\tmobileTabId:relationTab,\r\n\t\t\t\t\tlistConfig:listConfig,\r\n\t\t\t\t\ttabInfo:tabInfo\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t//延迟显示列表\r\n\t\t\t\tthis.isShows[relationTab] = true\r\n\t\t\t\t\r\n\t\t\t\tthis.SET_ALLBTNS({//设置按钮\r\n\t\t\t\t\ttabId:relationTab,\r\n\t\t\t\t\tbottomBtns:mobileTabsBYRelation.btnList.bottomBtn,\r\n\t\t\t\t\ttopRightBtns:mobileTabsBYRelation.btnList.topRightBtn\r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_TABS_ELEMENT({//设置面板控件\r\n\t\t\t\t\ttabId:relationTab,\r\n\t\t\t\t\telements:mobileTabsBYRelation.elements\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetMobileTabs(){\r\n\t\t\t\tconst bundleIds = this.bundleIds,\r\n\t\t\t\t\t  _this = this\r\n\t\t\t\tfor(let i = 0,len=bundleIds.length;i<len;i++){\r\n\t\t\t\t\tconst bundleId = bundleIds[i]\r\n\t\t\t\t\tlet  mobileTabs = uni.getStorageSync(bundleId),\r\n\t\t\t\t\t\t isNew = _this.newBundle[bundleId]\r\n\t\t\t\t\tif(!mobileTabs || JSON.stringify(mobileTabs) === \"{}\" || isNew) {\r\n\t\t\t\t\t\t//如果对应的bundle没有面板信息重新通过接口进行获取\r\n\t\t\t\t\t\thomeApi.getPage(_this,{\r\n\t\t\t\t\t\t\tbundleId:bundleId\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(value => {\r\n\t\t\t\t\t\t\t_this.setPageInfo(value,bundleId)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.setPageInfo(mobileTabs,bundleId)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thangdleChangeType(){\r\n\t\t\t\tthis.$refs.calendar.hangdleChangeType();\r\n\t\t\t},\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//设置时间\r\n\t\t\tlet time = this.$dateFormat.formatDate('', \"yyyy-MM-dd\")\r\n\t\t\ttime = time.replace(/-/g,\"/\")\r\n\t\t\t// this.fulldate = time\r\n\t\t\tthis.date = new Date(time).getTime()\r\n\t\t\t\r\n\t\t\tthis.bundleIds = Object.keys(this.calendarBundle)\r\n\t\t\tthis.getMobileTabs()\r\n\t\t\t//设置已经选中的点\r\n\t\t\tlet checks = []\r\n\t\t\tthis.conditionData = []\r\n\t\t\tfor(let key in this.calendarBundle ){\r\n\t\t\t\tthis.conditionData.push(this.calendarBundle[key])\r\n\t\t\t\tif(this.calendarBundle[key].checked){\r\n\t\t\t\t\tchecks.push(this.calendarBundle[key].id)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.checkConditionData = checks\r\n\t\t\t\r\n\t\t\t//设置监听\r\n\t\t\tlet onKey = `listReload${this._uid}`\r\n\t\t\tconst _this = this\r\n\t\t\tbus.$on(onKey, (params) => { //reload\r\n\t\t\t\t_this.$refs[params.key][0].getListData(\"reload\")\r\n\t\t\t})\r\n\t\t},\r\n\t\tbeforeDestroy () {\r\n\t\t\t//注销前先解绑监听\r\n\t\t\tlet onKey = `listReload${this._uid}`\r\n\t\t\tbus.$off(onKey);\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\t.uniCalendar{\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\tbox-shadow:0px 0px 10px 0px rgba(0,0,0,0.1);\r\n\t\tborder-radius:4px;\r\n\t}\r\n</style>","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./calendar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./calendar.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}