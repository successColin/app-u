{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/2.0app/pages/map/map.vue?2425","webpack:///D:/code/2.0app/pages/map/map.vue?5ff5","webpack:///D:/code/2.0app/pages/map/map.vue?b0b7","webpack:///D:/code/2.0app/pages/map/map.vue?ae90","uni-app:///pages/map/map.vue","webpack:///D:/code/2.0app/pages/map/map.vue?015f"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","m1","m2","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","qqmapsdk","key","haveaddress","pageIndex","handleDow","handleConfirm","focusInp","blurInp","handleLower","handleOkBtn","uni","$emit","elementId","navigateBack","handleOffBtn","moveToLocation","nmap","longitude","val","latitude","giveDate","covers","curpos","movepos","address","givemoveDate","handlechange","sidePosition","forEach","index","check","pos","getList","hideKeyboard","searchName","beforeSearchName","search","keyword","location","point","page_index","success","distance","name","res","title","_distance","lat","lng","fail","showModal","content","JSON","stringify","error","reverseGeocoder","get_poi","poi_options","result","pois","onRegionChange","e","type","causedBy","latLon","handleCurrPos","init","getLocation","Number","onLoad","mounted"],"mappings":"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","file":"pages/map/map.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/map/map.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./map.vue?vue&type=template&id=0b31f540&scoped=true&name=mMap&\"\nvar renderjs\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./map.vue?vue&type=style&index=0&id=0b31f540&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b31f540\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/map/map.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./map.vue?vue&type=template&id=0b31f540&scoped=true&name=mMap&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-map-ok\")\n  var m1 = _vm.$i18nMsg(\"lang-form-modalCancel\")\n  var m2 = _vm.$i18nMsg(\"lang-map-inner\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./map.vue?vue&type=script&lang=js&\"","<template name=\"mMap\">\r\n  <view>\r\n    <view class=\"page-body\">\r\n      <map\r\n        class=\"m-map\"\r\n        id=\"map1\"\r\n        :latitude=\"latitude\"\r\n        :longitude=\"longitude\"\r\n        show-location=\"true\"\r\n        :markers=\"covers\"\r\n        @regionchange=\"onRegionChange\"\r\n        :style=\"mapStyle\"\r\n      >\r\n        <cover-image class=\"headerBtn\" src=\"../../static/images/posheader.png\"></cover-image>\r\n        <cover-view class=\"okBtn\" @click=\"handleOkBtn\" v-show=\"!latLon\">{{$i18nMsg(\"lang-map-ok\")}}</cover-view>\r\n        <cover-view class=\"offBtn\" @click=\"handleOffBtn\">{{$i18nMsg(\"lang-form-modalCancel\")}}</cover-view>\r\n        <cover-image class=\"controls-img\" @click=\"handleCurrPos\" src=\"../../static/images/position.png\"></cover-image>\r\n\t\t\t\t<cover-image v-if=\"!latLon\" class=\"controls-pos\" @click=\"handleCurrPos\" src=\"../../static/images/location.png\"></cover-image>\r\n      </map>\r\n      <view class=\"pointContent\" :style=\"conList\">\r\n        <view v-if=\"latLon\" class=\"poslist\">\r\n          <view class=\"font1\">\r\n            <view class=\"name\">地图位置</view>\r\n          </view>\r\n          <view class=\"font2\">{{ haveaddress }}</view>\r\n        </view>\r\n        <view v-else>\r\n          <view v-show=\"this.isClickDow\" class=\"iconsty\">\r\n            <m-font-icon icon=\"APP_31\" :iconSize=\"40\" class=\"icon\" @click=\"handleDow\"></m-font-icon>\r\n          </view>\r\n          <input class=\"input\" placeholder=\"搜索地点\" v-model=\"searchName\" @blur=\"blurInp\" @confirm=\"handleConfirm\" @focus=\"focusInp\" confirm-type=\"search\" hold-keyboard=\"true\"/>\r\n          <scroll-view\r\n            scroll-y=\"true\"\r\n            style=\"height: 60vh\"\r\n            @scrolltolower=\"handleLower\"\r\n          >\r\n            <view\r\n              class=\"poslist\"\r\n              v-for=\"(item, i) of sidePosition\"\r\n              :key=\"i\"\r\n              @click=\"handlechange(item, i)\"\r\n            >\r\n              <view class=\"font1\">\r\n                <view class=\"name\">{{ item.name }}</view>\r\n                <m-font-icon\r\n                  class=\"icon\"\r\n                  icon=\"iconxuanzhong\"\r\n                  :iconSize=\"40\"\r\n                  :style=\"item.check ? 'display:inline-block' : 'display:none'\"\r\n                ></m-font-icon>\r\n              </view>\r\n              <view class=\"font2\">{{ item.distance }}m{{ $i18nMsg(\"lang-map-inner\") }} | {{ item.city || \"\" }} {{ item.address }}</view>\r\n            </view>\r\n          </scroll-view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n<script>\r\n// #ifdef APP-PLUS\r\nlet mapSearch = weex.requireModule(\"mapSearch\");\r\n// #endif\r\n// #ifdef MP-WEIXIN\r\nimport QQMapWX from \"../../common/map/qqmap-wx-jssdk.min.js\";\r\n// #endif\r\nexport default {\r\n  data() {\r\n    return {\r\n      latLon: \"\", // 传过来的经纬度\r\n      qqmapsdk: null, // sdk 方法\r\n      key: \"QTMBZ-4OLW6-2RBSY-M75PM-WORRE-5YB7X\", // 腾讯地图 中使用 keyss\r\n\t\t\tnavMap: \"\", // 地图对象\r\n\t\t\tisclickList: false, // 是否是点击\r\n\t\t\tregionChangeNum: 1,\r\n      latitude: 39.909,\r\n\t\t\tlongitude: 116.39742,\r\n\t\t\tchangeLongitude: '',\r\n\t\t\tchangeLatitude: '',\r\n      address: \"\", // 当前位置\r\n      haveaddress: \"\", // 数据库中的地址\r\n      pageIndex: 1,\r\n      searchName: \"\",\r\n      beforeSearchName: \"\",\r\n      isClickDow: false,\r\n      elementId: \"\",\r\n      covers: [\r\n        // 坐标\r\n        {\r\n          // 当前位置\r\n          id: 1,\r\n          latitude: 39.909,\r\n          longitude: 116.39742,\r\n          iconPath: \"../../static/images/curr.png\",\r\n          width: 50,\r\n          height: 50,\r\n          // #ifdef MP-WEIXIN\r\n          alpha: 0,\r\n          // #endif\r\n        },\r\n      ],\r\n      sidePosition: [], // 列表数组\r\n    };\r\n  },\r\n  computed: {\r\n    mapStyle() {\r\n      return this.latLon ? \"height: 90vh;\" : this.isClickDow ? \"height: 45vh;\" : \"height: 60vh;\";\r\n    },\r\n    conList() {\r\n      return this.latLon ? \"height: 10vh;\" : this.isClickDow ? \"height: 55vh;\" : \"height: 40vh;\";\r\n    },\r\n  },\r\n  methods: {\r\n    // 下拉的icon\r\n    handleDow() {\r\n      this.isClickDow = false;\r\n    },\r\n    // 点击键盘搜索\r\n    handleConfirm() {\r\n      this.pageIndex = 1;\r\n      this.sidePosition = [];\r\n      uni.hideKeyboard();\r\n    },\r\n    // 获取焦点事件\r\n    focusInp(e) {\r\n      this.isClickDow = true;\r\n    },\r\n    // input 失去焦点时\r\n    blurInp() {\r\n      this.pageIndex = 1;\r\n      this.sidePosition = [];\r\n      this.getList();\r\n    },\r\n    // list 滚动到最底下时\r\n    handleLower(e) {\r\n      this.pageIndex++;\r\n      this.getList();\r\n    },\r\n    // 发送信息的页面\r\n    // $emit(eventName, data)\r\n    handleOkBtn() {\r\n      let data = `${this.address},${this.changeLatitude},${this.changeLongitude}`;\r\n      uni.$emit(this.elementId, {\r\n        data,\r\n      });\r\n      uni.navigateBack();\r\n    },\r\n    // 取消返回上个页面\r\n    handleOffBtn() {\r\n      uni.navigateBack();\r\n    },\r\n    // app 移动图标\r\n    moveToLocation(val) {\r\n      let nmap = this.navMap;\r\n      nmap.moveToLocation({\r\n        longitude: val.longitude,\r\n        latitude: val.latitude,\r\n      });\r\n    },\r\n    // 赋值 有经纬度的时候 \r\n    giveDate(curpos, address, movepos) {\r\n      // 当前位置，当前地址，移动位置\r\n\t\t\tthis.latitude = movepos.latitude; //当前位置经度\r\n\t\t\tthis.longitude = movepos.longitude; //当前位置纬度\r\n      this.covers[0].latitude = curpos.latitude; //当前位置经度\r\n      this.covers[0].longitude = curpos.longitude; //当前位置纬度\r\n      this.covers[1].latitude = movepos.latitude; //移动置经度\r\n      this.covers[1].longitude = movepos.longitude; //移动位置纬度\r\n      this.address = address || this.address; //当前位置纬度\r\n\t\t},\r\n\t\t// 赋值 没有经纬度的时候\r\n\t\tgiveDate1(curpos, address) {\r\n\t\t\tthis.latitude = curpos.latitude; //当前位置经度\r\n\t\t\tthis.longitude = curpos.longitude; //当前位置纬度\r\n\t\t\tthis.covers[0].latitude = curpos.latitude; //当前位置经度\r\n\t\t\tthis.covers[0].longitude = curpos.longitude; //当前位置纬度\r\n\t\t\tthis.address = address || this.address; //当前位置纬度\r\n\t\t},\r\n    givemoveDate(movepos, address) {\r\n      this.latitude = movepos.latitude; //当前位置经度\r\n\t\t\tthis.longitude = movepos.longitude; //当前位置纬度\r\n      this.address = address || this.address; //当前位置纬度\r\n    },\r\n    // 点击列表\r\n    handlechange(val, index) {\r\n\t\t\tthis.isclickList = true;\r\n      this.sidePosition.forEach((item) => (item.check = false));\r\n      this.sidePosition[index].check = true;\r\n      let pos = val.location;\r\n\t\t\tlet address = val.name === \"地图位置\" ? val.address : val.name;\r\n      // #ifdef APP-PLUS\r\n      this.givemoveDate(pos, address);\r\n      // #endif\r\n      // #ifdef MP-WEIXIN\r\n      this.givemoveDate(pos, address);\r\n      // #endif\r\n    },\r\n    // 获取数组\r\n    getList() {\r\n      uni.hideKeyboard();\r\n      if (this.searchName !== this.beforeSearchName) {\r\n        this.sidePosition = [];\r\n        this.pageIndex = 1;\r\n      }\r\n      this.beforeSearchName = this.searchName;\r\n      let point = {\r\n\t\t\t\tlatitude: this.changeLatitude,\r\n\t\t\t\tlongitude: this.changeLongitude\r\n\t\t\t};\r\n      // 获取周边地理位置\r\n      // #ifdef APP-PLUS\r\n      mapSearch.reverseGeocode(\r\n        {\r\n          point: {latitude: point.latitude, longitude: point.longitude},\r\n        },\r\n        (res) => {\r\n\t\t\t\t\tthis.address = res.address;\r\n          mapSearch.poiSearchNearBy(\r\n            { \r\n\t\t\t\t\t\t\tpoint: {latitude: point.latitude,longitude: point.longitude},\r\n              key: this.searchName,\r\n              radius: 9999999,\r\n              index: this.pageIndex,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t(res) => {\r\n              if (this.pageIndex === 1) {\r\n                this.sidePosition.push({\r\n                  location: {longitude: point.longitude, latitude: point.latitude},\r\n                  distance: 0,\r\n                  address: this.address,\r\n                  check: true,\r\n                  name: \"地图位置\",\r\n                });\r\n              }\r\n              res.poiList.forEach((val, i) => {\r\n                val.check = false;\r\n                this.sidePosition.push(val);\r\n\t\t\t\t\t\t\t});\r\n            }\r\n          );\r\n        }\r\n\t\t\t);\r\n      // #endif\r\n      // #ifdef MP-WEIXIN\r\n      let poi_options = \"radius=5000;page_size=10;page_index=\" + this.pageIndex;\r\n      this.searchName ? (poi_options += \";address_format=\" + this.searchName) : \"\";\r\n      if (this.searchName) {\r\n        this.qqmapsdk.search({\r\n          keyword: this.searchName,\r\n          location: {\r\n            latitude: point.latitude,\r\n            longitude: point.longitude,\r\n          },\r\n          page_index: this.pageIndex,\r\n          success: (res) => {\r\n            if (this.pageIndex === 1) {\r\n              this.sidePosition.push({\r\n                location: {\r\n                  longitude: point.longitude,\r\n                  latitude: point.latitude,\r\n                },\r\n                distance: 0,\r\n                address: this.address,\r\n                check: true,\r\n                name: \"地图位置\",\r\n              });\r\n            }\r\n            res.data.forEach((val) => {\r\n              val.check = false;\r\n              val.name = val.title; // 统一处理成 name\r\n              val.distance = val._distance; // 统一处理\r\n              val.location.latitude = val.location.lat;\r\n              val.location.longitude = val.location.lng;\r\n              this.sidePosition.push(val);\r\n            });\r\n          },\r\n          fail: (error) => {\r\n            uni.showModal({\r\n              title: \"提示\",\r\n              content: JSON.stringify(error),\r\n            });\r\n          },\r\n        });\r\n      } else {\r\n        this.qqmapsdk.reverseGeocoder({\r\n          location: {\r\n            latitude: point.latitude,\r\n            longitude: point.longitude,\r\n          },\r\n          get_poi: 1,\r\n          poi_options: poi_options,\r\n          success: (res) => {\r\n            this.address = res.result.address;\r\n            if (this.pageIndex === 1) {\r\n              this.sidePosition.push({\r\n                location: {\r\n                  longitude: point.longitude,\r\n                  latitude: point.latitude,\r\n                },\r\n                distance: 0,\r\n                address: this.address,\r\n                check: true,\r\n                name: \"地图位置\",\r\n              });\r\n            }\r\n            res.result.pois.forEach((val) => {\r\n              val.check = false;\r\n              val.name = val.title; // 统一处理成 name\r\n              val.distance = val._distance; // 统一处理\r\n              val.location.latitude = val.location.lat;\r\n              val.location.longitude = val.location.lng;\r\n              this.sidePosition.push(val);\r\n            });\r\n          },\r\n          fail: (error) => {\r\n            uni.showModal({\r\n              title: \"提示\",\r\n              content: JSON.stringify(error),\r\n            });\r\n          },\r\n        });\r\n      }\r\n      // #endif\r\n      // #ifdef H5\r\n      // https://apis.map.qq.com/ws/place/v1/search\r\n      // uni.request({\r\n      // \turl: 'https://apis.map.qq.com/ws/place/v1/search',\r\n      // \tdata: '',\r\n      // \tmethod: 'GET',\r\n      // \tsuccess: (res) => {\r\n      // \t},\r\n      // \tfail: (error) => {\r\n      // \t}\r\n      // })\r\n      this.$http\r\n        .get(\r\n          \"https://apis.map.qq.com/ws/place/v1/search\",\r\n          {\r\n            output: \"jsonp\",\r\n            key: \"QTMBZ-4OLW6-2RBSY-M75PM-WORRE-5YB7X\",\r\n            boundary: `nearby(${point.latitude},${point.longitude},1000)`,\r\n          },\r\n          {\r\n            dataType: \"jsonp\",\r\n          }\r\n        )\r\n        .then((res) => {\r\n\r\n        })\r\n        .catch((err) => {\r\n        });\r\n      // #endif\r\n\t\t},\r\n    // 移动地图变化\r\n    onRegionChange(e) {\r\n      if (e.type == 'end' && (e.causedBy == 'scale' || e.causedBy == 'drag')) {\r\n        if (!this.latLon) {\r\n        \tthis.pageIndex = 1;\r\n\t\t\t\t\tthis.sidePosition = [];\r\n\t\t\t\t\tthis.navMap = uni.createMapContext(\"map1\", this);\r\n        \tthis.navMap.getCenterLocation({\r\n        \t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tthis.changeLongitude = res.longitude;\r\n\t\t\t\t\t\t\tthis.changeLatitude = res.latitude;\r\n\t\t\t\t\t\t\tif (!this.isclickList) {\r\n\t\t\t\t\t\t\t\tthis.sidePosition = [];\r\n\t\t\t\t\t\t\t\tthis.pageIndex = 1;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.isclickList = false;\r\n        \t\t},\r\n        \t\tfail: () => {\r\n        \t\t\tuni.showToast({\r\n        \t\t\t\ttitle: '获取定位失败',\r\n        \t\t\t\ticon: 'none'\r\n        \t\t\t});\r\n        \t\t},\r\n        \t})\r\n        }\r\n      }\r\n    },\r\n    // 点击当前位置图标\r\n    handleCurrPos() {\r\n      let curpos = {\r\n        latitude: this.covers[0].latitude,\r\n        longitude: this.covers[0].longitude,\r\n      };\r\n      this.moveToLocation(curpos);\r\n    },\r\n    // 初始化地图\r\n    init() {\r\n      uni.getLocation({\r\n        type: \"gcj02\", //返回可以用于uni.openLocation的经纬度\r\n        success: (curpos) => {\r\n          let movepos = \"\";\r\n          if (this.latLon) {\r\n            let latLon = this.latLon.split(\",\");\r\n            movepos = {\r\n              latitude: Number(latLon[1]),\r\n              longitude: Number(latLon[2]),\r\n\t\t\t\t\t\t};\r\n            this.haveaddress = latLon[0];\r\n\t\t\t\t\t\tthis.covers.push({\r\n\t\t\t\t\t\t\t// 移动的位置\r\n\t\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\t\tlatitude: 39.909,\r\n\t\t\t\t\t\t\tlongitude: 116.39742,\r\n\t\t\t\t\t\t\ticonPath: \"../../static/images/location.png\",\r\n\t\t\t\t\t\t\twidth: 50,\r\n\t\t\t\t\t\t\theight: 50,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.giveDate(curpos, \"\", movepos);\r\n          } else {\r\n            this.giveDate1(curpos);\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\tthis.changeLongitude = curpos.longitude;\r\n\t\t\t\t\t\tthis.changeLatitude = curpos.latitude;\r\n\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t\tlet navMapNative = uni.createMapContext(\"map1\", this).$getAppMap(); // uni-app map中的地图\r\n\t\t\t\t\t\tnavMapNative.onstatuschanged = (e) => {\r\n\t\t\t\t\t\t\tthis.changeLongitude = e.center.longitude;\r\n\t\t\t\t\t\t\tthis.changeLatitude = e.center.latitude;\r\n\t\t\t\t\t\t\tif (!this.isclickList) {\r\n\t\t\t\t\t\t\t\tthis.sidePosition = [];\r\n\t\t\t\t\t\t\t\tthis.pageIndex = 1;\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.isclickList = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n          }\r\n        },\r\n        fail: (error) => {\r\n          uni.showModal({\r\n            title: \"提示\",\r\n            content: JSON.stringify(error),\r\n          });\r\n        },\r\n      });\r\n    },\r\n  },\r\n  onLoad(options) {\r\n    this.elementId = options.elementId;\r\n    this.latLon = options.latLon;\r\n    // #ifdef MP-WEIXIN\r\n    this.qqmapsdk = new QQMapWX({\r\n      key: this.key,\r\n    });\r\n    // #endif\r\n  },\r\n  mounted() {\r\n\t\tthis.navMap = uni.createMapContext(\"map1\", this); // uni-app map中的地图\r\n\t\tthis.init(); // 初始化\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.page-body {\r\n  flex: 1;\r\n  width: 750rpx;\r\n  height: 100vh;\r\n  background: #fff;\r\n  position: relative;\r\n  padding-bottom: 5rem;\r\n  overflow: hidden;\r\n  .m-map {\r\n    width: 750rpx;\r\n    height: 60vh;\r\n    position: relative;\r\n    .headerBtn {\r\n      width: 750rpx;\r\n      /* #ifdef APP-PLUS */\r\n      height: 180rpx;\r\n      /* #endif */\r\n      /* #ifndef APP-PLUS */\r\n      height: 250rpx;\r\n      /* #endif */\r\n    }\r\n    .okBtn,\r\n    .offBtn {\r\n      width: 120rpx;\r\n      height: 60rpx;\r\n      text-align: center;\r\n      line-height: 50rpx;\r\n      position: absolute;\r\n      color: white;\r\n      font-size: 30rpx;\r\n      z-index: 99999;\r\n      /* #ifdef MP */\r\n      top: 150rpx;\r\n      /* #endif */\r\n      /* #ifndef MP */\r\n      top: 80rpx;\r\n      /* #endif */\r\n    }\r\n    .okBtn {\r\n      right: 30rpx;\r\n      background-color: #05c160;\r\n      border-radius: 5rpx;\r\n    }\r\n    .offBtn {\r\n      left: 25rpx;\r\n      font-size: 35rpx;\r\n    }\r\n    .controls-img {\r\n      width: 100rpx;\r\n      height: 100rpx;\r\n      position: absolute;\r\n      right: 40rpx;\r\n      bottom: 90rpx;\r\n      z-index: 99999;\r\n    }\r\n\t\t.controls-pos {\r\n      position: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\tleft: 50%;\r\n\t\t\twidth: 50px;\r\n\t\t\theight: 50px;\r\n\t\t\tmargin-top: -60px;\r\n\t\t\tmargin-left: -25px;\r\n    }\r\n  }\r\n  .pointContent {\r\n    width: 750rpx;\r\n    height: 40vh;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background: white;\r\n    .iconsty {\r\n      display: flex;\r\n      flex-direction: row;\r\n      z-index: 99999;\r\n      .icon {\r\n        flex: 1;\r\n        text-align: center;\r\n        margin-top: 10rpx;\r\n      }\r\n    }\r\n    .input {\r\n      background: #f2f2f2;\r\n      height: 4vh;\r\n      border-radius: 28rpx;\r\n      width: 690rpx;\r\n      height: 60rpx;\r\n      margin: 0 auto;\r\n      margin-top: 10rpx;\r\n      margin-bottom: 10rpx;\r\n      padding-left: 30rpx;\r\n    }\r\n    .poslist {\r\n      width: 690rpx;\r\n      margin: 0 auto;\r\n      margin-top: 40rpx;\r\n      .font1 {\r\n        font-size: 34rpx;\r\n        display: flex;\r\n        flex-direction: row;\r\n        height: 45rpx;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        word-break: break-all;\r\n        .icon {\r\n          color: #31d387;\r\n          flex: 1;\r\n          text-align: right;\r\n        }\r\n        .name {\r\n          flex: 3;\r\n        }\r\n      }\r\n      .font2 {\r\n        color: #cccccc;\r\n        font-size: 24rpx;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        word-break: break-all;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./map.vue?vue&type=style&index=0&id=0b31f540&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./map.vue?vue&type=style&index=0&id=0b31f540&lang=scss&scoped=true&\""],"sourceRoot":""}