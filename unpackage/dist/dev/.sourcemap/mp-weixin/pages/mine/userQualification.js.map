{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/2.0app/pages/mine/userQualification.vue?d4a4","webpack:///D:/code/2.0app/pages/mine/userQualification.vue?93d1","webpack:///D:/code/2.0app/pages/mine/userQualification.vue?9ca8","webpack:///D:/code/2.0app/pages/mine/userQualification.vue?96ba","uni-app:///pages/mine/userQualification.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","f0","_f","currentFormData","m1","requestConfig","m2","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,qD,mDACAA,EAAWC,a;;;;2DCHX,sOACIC,EADJ,mKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,mCACZ,aAAAF,E;;;;2GCtBf,0mC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,kCAElBC,EAAKR,EAAIS,GAAG,YAAPT,CAAoBA,EAAIU,iBAE7BC,EAAKX,EAAIY,gBACTC,EAAKb,EAAIO,SAAS,aACtBP,EAAIc,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLd,GAAIA,EACJI,GAAIA,EACJG,GAAIA,EACJE,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtBrB,EAAOsB,eAAgB,G;;;;2DCzBvB,4uBAAqrB,eAAG,G;;;;4OCgDxrB,kBACA,8C,uyCACA,CACA,YACA,WAEA,KAJA,WAKA,OACA,uBAGA,iBACA,SACA,WACA,YACA,aACA,wBAEA,SACA,aAEA,SACA,cAEA,mBACA,gBAGA,eACA,0DAEA,SACA,UADA,SACA,8HACA,kBACA,WACA,oBACA,UAMA,OALA,uCACA,YACA,iCAEA,0DACA,IAGA,SACA,YADA,SACA,0IAQA,IAPA,EACA,eACA,gBAEA,oCAEA,GACA,uBACA,IACA,cACA,UACA,cACA,wBACA,0BACA,kCAGA,SACA,uBAnBA,8CAuBA,YAxBA,WAyBA,kFACA,OACA,cACA,UACA,4BAKA,cAlCA,WAoCA,OACA,6BACA,8CACA,aACA,uBACA,yBACA,oBAKA,kBA/CA,SA+CA,4HACA,qBADA,8CAIA,WAnDA,SAmDA,GACA,iDAEA,eAtDA,WAuDA,yCACA,cACA,SAGA,iBA5DA,WA4DA,WACA,OACA,6BACA,SACA,8BAIA,0CACA,OACA,6BACA,iCACA,uBACA,4BAEA,UAEA,oBACA,oCACA,iCACA,WACA,MACA,MACA,cAEA,cACA,QACA,mDACA,kBAEA,oBACA,6BACA,gBACA,aACA,wDACA,eAEA,iBAEA,aACA,oDACA,uBApCA,8BA2CA,kBA5GA,WA6GA,4D","file":"pages/mine/userQualification.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/mine/userQualification.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./userQualification.vue?vue&type=template&id=51d778e1&\"\nvar renderjs\nimport script from \"./userQualification.vue?vue&type=script&lang=js&\"\nexport * from \"./userQualification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/userQualification.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userQualification.vue?vue&type=template&id=51d778e1&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-user-qualification-title\")\n\n  var f0 = _vm._f(\"formValue\")(_vm.currentFormData)\n\n  var m1 = _vm.requestConfig()\n  var m2 = _vm.$i18nMsg(\"lang-save\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        f0: f0,\n        m1: m1,\n        m2: m2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userQualification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./userQualification.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"body-content userQualification\">\r\n\t\t<m-back-bar>\r\n\t\t\t<block slot=\"barTitle\">{{$i18nMsg('lang-user-qualification-title')}}</block><!--中文：个人资质-->\r\n\t\t\t<block slot=\"barRight\">\r\n\t\t\t\t<m-button\r\n\t\t\t\t\t@elementClick=\"handleTopClick()\">\r\n\t\t\t\t\t<block slot=\"buttonIcon\" style=\"display: inline-block;\">\r\n\t\t\t\t\t\t<m-font-icon :iconSize=\"40\"></m-font-icon>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</m-button>\r\n\t\t\t</block>\r\n\t\t</m-back-bar>\r\n\t\t<view class=\"qualification-content\">\r\n\t\t\t<!-- 图片上传-->\r\n\t\t\t<m-upload\r\n\t\t\t\t:uploadNum=\"-1\"\r\n\t\t\t\t:element = \"element\"\r\n\t\t\t\t:base64Url=\"currentFormData | formValue()\"\r\n\t\t\t\t:requestConfig = \"requestConfig()\"\r\n\t\t\t\t:imageConfig = \"element\"\r\n\t\t\t\t@onUpImg=\"upBasicData\" \r\n\t\t\t\t@onImgDel=\"delImgInfo\"\r\n\t\t\t\t@allImgs=\"elementValueChang\">\r\n\t\t\t</m-upload>\r\n<!-- \t\t\t<view class=\"upload-item\">\r\n\t\t\t\t<m-font-icon icon=\"iconpaizhaozhaoxiangji\" color=\"#D9D9D9\" :iconSize=\"90\"></m-font-icon>\r\n\t\t\t\t<view>上传个人资质</view>\r\n\t\t\t</view> -->\r\n<!-- \t\t\t<view class=\"sunsin_picture_list\">\r\n\t\t\t\t<view v-for=\"(item,index) in upload_picture_list\" :key=\"index\" class=\"sunsin_picture_item\">\r\n\t\t\t\t\t<image v-show=\"item.upload_percent == 100\" class=\"sunsin_width\" :data-src=\"item.path_server\" :src=\"item.path_server\"\r\n\t\t\t\t\t mode=\"aspectFill\" :data-idx=\"index\" @click=\"previewImgs\"></image>\r\n\t\t\t\t\t<text class='del iconfont icon-shanchu right' \r\n\t\t\t\t\t @click='deleteImg' :data-url=\"item.path_server\" :data-index=\"index\"\r\n\t\t\t\t\t >×</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t\t<view class=\"save-item\">\r\n\t\t\t\t<m-button :btnTilte=\"$i18nMsg('lang-save')\" btnClass=\"mainColor\" @elementClick=\"insertUpdateDate()\" ></m-button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// import mUpload from '@/components/plugin/uploadImgs/sunui-upimg-basic.vue'\r\n\timport mUpload from '@/components/mniUpload/MniUpload.vue'\r\n\timport { mapState } from 'vuex'\r\n\timport EncryptionPSW from '@/static/js/encryptionPSW.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmUpload\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tupload_picture_list:[\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\ttableName:'user',\r\n\t\t\t\ttypeId:2,\t//资质图片\r\n\t\t\t\tfileIds:[],//图片参数\r\n\t\t\t\tupImgBasic: {\r\n\t\t\t\t\tbasicConfig: {\r\n\t\t\t\t\t\turl: 'file/uploadFiles'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnotli: true,\r\n\t\t\t\t\tsizeType: true,\r\n\t\t\t\t},\r\n\t\t\t\telement: {\r\n\t\t\t\t\tvisiabled:true\r\n\t\t\t\t},\r\n\t\t\t\tcurrentFormData:{},\r\n\t\t\t\tuploadPics: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState([\"userId\",\"baseUrl\",\"defaultUrl\",\"token\"]),\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tformValue(formData,element={},type=2){//type 1-显示id，2-显示name,3-返回对象\r\n\t\t\t\tconst elementId = element.elementId || \"\"\r\n\t\t\t\tlet value = formData[elementId] || \"\"\r\n\t\t\t\ttry{value = JSON.parse(value)\r\n\t\t\t\t}catch(e){}\r\n\t\t\t\tif(type === 1) value = typeof value !== \"object\" ? value : value.id || \"\"\r\n\t\t\t\telse if(type===3) value = value || {}\r\n\t\t\t\telse value = typeof value !== \"object\" ? value : value.name || \"\"\r\n\t\t\t\t//如果字段类型为4：decimal去除后面无用的点\r\n\t\t\t\tif(element.relationColumnType === 4 && value) value = COMMON_FORMAT_DECIMAL(value)\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync upBasicData(e) {\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tconst uploadPics = e.uploadPics,\r\n\t\t\t\t\t  otherParam = e.getPicParam\r\n\t\t\t\t// 上传图片但未绑定的图片数组\r\n\t\t\t\tthis.uploadPics = this.uploadPics.concat(uploadPics);\r\n\t\t\t\t// this.userImgPathId = uploadPics[0].id;\r\n\t\t\t\tlet arrImg = [];\r\n\t\t\t\tfor (let i = 0, len = uploadPics.length; i < len; i++) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (uploadPics[i].id != \"\") {// 将未上传的图片信息保存到fileIds数组\r\n\t\t\t\t\t\t\tconst fileId = uploadPics[i].id\r\n\t\t\t\t\t\t\tthis.fileIds[fileId] = {\r\n\t\t\t\t\t\t\t\ttypeId:otherParam.relationTypeId,\r\n\t\t\t\t\t\t\t\tstateId:otherParam.relationStateId,\r\n\t\t\t\t\t\t\t\tpriorityId:otherParam.relationpriorityId,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tconsole.log('上传失败...');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timageConfig(){\r\n\t\t\t\treturn function(element = {}){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t allImgsParam:{\r\n\t\t\t\t\t\t\telement:element,\r\n\t\t\t\t\t\t\ttriggerBaseType:'upImg'\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trequestConfig(){\r\n\t\t\t\tlet submitUrl ='file/uploadFiles'\r\n\t\t\t\treturn {\r\n\t\t\t\t\t submitUrl:'file/uploadFiles',\r\n\t\t\t\t\t submitParam:EncryptionPSW({tableName:'user'}),\r\n\t\t\t\t\t getPicParam:{\r\n\t\t\t\t\t\trelationId:this.userId,\r\n\t\t\t\t\t\trelationTableName:'user',\r\n\t\t\t\t\t\trelationTypeId:2\r\n\t\t\t\t\t }\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//表单控件值发生改变\r\n\t\t\tasync elementValueChang(param){\r\n\t\t\t\tthis.uploadPics = param.value;\r\n\t\t\t},\r\n\t\t\t// 删除图片\r\n\t\t\tdelImgInfo(e) {\r\n\t\t\t\tif(e in this.uploadPics) delete this.uploadPics[e]\r\n\t\t\t},\r\n\t\t\thandleTopClick(){//处理顶部按钮的点击事件\r\n\t\t\t\tlet url = '/pages/home/home?pageType=myself';\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:url\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinsertUpdateDate(){//新增编辑数据\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showNavigationBarLoading();\r\n\t\t\t\tlet fileString = [];\r\n\t\t\t\tif(this.uploadPics.length==0){\r\n\t\t\t\t\tuni.hideNavigationBarLoading();\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tfor(let i=0;i<this.uploadPics.length;i++){\r\n\t\t\t\t\tlet file={\r\n\t\t\t\t\t\t\"mainId\":this.uploadPics[i].id,\r\n\t\t\t\t        \"relationTableName\":this.tableName,\r\n\t\t\t\t        \"relationId\":this.userId,\r\n\t\t\t\t        \"relationTypeId\":this.typeId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfileString.push(file);\r\n\t\t\t\t}\r\n\t\t\t\tfileString = JSON.stringify(fileString);\r\n\t\t\t\tlet baseUrl = this.baseUrl || this.defaultUrl;\r\n\t\t\t\tvar url= baseUrl+'filesrelations/batchInsert';\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: url, \r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfileString:fileString\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t'token':this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.hideNavigationBarLoading();\r\n\t\t\t\t\t\tif(res.data.success){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: _this.$i18nMsg('lang-myself-SuccessfulPictureUpload'),\r\n\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.uploadPics = [];\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: _this.$i18nMsg('lang-myself-PictureUploadFailed'),\r\n\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取上传图片basic\r\n\t\t\tgetUpImgInfoBasic() {\r\n\t\t\t\tconsole.log('后端转成一维数组:', this.basicArr.join().split(','));\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n"],"sourceRoot":""}