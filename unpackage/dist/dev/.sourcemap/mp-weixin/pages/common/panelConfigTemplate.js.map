{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/2.0app/pages/common/panelConfigTemplate.vue?4020","webpack:///D:/code/2.0app/pages/common/panelConfigTemplate.vue?df3e","webpack:///D:/code/2.0app/pages/common/panelConfigTemplate.vue?6f88","webpack:///D:/code/2.0app/pages/common/panelConfigTemplate.vue?4138","uni-app:///pages/common/panelConfigTemplate.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","m1","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,yD,mDACAA,EAAWC,a;;;;2DCHX,2PACIC,EADJ,mKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uCACZ,aAAAF,E;;;;2GCtBf,6nC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,yBAClBC,EAAKR,EAAIO,SAAS,0BACtBP,EAAIS,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLT,GAAIA,EACJI,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtBhB,EAAOiB,eAAgB,G;;;;2DCnBvB,8uBAAurB,eAAG,G;;;;0ICuB1rB,sCAEA,GADA,oCACA,iBACA,2C,6qDAOA,qB,EACA,CACA,qEACA,KAFA,WAGA,OAEA,cACA,OACA,cACA,cACA,gBACA,UACA,YAEA,WACA,YACA,cACA,oDACA,uBAIA,eACA,sDADA,IAEA,0EAFA,CAGA,aAHA,WAIA,gBAGA,OACA,aADA,SACA,KACA,iCAGA,cACA,mDADA,IAEA,+CAFA,IAGA,0CAHA,IAIA,6CAJA,IAKA,wGALA,IAMA,yDANA,IAOA,iDAPA,CAQA,YARA,WASA,6FACA,kBAEA,WAZA,WAaA,+BACA,sGACA,kBAEA,UAjBA,SAiBA,GACA,0BACA,YACA,yBAEA,aAtBA,SAsBA,GACA,iCACA,6BAEA,6BAEA,YA5BA,SA4BA,GACA,oBACA,mCAEA,YAhCA,SAgCA,gBACA,OACA,OAFA,GAGA,4BAGA,SANA,EAMA,iBANA,EAMA,oBANA,EAMA,iBACA,aAKA,+CAGA,OACA,kCACA,wCACA,8CAEA,qEACA,+BACA,KACA,eACA,0BACA,kCACA,qCACA,uBACA,mCAEA,cACA,WACA,wBACA,uBACA,aAEA,mBACA,iEACA,yBAEA,iBACA,wBACA,iDAEA,UACA,8BACA,iCACA,iCACA,mCAEA,4BACA,kBAGA,wBAEA,UACA,yDACA,KAEA,iCAEA,wBACA,QACA,oBAGA,kBACA,QACA,+BACA,qCAEA,uBACA,oBACA,2BAlEA,4GAsEA,OA/IA,SA+IA,GACA,uCACA,oBAGA,MACA,iCAEA,2BAEA,mCAEA,qCAEA,GACA,eACA,oBACA,wBACA,sBACA,sCACA,wBACA,yBACA,sBACA,kBACA,UACA,uBAEA,eACA,6CAGA,WACA,6BACA,wCAGA,kBAnLA,WAoLA,qCAEA,cAtLA,WAuLA,0C","file":"pages/common/panelConfigTemplate.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/common/panelConfigTemplate.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./panelConfigTemplate.vue?vue&type=template&id=040dbc15&name=BRATemplate&\"\nvar renderjs\nimport script from \"./panelConfigTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./panelConfigTemplate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/common/panelConfigTemplate.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./panelConfigTemplate.vue?vue&type=template&id=040dbc15&name=BRATemplate&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-form-modalClear\")\n  var m1 = _vm.$i18nMsg(\"lang-form-modalConfirm\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./panelConfigTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./panelConfigTemplate.vue?vue&type=script&lang=js&\"","<template name=\"BRATemplate\">\r\n\t<!-- 带选择按钮 -->\n\t<view class=\"BRATemplate\">\r\n\t\t<m-back-bar>  \r\n\t\t\t<block slot=\"barTitle\">{{barTitle}}</block>\r\n\t\t\t<block slot=\"barRight\">\r\n\t\t\t\t<top-btns-coms :tabInfo=\"tabInfo\"></top-btns-coms> \r\n\t\t\t</block>\r\n\t\t</m-back-bar>\r\n\t\t<view class=\"list-seach\" v-if=\"quickQuery.isSearch\">\r\n\t\t\t<m-input-search :tabInfo=\"tabInfo\" :mobileTabId=\"tabInfo.mobileTabId\" :isQuickQuery=\"quickQuery.isQuickQuery\" :isSeniorFilter=\"quickQuery.isSeniorFilter\"  @doSearch=\"handelSearch\"></m-input-search> \r\n\t\t</view>\r\n\t\t<ListCom ref=\"List\" v-if=\"isShow\" :tabInfo=\"tabInfo\" :listConfig = \"listConfig\" @clickList=\"clickList\"></ListCom>\r\n\t\t<view class=\"BRATemplate-btns\">\r\n\t\t\t<view class=\"bottomBtnsComs\">\r\n\t\t\t\t<m-button class=\"btn-item\" btnClass=\"whiteColor\" :btnTilte=\"$i18nMsg('lang-form-modalClear')\" key=\"clearBottomBtn\" @elementClick=\"handleClear\"></m-button>\r\n\t\t\t\t<m-button class=\"btn-item\" btnClass=\"mainColor\" :btnTilte=\"$i18nMsg('lang-form-modalConfirm')\" key=\"sureBottomBtn\" @elementClick=\"handleSure\"></m-button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport bus from '@/static/js/bus'\r\n\timport {homeApi} from '@/common/request/api.js'\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\timport ClassList from '@/static/js/ClassList.js'\r\n\t\r\n\timport mInputSearch from '@/components/element/m-inputSearch.vue'\r\n\timport topBtnsComs from '@/pageComs/topBtnsComs.vue'\r\n\timport bottomBtnsComs from '@/pageComs/bottomBtnsComs.vue'\r\n\timport ListCom from '@/components/makeup/list/ListCom.vue'\r\n\t\r\n\tlet listTem = new ClassList(),mobileTabs = \"\"\r\n\texport default{\r\n\t\tcomponents: {topBtnsComs,bottomBtnsComs,mInputSearch,ListCom},\r\n\t\tdata (){\r\n\t\t\treturn {\r\n\t\t\t\t//列表属性\r\n\t\t\t\tlistConfig:{},\r\n\t\t\t\tpage:0,//总页数\r\n\t\t\t\tcurrentPage:1,//当前页码\r\n\t\t\t\tquickQuery:{},//便捷搜索\r\n\t\t\t\tsearchParams:{},//搜索参数\r\n\t\t\t\tisShow:false,\r\n\t\t\t\tmultiple:false,\r\n\t\t\t\t//面板属性\r\n\t\t\t\ttabInfo:{},//面板基本信息\r\n\t\t\t\tbarTitle:'',//返回栏标题\r\n\t\t\t\tbtnBasicInfo:{\r\n\t\t\t\t\tnormalEvent:[\"normalBtn\",\"addBtn\",\"relationAddBtn\"],\r\n\t\t\t\t\tdelEvent:[\"delBtn\"]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"bundleName\",\"bundleId\",\"BusinessID\"]),\r\n\t\t\t...mapState(\"common\", [\"templateParams\",\"tabsElements\",\"tabsFormDatas\"]), //面板参数\r\n\t\t\ttemplateType(){\r\n\t\t\t\treturn \"list\"\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tsearchParams(newValue, oldValue) {\r\n\t\t\t\tthis.$refs.list.searchParams = newValue\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"SET_bundle\",\"SET_BusinessID\"]),\r\n\t\t\t...mapMutations(\"list\",[\"SET_LIST_REFRESH\"]),\r\n\t\t\t...mapMutations(\"form\", [\"SET_ALLBTNS\"]),\r\n\t\t\t...mapMutations(\"home\",[\"SET_NEW_BUNDLE\"]),\r\n\t\t\t...mapMutations(\"common\",[\"SET_TEMPLATE_PARAMS\",\"SET_TRIGGERMAP\",\"SET_COMMONSLT\",\"SET_TABS_ELEMENT\"]),//设置面板变量\r\n\t\t\t...mapMutations(\"advanceFilter\", [\"SET_ADVAN_FILTERS\"]),\r\n\t\t\t...mapMutations(\"Toast\", [\"TOAST_REQUESTURLS\"]),\r\n\t\t\thandleClear(){\r\n\t\t\t\tif(this.tabInfo.onKey) bus.$emit(this.tabInfo.onKey, {id:\"\",element:this.tabInfo.element})\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\thandleSure(){\r\n\t\t\t\tlet checkIds = this.$refs.List.checkIds\r\n\t\t\t\tif(this.tabInfo.onKey) bus.$emit(this.tabInfo.onKey, {id:checkIds.join(\",\"),element:this.tabInfo.element})\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\tclickList(params){//点击列表\r\n\t\t\t\tparams = {...this.tabInfo,...params}\r\n\t\t\t\tparams.isMain = false\r\n\t\t\t\tlistTem.clickListNode(this,params)\r\n\t\t\t},\r\n\t\t\thandelSearch(searchParam){//处理搜索\r\n\t\t\t\tlet params = {...this.quickQuery, ...searchParam}\r\n\t\t\t\tconst quickQueryParams = listTem.handleSearchText(this,params)\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs.List.doSearch(quickQueryParams)\r\n\t\t\t},\r\n\t\t\tsetListInfo(params){//设置列表信息\r\n\t\t\t\tthis.page = params.page || 1\r\n\t\t\t\tthis.currentPage = params.currentPage || 1\r\n\t\t\t},\r\n\t\t\tsetPageInfo(mobileTab,mobileTabId){//根据relationTab取具体面板信息\r\n\t\t\t\tconst _this = this,\r\n\t\t\t\t\t mobileTabsBYRelation = mobileTab[mobileTabId],\r\n\t\t\t\t\t mobileTabRelationTab = mobileTab[mobileTabsBYRelation.mobileTabRelationTabId] || {}\r\n\t\t\t\t\r\n\t\t\t\t//如果数据来源是接口\r\n\t\t\t\tconst {dataSourceType, commonApiHeaderId, interfaceInParam} = mobileTabsBYRelation || {}\r\n\t\t\t\tif(dataSourceType === 2 && !commonApiHeaderId){//如果数据来源是接口，但没有接口id提示错误\r\n\t\t\t\t\tthis.Static_GlobalFucs.showModal(this, {content:this.$i18nMsg(\"lang-configuration-noInterface\")},'error')\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\t//设置返回栏标题\r\n\t\t\t\tthis.barTitle = mobileTabsBYRelation.mobileTabName || this.bundleName\r\n\t\t\t\t\r\n\t\t\t\t//设置列表参数\r\n\t\t\t\tlet queryParamsConfig = {\r\n\t\t\t\t\tadvancedQuery:mobileTabsBYRelation.advancedQuery || {},//过滤条件中需要转化的变量\r\n\t\t\t\t\tadvancedSqlQuery:mobileTabsBYRelation.advancedSqlQuery || [],//sql中的变量\r\n\t\t\t\t\trelationMainTab:this.tabInfo.relationMainTab,\r\n\t\t\t\t}\r\n\t\t\t\tif(this.tabInfo.jumpTag) queryParamsConfig.bundleParams = this.tabInfo.bundleParams || {}\r\n\t\t\t\tconst queryParams = listTem.advancedParams(this,queryParamsConfig)//获取过滤条件中的变量\r\n\t\t\t\tconst listConfig = {}\r\n\t\t\t\tlistConfig.otherParams = {//列表额外参数，过滤条件中设置的参数\r\n\t\t\t\t\tglobalMap:queryParams.advancedQuery,\r\n\t\t\t\t\tglobalQueryMap:queryParams.advancedSqlQuery,\r\n\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\telementList:mobileTabsBYRelation.elements,\r\n\t\t\t\t\tmobileTabSource:mobileTabsBYRelation.mobileTabSource\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.baseParams = {//列表基本参数\r\n\t\t\t\t\thasIcon:true,\r\n\t\t\t\t\tlistIcon:mobileTabsBYRelation.listIcon || {},\r\n\t\t\t\t\tmultiple:this.multiple,\r\n\t\t\t\t\thasCheck:true,\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.isCheckedParams = {//列表点击返回参数\r\n\t\t\t\t\tcheckIds:this.tabInfo.checkId ? this.tabInfo.checkId.split(\",\") : [],\r\n\t\t\t\t\tprimaryKey:mobileTabsBYRelation.primaryKey\r\n\t\t\t\t}\r\n\t\t\t\tlistConfig.goEventParams = {//列表点击返回参数\r\n\t\t\t\t\tprimaryKey:mobileTabsBYRelation.primaryKey,\r\n\t\t\t\t\tmobileTabRelationTabId:mobileTabsBYRelation.mobileTabRelationTabId,\r\n\t\t\t\t}\r\n\t\t\t\tif(dataSourceType === 2 && commonApiHeaderId){\r\n\t\t\t\t\tlistConfig.baseParams.dataSourceType = dataSourceType\r\n\t\t\t\t\tlistConfig.baseParams.commonApiHeaderId = commonApiHeaderId\r\n\t\t\t\t\tlistConfig.otherParams.interfaceInParam = interfaceInParam\r\n\t\t\t\t\tlistConfig.url = \"static_getDataByInterface\" //来源与接口\r\n\t\t\t\t} \r\n\t\t\t\telse listConfig.url = \"currencyGetListData\"\r\n\t\t\t\tthis.listConfig = listConfig\r\n\t\t\t\t\r\n\t\t\t\t//延迟显示列表\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t//如果数据来源为接口时接口id必须不能为空；或者面板数据源和控件列表不能为空\r\n\t\t\t\t\tif((dataSourceType === 2 && commonApiHeaderId)\r\n\t\t\t\t\t\t|| (mobileTabsBYRelation.mobileTabSource && mobileTabsBYRelation.elements.length>0))  this.isShow = true\r\n\t\t\t\t}, 100)\r\n\t\t\t\t//设置搜索控件参数\r\n\t\t\t\tthis.quickQuery = mobileTabsBYRelation.quickQuery || {}\r\n\t\t\t\t\r\n\t\t\t\tthis.SET_ADVAN_FILTERS({//设置高级筛选控件\r\n\t\t\t\t\ttabId:mobileTabId,\r\n\t\t\t\t\tparams:mobileTabsBYRelation.elements\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tthis.SET_ALLBTNS({//设置按钮\r\n\t\t\t\t\ttabId:mobileTabId,\r\n\t\t\t\t\tbottomBtns:mobileTabsBYRelation.btnList.bottomBtn,\r\n\t\t\t\t\ttopRightBtns:mobileTabsBYRelation.btnList.topRightBtn\r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_TABS_ELEMENT({//设置面板控件\r\n\t\t\t\t\ttabId:_this.mobileTabId,\r\n\t\t\t\t\telements:mobileTabsBYRelation.elements\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(options){\r\n\t\t\tthis.TOAST_REQUESTURLS({type:\"clear\"})//清空请求地址\r\n\t\t\tconst currentTabId = options.relationTab //当前面板的id\r\n\t\t\t\r\n\t\t\t//当前面板id不存在，不进行面板布局 todo 进入报错界面\r\n\t\t\tif(!currentTabId) return \r\n\t\t\tconst currentTemParams = this.templateParams[currentTabId] || {} //获取当前面板参数\r\n\t\t\t\r\n\t\t\tthis.multiple = currentTemParams.isMultiple//是否多选\r\n\t\t\t//判断是否有mobileTabs\r\n\t\t\tmobileTabs = uni.getStorageSync(currentTemParams.bundleId) || {}\r\n\t\t\t\r\n\t\t\tlet onKey = `listReload${this._uid}`\r\n\t\t\t//定义面板信息\r\n\t\t\tlet tabInfo = {\r\n\t\t\t\t_uid:this._uid,\r\n\t\t\t\tbundleId:currentTemParams.bundleId,\r\n\t\t\t\tbundleName:currentTemParams.bundleName,\r\n\t\t\t\tmobileTabId:Number(currentTabId),\r\n\t\t\t\trelationMainTab:currentTemParams.relationMainTab || '',\r\n\t\t\t\tmobileTabs:mobileTabs.mobileTabs,\r\n\t\t\t\ttrigger:mobileTabs.triggerMap || {},\r\n\t\t\t\tcheckId:currentTemParams.checkId || '',//数据选择默认选中的数据\r\n\t\t\t\tonKey:currentTemParams.onKey || '',//数据选框的监听key\r\n\t\t\t\tselfKey:onKey,\r\n\t\t\t\telement:currentTemParams.element || {}\r\n\t\t\t}\r\n\t\t\tthis.tabInfo = tabInfo\r\n\t\t\tthis.setPageInfo(mobileTabs.mobileTabs,tabInfo.mobileTabId)\r\n\t\t\t\r\n\t\t\t//设置监听\r\n\t\t\tconst _this = this\r\n\t\t\tbus.$on(onKey, (params) => { //reload\r\n\t\t\t\t_this.$refs.list.getListData(\"reload\"); \r\n\t\t\t})\r\n\t\t},\r\n\t\tonPullDownRefresh() {//重新加载\r\n\t\t\tthis.$refs.list.getListData(\"load\");\r\n\t\t},\r\n\t\tonReachBottom(){// 上拉加载\r\n\t\t\tthis.$refs.List.getListData(\"loadnext\");\r\n\t\t},\r\n\t}\n</script>\n"],"sourceRoot":""}