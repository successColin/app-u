{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/2.0app/pages/common/advancedFilter.vue?6447","webpack:///D:/code/2.0app/pages/common/advancedFilter.vue?7f6b","webpack:///D:/code/2.0app/pages/common/advancedFilter.vue?47dc","webpack:///D:/code/2.0app/pages/common/advancedFilter.vue?1104","uni-app:///pages/common/advancedFilter.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","m1","m2","m3","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,oD,mDACAA,EAAWC,a;;;;2DCHX,gOACIC,EADJ,mKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,kCACZ,aAAAF,E;;;;2GCtBf,umC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,+BAClBC,EAAKR,EAAIO,SAAS,+BAClBE,EAAKT,EAAIO,SAAS,wBAClBG,EAAKV,EAAIO,SAAS,yBACtBP,EAAIW,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLX,GAAIA,EACJI,GAAIA,EACJC,GAAIA,EACJC,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtBlB,EAAOmB,eAAgB,G;;;;2DCvBvB,yuBAAkrB,eAAG,G;;;;0ICiCrrB,sCACA,sCACA,kBAIA,2C,utDACA,cAGA,CACA,uBACA,KAFA,WAGA,OAEA,SACA,eACA,UAEA,WACA,cACA,eAEA,YACA,8BAGA,eACA,uDADA,IAEA,2DAFA,IAGA,6FAEA,cACA,+CADA,IAEA,4BACA,mBACA,yBACA,mBACA,0BACA,0BACA,kBACA,uBATA,IAWA,yDAXA,CAYA,YAZA,WAaA,iBACA,iCACA,wBACA,+BACA,WAEA,+BACA,kBAEA,eAtBA,WAuBA,2CACA,yCACA,KACA,KACA,4BACA,mBACA,aACA,aACA,cACA,WAEA,OACA,KACA,eAEA,GADA,cACA,iCAEA,GADA,OACA,gBACA,kBACA,YACA,gBAGA,WACA,OAEA,IACA,MACA,mBACA,eACA,kCAEA,MACA,QACA,iBAIA,wBACA,+BACA,WAEA,8BACA,kBAEA,YApEA,SAoEA,sCACA,YArEA,SAqEA,qEAGA,KACA,eACA,qCACA,uBACA,mCAEA,iBACA,OACA,cACA,kBACA,qBACA,uBACA,oBACA,eAEA,kBAGA,wBAEA,WA5FA,SA4FA,KACA,MACA,WACA,iDACA,gBACA,kBACA,cACA,iBACA,uDACA,8BACA,GACA,YACA,YACA,WACA,gBACA,cAGA,aACA,KACA,KACA,KACA,KACA,mBACA,kBACA,WACA,gDACA,gDACA,MACA,aACA,qBACA,QACA,yCACA,oBACA,qBAEA,0BACA,qBACA,6BACA,aACA,2BAIA,eAxIA,WAwIA,uEACA,6BACA,GACA,YACA,iCACA,6CACA,qCACA,WACA,cACA,8BACA,0BACA,oBACA,qBACA,UAEA,gFAEA,0DACA,mDACA,sBAEA,uBACA,cACA,KAEA,oBACA,4BACA,6BAEA,2BACA,4BACA,iHAEA,2BACA,4BACA,yBAKA,OAtMA,SAsMA,GACA,oBAEA,MAEA,kCACA,6BAGA,mCACA,mBACA,WAEA,mBACA,OACA,eACA,oBACA,wBACA,gCACA,sCACA,aACA,yBACA,sBACA,kCACA,8BACA,oCACA,kCACA,wCAEA,eACA,qBAGA,4BACA,OACA,iCACA,oBACA,8BACA,SAEA,IADA,oCAKA,uB","file":"pages/common/advancedFilter.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/common/advancedFilter.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./advancedFilter.vue?vue&type=template&id=1af9b135&\"\nvar renderjs\nimport script from \"./advancedFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./advancedFilter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/common/advancedFilter.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./advancedFilter.vue?vue&type=template&id=1af9b135&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-advancedFilter-filter\")\n  var m1 = _vm.$i18nMsg(\"lang-advancedFilter-loading\")\n  var m2 = _vm.$i18nMsg(\"lang-form-modalClear\")\n  var m3 = _vm.$i18nMsg(\"lang-form-modalFilter\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./advancedFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./advancedFilter.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 表单展示类型 -->\r\n\t<view class=\"formTemplate\">\r\n\t\t<m-back-bar>\r\n\t\t\t<block slot=\"barTitle\">{{$i18nMsg(\"lang-advancedFilter-filter\")}}</block><!-- 中文：高级筛选 -->\r\n\t\t</m-back-bar>\r\n\t\t<FormCom v-if=\"isShow\" ref=\"mForm\" \r\n\t\t :formConfig=\"formConfig\" \r\n\t\t :tabInfo=\"tabInfo\" \r\n\t\t :oldFormData=\"formData\"\r\n\t\t :advancedFilterConditions = \"advancedFilterConditions\"\r\n\t\t :showElementType = \"[1,2,3,9,12,20,21,22,25,31]\">\r\n\t\t</FormCom>\r\n\t\t<view v-else class=\"formloading animated fadeInDown\">\r\n\t\t\t<image src=\"../../static/images/svg/tail-spin.svg\" style=\"width: 25px; height: 25px;\" mode=\"aspectFill\" ></image>{{$i18nMsg('lang-advancedFilter-loading')}}<!--中文：加载中-->\r\n\t\t</view>\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<view class=\"formTemplate-btns foot\" v-show=\"isOriginHei\">\r\n\t\t\t<view class=\"bottomBtnsComs\">\r\n\t\t\t\t<m-button class=\"btn-item\" btnClass=\"whiteColor\" \r\n\t\t\t\t :btnTilte=\"$i18nMsg('lang-form-modalClear')\"\r\n\t\t\t\t key=\"clearBottomBtn\" \r\n\t\t\t\t @elementClick=\"handleClear\"></m-button>\r\n\t\t\t\t<m-button class=\"btn-item\" btnClass=\"mainColor\" \r\n\t\t\t\t :btnTilte=\"$i18nMsg('lang-form-modalFilter')\"\r\n\t\t\t\t key=\"advancedFilterBtn\" \r\n\t\t\t\t @elementClick=\"advancedFilter\"></m-button>\r\n\t\t\t</view> \r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport bus from '@/static/js/bus'\r\n\timport {advanceFilterApi} from '@/common/request/api.js'\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\r\n\timport FormCom from '@/components/makeup/form/FormCom.vue'\r\n\t\r\n\timport ClassForm from '@/static/js/ClassForm.js'\r\n\tconst Form = new ClassForm()\r\n\t\r\n\tlet mobileTabs = \"\",static_btnList = {}\r\n\texport default {\r\n\t\tcomponents: {FormCom},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//界面信息\r\n\t\t\t\tonKey: \"\",\r\n\t\t\t\toriginHeight: 0,\r\n\t\t\t\tisShow:false,\r\n\t\t\t\t//面板信息\r\n\t\t\t\ttabInfo: {}, \r\n\t\t\t\tformConfig:{},\r\n\t\t\t\tselectsInfo: {}, //级联下拉框\r\n\t\t\t\t//数据信息\r\n\t\t\t\tformData: {},\r\n\t\t\t\tadvancedFilterConditions:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"bundleName\", \"bundleId\", \"isOriginHei\"]),\r\n\t\t\t...mapState(\"advanceFilter\",[\"advancedFilterFormDatas\"]),\r\n\t\t\t...mapState(\"common\", [\"templateParams\",\"doRefreshParent\",\"tabsElements\",\"tabsFormDatas\"]), //面板参数\r\n\t\t},\r\n\t\tmethods: { \r\n\t\t\t...mapMutations([\"SET_ORIGIN\", \"SET_bundle\"]),\r\n\t\t\t...mapMutations(\"common\", [\r\n\t\t\t\t\"SET_DROPDOWNDATA\", //设置下拉框数据\r\n\t\t\t\t\"SET_FORMREFRESH_PARENT\",\r\n\t\t\t\t\"SET_TABS_ELEMENT\",\r\n\t\t\t\t\"SET_COMMON_TABSELEMENTS\",\r\n\t\t\t\t\"SET_COMMON_TABSOLDDATAS\",\r\n\t\t\t\t\"CLEAR_FORMDATAS\",\r\n\t\t\t\t\"SET_TABS_FORMDATAS\",\r\n\t\t\t]),\r\n\t\t\t...mapMutations(\"advanceFilter\",[\"SET_ADV_FORMDATAS\"]),\r\n\t\t\thandleClear(){//清空\r\n\t\t\t\tthis.formData = {}\r\n\t\t\t\tthis.advancedFilterConditions = {}\r\n\t\t\t\tthis.SET_ADV_FORMDATAS({\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tvalue:{}\r\n\t\t\t\t})\r\n\t\t\t\tbus.$emit(this.onKey, {})\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\tadvancedFilter(){//点击筛选\r\n\t\t\t\tconst formData = this.$refs.mForm.currentFormData|| {},\r\n\t\t\t\t\t  connector = this.$refs.mForm.currentConditions || {}\r\n\t\t\t\tlet advancedFilterParasms = {},\r\n\t\t\t\t\tstoreAdvancedFilterParasms = {}\r\n\t\t\t\tconst elements = this.tabInfo.elements || []\r\n\t\t\t\telements.map(item => {\r\n\t\t\t\t\tconst name = item.name,\r\n\t\t\t\t\t\t  baseType = item.baseType,\r\n\t\t\t\t\t\t  elementId = item.elementId,\r\n\t\t\t\t\t\t  value = formData[elementId] || {}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet static_connector = connector[elementId],\r\n\t\t\t\t\t\tstatic_value = \"\",\r\n\t\t\t\t\t\tdataFormat = item.dataFormat\r\n\t\t\t\t\tif(baseType === 31) dataFormat = 1 //为区间\r\n\t\t\t\t\tif(dataFormat === 1 && JSON.stringify(value)!==\"{}\") {//区间\r\n\t\t\t\t\t\tstatic_connector = static_connector || 7\r\n\t\t\t\t\t\tif(value.start|| value.end ) {\r\n\t\t\t\t\t\t\tconst start = value.start || \"\",\r\n\t\t\t\t\t\t\t\t  end = value.end || \"\"\r\n\t\t\t\t\t\t\tstatic_value = start + \",\" + end\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tstatic_value = value.id || \"\"\r\n\t\t\t\t\t\tstatic_connector = static_connector || 3\r\n\t\t\t\t\t} \r\n\t\t\t\t\tif(static_value){\r\n\t\t\t\t\t\tadvancedFilterParasms[name] = {\r\n\t\t\t\t\t\t\tstatic_connector: static_connector,\r\n\t\t\t\t\t\t\tstatic_value: static_value,\r\n\t\t\t\t\t\t\tstatic_type: item.relationColumnType\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstoreAdvancedFilterParasms[elementId] = {\r\n\t\t\t\t\t\t\tvalue:value,\r\n\t\t\t\t\t\t\tconnector:static_connector\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_ADV_FORMDATAS({//设置高级筛选数据\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tvalues:storeAdvancedFilterParasms\r\n\t\t\t\t})\r\n\t\t\t\tbus.$emit(this.onKey, advancedFilterParasms)\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\tgetFormData(params){ this.$refs.mForm.submitFormData()},\r\n\t\t\tsetPageInfo(mobileTabsBYRelation, relationTab, formData={}) { //根据relationTab取具体面板信息\r\n\t\t\t\tconst _this = this\r\n\t\t\t\t\r\n\t\t\t\tconst formConfig = {}\r\n\t\t\t\tformConfig.otherParams = {//列表额外参数，过滤条件中设置的参数\r\n\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\telementList:mobileTabsBYRelation.elements,\r\n\t\t\t\t\tmobileTabSource:mobileTabsBYRelation.mobileTabSource,\r\n\t\t\t\t}\r\n\t\t\t\tconst elements = mobileTabsBYRelation.elements,\r\n\t\t\t\t\t  tabElements = [...elements]\r\n\t\t\t\tformConfig.baseParams = {//列表基本参数\r\n\t\t\t\t\tcurrentElements:elements,\r\n\t\t\t\t\tcurrentBottomBtns:[],\r\n\t\t\t\t\tcurrentTopRightBtns:[],\r\n\t\t\t\t\tcurrentComboBoxs:[],\r\n\t\t\t\t\ttabElements:tabElements,\r\n\t\t\t\t}\r\n\t\t\t\tthis.formConfig = formConfig\r\n\t\t\t\t\r\n\t\t\t\t//请求表单数据\r\n\t\t\t\tthis.formDataFormat(formData)\r\n\t\t\t},\r\n\t\t\tgetElement(relationTab,mobileTabsBYRelation){\r\n\t\t\t\tif(!relationTab) return\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tadvanceFilterApi.seniorFilterRelationGet(this, {\r\n\t\t\t\t\tmobileTabId: relationTab\r\n\t\t\t\t}).then( value => {\r\n\t\t\t\t\tif(value.success) {\r\n\t\t\t\t\t\tconst advElements = value.data || [],\r\n\t\t\t\t\t\t\t  advancedFilterFormData = _this.advancedFilterFormDatas[_this.tabInfo.mobileTabId] || {}\r\n\t\t\t\t\t\tconst listCommonSelects = _this.tabInfo.commonSelects || [],\r\n\t\t\t\t\t\t\t  baseConfig = {\r\n\t\t\t\t\t\t\t\t  visiabled : 1,\r\n\t\t\t\t\t\t\t\t  requisite : 0,\r\n\t\t\t\t\t\t\t\t  readonly: 0,\r\n\t\t\t\t\t\t\t\t  defaultValue: \"\",\r\n\t\t\t\t\t\t\t\t  parameter: \"\"\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst listElements = mobileTabsBYRelation.elements\r\n\t\t\t\t\t\tlet elements = [],\r\n\t\t\t\t\t\t\tcommonSelects = [],\r\n\t\t\t\t\t\t\tformData = {},\r\n\t\t\t\t\t\t\tadvancedFilterConditions = {}\r\n\t\t\t\t\t\tadvElements.map(item => {\r\n\t\t\t\t\t\t\tconst elementId = item.elementId,\r\n\t\t\t\t\t\t\t\t  oldElementValue = advancedFilterFormData[elementId] || {}\r\n\t\t\t\t\t\t\tlet listElement = listElements.find( item => item.elementId === elementId),\r\n\t\t\t\t\t\t\t\tlistCommonSelect = listCommonSelects.find( item => item.elementId === elementId)\r\n\t\t\t\t\t\t\tif(!listElement) return\r\n\t\t\t\t\t\t\tif(listCommonSelect) commonSelects.push(listCommonSelect)\r\n\t\t\t\t\t\t\telements.push({...listElement, ...baseConfig})\r\n\t\t\t\t\t\t\tlet baseConnector = 3\r\n\t\t\t\t\t\t\tif(listElement.baseType === 31 || listElement.dataFormat === 1) baseConnector = 7\r\n\t\t\t\t\t\t\tadvancedFilterConditions[elementId] = oldElementValue.connector || baseConnector\r\n\t\t\t\t\t\t\tformData[elementId] = oldElementValue.value || {}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_this.tabInfo.commonSelects = commonSelects\r\n\t\t\t\t\t\t_this.tabInfo.elements = elements\r\n\t\t\t\t\t\t_this.advancedFilterConditions = advancedFilterConditions\r\n\t\t\t\t\t\tmobileTabsBYRelation.elements = elements\r\n\t\t\t\t\t\t_this.setPageInfo(mobileTabsBYRelation,relationTab,formData)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tformDataFormat(formData = {}){//表单数据转化\r\n\t\t\t\tconst baseParams = this.formConfig.baseParams\r\n\t\t\t\tconst dataBasic = {\r\n\t\t\t\t\teventType:4,\r\n\t\t\t\t\ttriggerList:this.tabInfo.trigger,\r\n\t\t\t\t\trelationMainTab:this.tabInfo.relationMainTab,\r\n\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tformData:formData,\r\n\t\t\t\t\toldFormData:formData,\r\n\t\t\t\t\ttriggerElements:baseParams.tabElements,\r\n\t\t\t\t\toldElements:baseParams.tabElements,\r\n\t\t\t\t\tsearchSelectInfo:{},\r\n\t\t\t\t\tloadsearchSelects:[],\r\n\t\t\t\t\trules:[]\r\n\t\t\t\t}\r\n\t\t\t\tthis.Static_GlobalFucs.formElementsTrigger({...baseParams,...dataBasic},this).then(tabParams => {\r\n\t\t\t\t\r\n\t\t\t\t\tthis.formConfig.baseParams.currentElements = tabParams.currentElements\r\n\t\t\t\t\tthis.formConfig.loadsearchSelects = tabParams.loadsearchSelects\r\n\t\t\t\t\tthis.formData = tabParams.formData\r\n\t\t\t\t\t//延迟显示表单\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isShow = true\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.SET_TABS_ELEMENT({//设置面板控件\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\telements:tabParams.currentElements\r\n\t\t\t\t\t})  \r\n\t\t\t\t\tthis.SET_COMMON_TABSELEMENTS({//设置面板控件\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\telements:[...tabParams.currentElements,...tabParams.currentBottomBtns,...tabParams.currentTopRightBtns,...tabParams.currentComboBoxs]\r\n\t\t\t\t\t}) \r\n\t\t\t\t\tthis.SET_COMMON_TABSOLDDATAS({//设置原始数据\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\tvalue:tabParams.formData\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconst currentTabId = options.relationTab //当前面板的id\r\n\t\t\t//当前面板id不存在，不进行面板布局 todo 进入报错界面\r\n\t\t\tif (!currentTabId) return\r\n\t\t\t\r\n\t\t\tconst paramKey = `advancedFilter_${currentTabId}`\r\n\t\t\tconst currentTemParams = this.templateParams[paramKey] || {} //获取当前面板参数\r\n\t\t\t\r\n\t\t\t//判断是否有mobileTabs\r\n\t\t\tconst bundleInfo = uni.getStorageSync(currentTemParams.bundleId) || {}\r\n\t\t\tconst mobileTabs = bundleInfo.mobileTabs || {},\r\n\t\t\t\t  mobileTabsBYRelation = mobileTabs[currentTabId] || {}\r\n\t\t\t//定义面板信息\r\n\t\t\tthis.onKey = currentTemParams.onkey //筛选按钮\r\n\t\t\tlet tabInfo = {\r\n\t\t\t\t_uid:this._uid,\r\n\t\t\t\tbundleId:currentTemParams.bundleId,\r\n\t\t\t\tbundleName:currentTemParams.bundleName,\r\n\t\t\t\tmobileTabId:Number(currentTabId) + '_filter',\r\n\t\t\t\trelationMainTab:currentTemParams.relationMainTab || '',\r\n\t\t\t\tmobileTabs:mobileTabs,\r\n\t\t\t\ttrigger:bundleInfo.triggerMap || {},\r\n\t\t\t\tparentKey:currentTemParams.onkey || \"\",\r\n\t\t\t\tformType: currentTemParams.type || 'advancedFilter', //设置表单来源：addBtn-新增；editBtn-编辑\r\n\t\t\t\ttemplateType: \"advancedFilter\",\r\n\t\t\t\tcascadeSelects: mobileTabsBYRelation.cascadeSelects || [],\r\n\t\t\t\tcommonSelects: mobileTabsBYRelation.commonSelects || [],\r\n\t\t\t\tselectsFilterParams: mobileTabsBYRelation.filterParams || {},\r\n\t\t\t}\r\n\t\t\tthis.tabInfo = tabInfo\r\n\t\t\tthis.getElement(currentTabId,mobileTabsBYRelation)\r\n\t\t\t\r\n\t\t\t//解决底部按钮在软键盘打开时被顶起问题\r\n\t\t\tconst res = uni.getSystemInfoSync(),\r\n\t\t\t\t  _this = this\r\n\t\t\tthis.originHeight = res.windowHeight\r\n\t\t\tthis.SET_ORIGIN(true)//设置按钮栏显示\r\n\t\t\tuni.onWindowResize((res) => {\r\n\t\t\t\tlet isOriginHei = true\r\n\t\t\t\tif (res.size.windowHeight < _this.originHeight) {\r\n\t\t\t\t\tisOriginHei = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisOriginHei = true\r\n\t\t\t\t}\r\n\t\t\t\t_this.SET_ORIGIN(isOriginHei)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n"],"sourceRoot":""}