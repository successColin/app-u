{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/2.0app/pages/frames/FormFramework.vue?641f","webpack:///D:/code/2.0app/pages/frames/FormFramework.vue?f4b2","webpack:///D:/code/2.0app/pages/frames/FormFramework.vue?e425","webpack:///D:/code/2.0app/pages/frames/FormFramework.vue?6c22","uni-app:///pages/frames/FormFramework.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,mD,mDACAA,EAAWC,a;;;;2DCHX,8NACIC,EADJ,mKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,iCACZ,aAAAF,E;;;;2GCtBf,smC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,wuBAAirB,eAAG,G;;;;0ICuBprB,oCACA,sCACA,kBAOA,2C,u3EACA,gB,EAGA,CACA,qEACA,KAFA,WAGA,OAEA,SACA,YACA,mBACA,oBACA,qBACA,eACA,UAEA,WACA,cACA,eACA,iBAEA,YACA,iBACA,cACA,cAGA,eACA,8CADA,IAEA,8CAFA,IAGA,4EAEA,cACA,4EADA,IAEA,iEAFA,IAGA,6CAHA,IAIA,iDAJA,IAKA,4BACA,mBACA,yBACA,mBACA,0BACA,qBACA,kBACA,yBAZA,IAcA,0EAdA,CAeA,YAfA,SAeA,GAEA,6DACA,mCAEA,cApBA,WAqBA,WACA,8CAEA,WAxBA,WAwBA,wCACA,YAzBA,SAyBA,qEACA,MASA,+CACA,+CAKA,+CAGA,6BACA,kCACA,qDAEA,KACA,eACA,QACA,qCACA,uBACA,mCAEA,oBACA,yBACA,2BACA,wBACA,iCACA,cACA,kBACA,oBACA,sBACA,mBACA,eAEA,kBAEA,2BACA,oBACA,2BAGA,oBA/CA,aACA,2CACA,4CACA,kDACA,uDA6CA,QA5EA,WA4EA,WACA,gFAGA,sEACA,4BAJA,uBAOA,eApFA,WAoFA,uEACA,6BACA,GACA,YACA,iCACA,6CACA,qCACA,WACA,cACA,8BACA,0BACA,oBACA,qBACA,UAEA,uBACA,+BACA,yBAEA,gFACA,0DACA,mDACA,0IAEA,sBAEA,uBACA,cACA,KAEA,eACA,4BACA,+BACA,mCACA,+BAEA,oBACA,4BACA,6BAEA,2BACA,4BACA,iHAEA,sBACA,4BACA,sBAEA,iBACA,4BACA,sBAKA,OAxKA,SAwKA,cAGA,GAFA,uCACA,oBACA,YAIA,yBACA,4BACA,YACA,iBACA,oBACA,qBAEA,6CAIA,0CACA,mBACA,cACA,KACA,gBAEA,oCACA,WAEA,GACA,eACA,uBACA,2BACA,cACA,mBACA,aACA,yBACA,aACA,iBACA,mBACA,oCACA,kCACA,wCAEA,eAEA,gDACA,6BACA,sBACA,wBACA,sBAEA,kBACA,kBACA,OACA,wBACA,kCACA,+BAEA,kBACA,0CACA,wCACA,6CACA,mBACA,mBAEA,IAEA,+CACA,4CACA,gCACA,OACA,yCAIA,sBAIA,4BACA,OACA,iCACA,8BACA,SAEA,IADA,oCAKA,sB","file":"pages/frames/FormFramework.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/frames/FormFramework.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./FormFramework.vue?vue&type=template&id=b74ed96c&\"\nvar renderjs\nimport script from \"./FormFramework.vue?vue&type=script&lang=js&\"\nexport * from \"./FormFramework.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/frames/FormFramework.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormFramework.vue?vue&type=template&id=b74ed96c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormFramework.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormFramework.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 表单展示类型 -->\r\n\t<view class=\"formTemplate\">\r\n\t\t<m-back-bar>\r\n\t\t\t<block slot=\"barTitle\">{{barTitle}}</block>\r\n\t\t\t<block slot=\"barRight\">\r\n\t\t\t\t<top-btns-coms :tabInfo=\"tabInfo\"\r\n\t\t\t\t\t@showComBox=\"showComBox\"> \r\n\t\t\t\t</top-btns-coms> \r\n\t\t\t</block>\r\n\t\t</m-back-bar>\r\n\t\t<dropdown-menu v-if=\"comBoxVisible\" :tabInfo=\"tabInfo\" @showComBox=\"showComBox\"></dropdown-menu>\r\n\t\t<FormCom v-if=\"isShow\" ref=\"mForm\" :formConfig=\"formConfig\" :tabInfo=\"tabInfo\" :oldFormData=\"formData\"></FormCom>\r\n\t\t<mLodingSvg v-if=\"configLoading\" loadingTitle=\"界面配置缓存中,请稍后\"></mLodingSvg>\r\n\t\t<view class=\"formTemplate-btns foot\" v-show=\"isOriginHei\">\r\n\t\t\t<bottom-btns-coms :tabInfo=\"tabInfo\"\r\n\t\t\t @checkedForm = \"checkedForm\">\r\n\t\t\t</bottom-btns-coms> \r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport bus from '@/static/js/bus'\r\n\timport {formApi,homeApi} from '@/common/request/api.js'\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\r\n\timport FormCom from '@/components/makeup/form/FormCom.vue'\r\n\timport dropdownMenu from \"@/pageComs/dropdownMenu.vue\"\r\n\timport topBtnsComs from '@/pageComs/topBtnsComs.vue'\r\n\timport bottomBtnsComs from '@/pageComs/bottomBtnsComs.vue'\r\n\t\r\n\timport ClassForm from '@/static/js/ClassForm.js'\r\n\tconst Form = new ClassForm()\r\n\t\r\n\tlet mobileTabs = \"\",static_btnList = {}\r\n\texport default {\r\n\t\tcomponents: {FormCom,topBtnsComs,bottomBtnsComs,dropdownMenu},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//界面信息\r\n\t\t\t\tonkey: \"\",\r\n\t\t\t\tbarTitle: '',\r\n\t\t\t\tformType: \"editBtn\", //表单来源：addBtn-新增；editBtn-编辑\r\n\t\t\t\ttemplateType: \"form\", //模板类型form，list\r\n\t\t\t\tisDoRefreshParent: false, //是否需要刷新父页面刷新\r\n\t\t\t\toriginHeight: 0,\r\n\t\t\t\tisShow:false,\r\n\t\t\t\t//面板信息\r\n\t\t\t\ttabInfo: {}, \r\n\t\t\t\tformConfig:{},\r\n\t\t\t\tselectsInfo: {}, //级联下拉框\r\n\t\t\t\tcomBoxVisible: false, //下拉菜单是否显示\r\n\t\t\t\t//数据信息\r\n\t\t\t\tformData: {},\r\n\t\t\t\tconfigLoading:false,//界面配置加载中\r\n\t\t\t\tbundleName:'',\r\n\t\t\t\tbundleId:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"isOriginHei\",\"userDesigner\"]),\r\n\t\t\t...mapState(\"home\", {newBundle:'newBundle'}),\r\n\t\t\t...mapState(\"common\", [\"doRefreshParent\",\"tabsElements\",\"tabsFormDatas\"]), //面板参数\r\n\t\t},\r\n\t\tmethods: { \r\n\t\t\t...mapMutations([\"SET_ORIGIN\", \"SET_bundle\",\"SET_ORIGIN\",\"SET_GlobalIds\"]),\r\n\t\t\t...mapMutations(\"form\", [\"SET_FILTER_SQLPARAMS\",\"SET_ALLBTNS\"]),\r\n\t\t\t...mapMutations(\"home\",[\"SET_NEW_BUNDLE\"]),\r\n\t\t\t...mapMutations(\"Toast\", [\"TOAST_REQUESTURLS\"]),\r\n\t\t\t...mapMutations(\"common\", [\r\n\t\t\t\t\"SET_DROPDOWNDATA\", //设置下拉框数据\r\n\t\t\t\t\"SET_FORMREFRESH_PARENT\",\r\n\t\t\t\t\"SET_TABS_ELEMENT\",\r\n\t\t\t\t\"SET_COMMON_TABSELEMENTS\",\r\n\t\t\t\t\"SET_TABS_FORMDATAS\",\r\n\t\t\t\t\"CLEAR_FORMDATAS\",\r\n\t\t\t\t\"SET_COMMON_MAINFRAME\"\r\n\t\t\t]),\r\n\t\t\t...mapMutations(\"verificationRule\",[\"CLEAR_RULESTATE\",\"SET_VER_RULES\"]),\r\n\t\t\tcheckedForm(params){\r\n\t\t\t\tlet form = {}\r\n\t\t\t\tif(params.static_checkedForm === 1) form = this.$refs.mForm.verificationRule() //需要校验\r\n\t\t\t\telse form = this.$refs.mForm.submitFormData()\r\n\t\t\t},\r\n\t\t\tfinishLoading() { //完成加载\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tsetTimeout(() => { _this.isLoading = false }, 100)\r\n\t\t\t},\r\n\t\t\tshowComBox() { this.comBoxVisible = !this.comBoxVisible },//显示或者隐藏下拉菜单\r\n\t\t\tsetPageInfo(mobileTabsBYRelation, mainTabID, formId=\"\") { //根据relationTab取具体面板信息\r\n\t\t\t\tif(!mainTabID){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:this.$i18nMsg(\"lang-form-modalTips\"),\r\n\t\t\t\t\t\tcontent:this.$i18nMsg('lang-configuration'), // 中文：\"请联系管理员配置主页\",\r\n\t\t\t\t\t\tcancelText:this.$i18nMsg(\"lang-form-modalCancel\"),\r\n\t\t\t\t\t\tconfirmText:this.$i18nMsg(\"lang-form-modalConfirm\"),\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\tthis.CLEAR_FORMDATAS(this.tabInfo.mobileTabId)//请求对应面板的需要提交的表单值\r\n\t\t\t\tthis.CLEAR_RULESTATE(this.tabInfo.mobileTabId)//清空对应面板的校验规则\r\n\t\t\t\t\r\n\t\t\t\tconst _this = this\r\n\t\t\t\t\r\n\t\t\t\t//设置返回栏标题\r\n\t\t\t\tthis.barTitle = mobileTabsBYRelation.mobileTabName || this.bundleName\r\n\t\t\t\t\r\n\t\t\t\t//设置表单参数\r\n\t\t\t\tconst queryParams = Form.advancedParams(this,{ \r\n\t\t\t\t\tadvancedQuery:mobileTabsBYRelation.advancedQuery || {},//过滤条件中需要转化的变量\r\n\t\t\t\t\tsystemParam:{mobileTabId:this.tabInfo.mobileTabId}\r\n\t\t\t\t})//获取过滤条件中的变量\r\n\t\t\t\tconst formConfig = {}\r\n\t\t\t\tformConfig.otherParams = {//列表额外参数，过滤条件中设置的参数\r\n\t\t\t\t\tid:queryParams || formId,\r\n\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\telementList:mobileTabsBYRelation.elements,\r\n\t\t\t\t\tmobileTabSource:mobileTabsBYRelation.mobileTabSource,\r\n\t\t\t\t}\r\n\t\t\t\tconst elements = [...mobileTabsBYRelation.elements],\r\n\t\t\t\t\t  bottomBtn = [...mobileTabsBYRelation.btnList.bottomBtn],\r\n\t\t\t\t\t  topRightBtn = [...mobileTabsBYRelation.btnList.topRightBtn],\r\n\t\t\t\t\t  comboBox = [...mobileTabsBYRelation.btnList.comboBox],\r\n\t\t\t\t\t  tabElements = [...elements,...bottomBtn,...topRightBtn,...comboBox]\r\n\t\t\t\tformConfig.baseParams = {//列表基本参数\r\n\t\t\t\t\tcurrentElements:elements,\r\n\t\t\t\t\tcurrentBottomBtns:bottomBtn,\r\n\t\t\t\t\tcurrentTopRightBtns:topRightBtn,\r\n\t\t\t\t\tcurrentComboBoxs:comboBox,\r\n\t\t\t\t\ttabElements:tabElements,\r\n\t\t\t\t}\r\n\t\t\t\tthis.formConfig = formConfig\r\n\t\t\t\t\r\n\t\t\t\tthis.SET_FILTER_SQLPARAMS({\r\n\t\t\t\t\ttabId:mobileTabsBYRelation.mobileTabId,\r\n\t\t\t\t\tparams:mobileTabsBYRelation.filterSQLParams\r\n\t\t\t\t})\r\n\t\t\t\t//请求表单数据\r\n\t\t\t\tthis.getDate()\r\n\t\t\t},\r\n\t\t\tgetDate(){//获取表单\r\n\t\t\t\tif(!this.formConfig.otherParams.id || !this.formConfig.otherParams.mobileTabSource){this.formDataFormat();return} \r\n\t\t\t\tconst _this = this\r\n\t\t\t\t//如果是编辑需要获取\r\n\t\t\t\tformApi.getDate(this, this.formConfig.otherParams).then(value => {\r\n\t\t\t\t\tthis.formDataFormat(value)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tformDataFormat(formData = {}){//表单数据转化\r\n\t\t\t\tconst baseParams = this.formConfig.baseParams\r\n\t\t\t\tconst dataBasic = {\r\n\t\t\t\t\teventType:4,\r\n\t\t\t\t\ttriggerList:this.tabInfo.trigger,\r\n\t\t\t\t\trelationMainTab:this.tabInfo.relationMainTab,\r\n\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tformData:formData,\r\n\t\t\t\t\toldFormData:formData,\r\n\t\t\t\t\ttriggerElements:baseParams.tabElements,\r\n\t\t\t\t\toldElements:baseParams.tabElements,\r\n\t\t\t\t\tsearchSelectInfo:{},\r\n\t\t\t\t\tloadsearchSelects:[],\r\n\t\t\t\t\trules:[]\r\n\t\t\t\t}\r\n\t\t\t\tthis.SET_TABS_ELEMENT({//设置面板控件\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\telements:baseParams.tabElements\r\n\t\t\t\t}) \r\n\t\t\t\tthis.Static_GlobalFucs.formElementsTrigger({...baseParams,...dataBasic},this).then(tabParams => {\r\n\t\t\t\t\tthis.formConfig.baseParams.currentElements = tabParams.currentElements\r\n\t\t\t\t\tthis.formConfig.loadsearchSelects = tabParams.loadsearchSelects\r\n\t\t\t\t\tthis.formConfig.baseParams.tabElements = [...tabParams.currentBottomBtns,...tabParams.currentTopRightBtns,...tabParams.currentComboBoxs,...tabParams.currentElements]\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.formData = tabParams.formData\r\n\t\t\t\t\t//延迟显示表单\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isShow = true\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.SET_ALLBTNS({//设置按钮、下拉菜单原生数据\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\tbottomBtns:tabParams.currentBottomBtns,\r\n\t\t\t\t\t\ttopRightBtns:tabParams.currentTopRightBtns,\r\n\t\t\t\t\t\tcomboBoxs:tabParams.currentComboBoxs\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.SET_TABS_ELEMENT({//设置面板控件\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\telements:tabParams.currentElements\r\n\t\t\t\t\t})  \r\n\t\t\t\t\tthis.SET_COMMON_TABSELEMENTS({//设置面板控件\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\telements:[...tabParams.currentElements,...tabParams.currentBottomBtns,...tabParams.currentTopRightBtns,...tabParams.currentComboBoxs]\r\n\t\t\t\t\t}) \r\n\t\t\t\t\tthis.SET_TABS_FORMDATAS({//设置面板数据\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\tformData:tabParams.formData\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.SET_VER_RULES({//设置校验规则\r\n\t\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\trules:tabParams.rules\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.TOAST_REQUESTURLS({type:\"clear\"})//清空请求地址\r\n\t\t\tthis.SET_ORIGIN(true)\r\n\t\t\tif(!options.bundleId) return\r\n\t\t\t\r\n\t\t\tconst _t = this\r\n\t\t\t//如果有bundleId传递过来默认显示\r\n\t\t\tthis.bundleId = options.bundleId\r\n\t\t\tthis.bundleName = options.title || ''\r\n\t\t\tif(!options.jumpTag){\r\n\t\t\t\tthis.SET_bundle({\r\n\t\t\t\t\tbundleId:options.bundleId,\r\n\t\t\t\t\tbundleName:options.title \r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_COMMON_MAINFRAME({_uid:this._uid})//记录框架的唯一标识\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//判断是否需要重新获取界面元素\r\n\t\t\tconst bundleInfo = uni.getStorageSync(this.bundleId) || {}\r\n\t\t\tconst mobileTabs = bundleInfo.mobileTabs || {},\r\n\t\t\t\t  mobileTabId = bundleInfo.mainTabID\r\n\t\t\tlet mobileTabsBYRelation = {}\r\n\t\t\tif(mobileTabId) mobileTabsBYRelation = mobileTabs[mobileTabId] || {}\r\n\t\t\t\r\n\t\t\tconst isNew = this.newBundle[this.bundleId],//是不是为newbundle\r\n\t\t\t\t  bundleV = options.V || \"0\"\r\n\t\t\t//定义面板信息\r\n\t\t\tlet tabInfo = {\r\n\t\t\t\t_uid:this._uid,\r\n\t\t\t\tbundleId:this.bundleId,\r\n\t\t\t\tbundleName:this.bundleName,\r\n\t\t\t\tmobileTabId:mobileTabId,\r\n\t\t\t\trelationMainTab:'',\r\n\t\t\t\tmobileTabs:mobileTabs,\r\n\t\t\t\ttrigger:bundleInfo.triggerMap || {},\r\n\t\t\t\tparentKey:\"\",\r\n\t\t\t\trefreshParams:{},\r\n\t\t\t\tformType:'editBtn', //设置表单来源：addBtn-新增；editBtn-编辑\r\n\t\t\t\tcascadeSelects: mobileTabsBYRelation.cascadeSelects || [],\r\n\t\t\t\tcommonSelects: mobileTabsBYRelation.commonSelects || [],\r\n\t\t\t\tselectsFilterParams: mobileTabsBYRelation.filterParams || {},\r\n\t\t\t}\r\n\t\t\tthis.tabInfo = tabInfo\r\n\t\t\t//清除GlobalIds\r\n\t\t\tif(tabInfo.formType !== 'multiple') this.SET_GlobalIds([])\r\n\t\t\tif(isNew || JSON.stringify(mobileTabs) === \"{}\"){//重新获取bundle\r\n\t\t\t\tthis.configLoading = true\r\n\t\t\t\thomeApi.getPage(this,{\r\n\t\t\t\t\tbundleId: tabInfo.bundleId\r\n\t\t\t\t})\r\n\t\t\t\t.then(value => {\r\n\t\t\t\t\tconst mainTabID = value.mainTabID\r\n\t\t\t\t\tif(!mainTabID) return\r\n\t\t\t\t\tthis.tabInfo.mobileTabId = mainTabID\r\n\t\t\t\t\tthis.tabInfo.mobileTabs = value.mobileTabs\r\n\t\t\t\t\tthis.tabInfo.trigger = value.triggerMap\r\n\t\t\t\t\t\r\n\t\t\t\t\tmobileTabsBYRelation = value.mobileTabs[mainTabID]\r\n\t\t\t\t\tthis.tabInfo.cascadeSelects = mobileTabsBYRelation.cascadeSelects\r\n\t\t\t\t\tthis.tabInfo.commonSelects = mobileTabsBYRelation.commonSelects\r\n\t\t\t\t\tthis.tabInfo.selectsFilterParams = mobileTabsBYRelation.filterParams\r\n\t\t\t\t\tthis.configLoading = false\r\n\t\t\t\t\tthis.setPageInfo(mobileTabsBYRelation,mainTabID)\r\n\t\t\t\t\t//将bundle版本存入bundleVersion缓存种，版本号以用户设计组和bundleId作为key\r\n\t\t\t\t\tif(isNew){\r\n\t\t\t\t\t\t//加载过后设置isNew为false\r\n\t\t\t\t\t\tthis.SET_NEW_BUNDLE({bundle:this.bundleId,isNew:false})\r\n\t\t\t\t\t\tlet bundleVersions = uni.getStorageSync(\"bundleVersion\") || {},\r\n\t\t\t\t\t\t\tkey = this.userDesigner + \"_\" + this.bundleId\r\n\t\t\t\t\t\tbundleVersions[key] = bundleV\r\n\t\t\t\t\t\tuni.setStorageSync(\"bundleVersion\",bundleVersions)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else {\r\n\t\t\t\tthis.setPageInfo(mobileTabsBYRelation,mobileTabId)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//解决底部按钮在软键盘打开时被顶起问题\r\n\t\t\tconst res = uni.getSystemInfoSync(),\r\n\t\t\t\t  _this = this\r\n\t\t\tthis.originHeight = res.windowHeight\r\n\t\t\tuni.onWindowResize((res) => {\r\n\t\t\t\tlet isOriginHei = true\r\n\t\t\t\tif (res.size.windowHeight < _this.originHeight) {\r\n\t\t\t\t\tisOriginHei = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisOriginHei = true\r\n\t\t\t\t}\r\n\t\t\t\t_this.SET_ORIGIN(isOriginHei)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n"],"sourceRoot":""}