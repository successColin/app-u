{"version":3,"sources":["webpack:///D:/code/2.0app/pageComs/bottomBtnsComs.vue?ed20","webpack:///D:/code/2.0app/pageComs/bottomBtnsComs.vue?eb91","webpack:///D:/code/2.0app/pageComs/bottomBtnsComs.vue?e98f","webpack:///D:/code/2.0app/pageComs/bottomBtnsComs.vue?13dc","uni-app:///pageComs/bottomBtnsComs.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","__map","buttons","item","index","m0","showByPermissiones","baseType","visiabled","type","m1","btnInfo","$orig","__get_orig","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,gOACIA,EADJ,gKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8BACZ,aAAAF,E;;;;2GCtBf,qlC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,SAAS,SAASC,EAAMC,GAC7C,IAAIC,EAAKX,EAAIY,mBAAmBH,EAAKI,SAAUJ,EAAKK,UAAWL,EAAKM,MAChEC,EAAKhB,EAAIiB,QAAQR,GACrB,MAAO,CACLS,MAAOlB,EAAImB,WAAWV,GACtBE,GAAIA,EACJK,GAAIA,OAIRhB,EAAIoB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLpB,GAAIA,MAKRqB,GAAmB,EACnBC,EAAkB,GACtB3B,EAAO4B,eAAgB,G;;;;2DC1BvB,0tBAAmqB,eAAG,G;;;;0ICkBtqB,sCACA,kBACA,6CACA,4CACA,4CAEA,gC,q9CACA,oB,EACA,CACA,OACA,SACA,YACA,8BAEA,cACA,YACA,0BACA,qDACA,oBACA,0DAIA,KAfA,WAgBA,OACA,iBACA,cACA,iBAGA,eACA,2CADA,IAEA,wBACA,4BACA,8BACA,kCACA,sBANA,IAQA,4CARA,IASA,4EATA,IAUA,mEAVA,CAiBA,QAjBA,WAkBA,mBACA,uBAEA,EAGA,EAHA,SAFA,EAKA,EAHA,mBAFA,MAEA,EAFA,EAEA,EAGA,EAHA,cACA,EAEA,EAFA,OAEA,EAFA,gBAEA,EAFA,kBACA,EACA,EADA,YACA,EADA,eACA,EADA,YAGA,wBAEA,IACA,OACA,iBACA,sBACA,4CACA,EAEA,OACA,uDACA,gBACA,qBACA,eACA,iBAIA,QA5CA,WA6CA,+BACA,oCAGA,cACA,qCADA,IAEA,gFAFA,IAGA,6EAHA,CAIA,mBAJA,SAIA,OACA,eACA,sCACA,oCACA,iCACA,oEAEA,4BACA,uEAEA,mBAdA,WAcA,gEACA,MAEA,OACA,YACA,qCACA,+BACA,kCAEA,+BAOA,OALA,GACA,0BACA,6BACA,UAEA,QAEA,eAhCA,SAgCA,GACA,0BACA,0CAEA,+BACA,sBACA,+BAIA,GAHA,+CACA,6CACA,oFACA,6EAIA,kFAGA,qDACA,oDACA,uBAMA,YAGA,GAFA,kDACA,gDACA,YAEA,2CACA,UAEA,+BACA,iBACA,iDACA,oCAEA,CACA,gDAEA,0CACA,UACA,sCACA,sBA5CA,IA+CA,oCACA,IACA,wBACA,qBAEA,qBAzCA,6EA2CA,WAtFA,SAsFA,cACA,KACA,CACA,OACA,wCACA,qCACA,uCACA,+BACA,kCAEA,KACA,kCAEA,IADA,SAVA,WAWA,KACA,WACA,2BAEA,+DACA,+DACA,kBACA,kBACA,kEAEA,sCAEA,OADA,KACA,SAZA,oDAYA,MAGA,SA3BA,UA8BA,gBArHA,WAuHA,IAFA,gEACA,KACA,wBACA,eACA,qCACA,UACA,OAGA,UAEA,QAhIA,SAgIA,GACA,uBAEA,QAnIA,SAmIA,GAEA,GADA,mBACA,MACA,mEACA,sBACA,SACA,sEACA,UACA,wDACA,4BACA,KACA,6DACA,mCACA,8CACA,4DAGA,SApJA,SAoJA,mEACA,OACA,MACA,kCACA,mBACA,QACA,SAHA,WAIA,uBACA,cACA,eACA,QAGA,mBAGA,QA3OA,WA4OA,SACA,iCACA,4BACA,4BAEA,0BACA,sD","file":"pageComs/bottomBtnsComs.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./bottomBtnsComs.vue?vue&type=template&id=257143f8&\"\nvar renderjs\nimport script from \"./bottomBtnsComs.vue?vue&type=script&lang=js&\"\nexport * from \"./bottomBtnsComs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pageComs/bottomBtnsComs.vue\"\nexport default component.exports","export * from \"-!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bottomBtnsComs.vue?vue&type=template&id=257143f8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.buttons, function(item, index) {\n    var m0 = _vm.showByPermissiones(item.baseType, item.visiabled, item.type)\n    var m1 = _vm.btnInfo(item)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bottomBtnsComs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bottomBtnsComs.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"bottomBtnsComs\">\r\n\t\t<m-button class=\"btn-item\" v-for=\"(item,index) in buttons\" v-if=\"showByPermissiones(item.baseType,item.visiabled,item.type)\"\r\n\t\t\t:ref=\"item.elementId\" \r\n\t\t\t:btnClass=\"item.btnStyle\" \r\n\t\t\t:btnInfo=\"btnInfo(item)\"\r\n\t\t\t:elementId=\"item.elementId\" \r\n\t\t\t:btnTilte=\"item.label\" \r\n\t\t\t:visiabled=\"item.visiabled\"\r\n\t\t\t:elementFormat = \"item.elementFormat\"\r\n\t\t\t:disabled = \"btnDisable\"\r\n\t\t\t:key=\"index\"\r\n\t\t\t:checkForm = 'true'\r\n\t\t\t@elementClick=\"handleBtnClick\"></m-button>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport bus from '@/static/js/bus'\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\timport {ELEMENT_BACKFRAME} from '@/common/functions/element.js'\r\n\timport {TRIGGER_Conditions} from '@/common/constant/triggers.js'\r\n\timport {TRIGGRT_ConditionFnc} from '@/common/functions/trigger.js';\r\n\t\r\n\timport BtnsComs from './btnsComs.js'\r\n\tconst btnsComs = new BtnsComs()\r\n\texport default{\r\n\t\tprops:{\r\n\t\t\ttabInfo:{\r\n\t\t\t\ttype:Object,\r\n\t\t\t\tdefault:function () { return {} }\r\n\t\t\t},\r\n\t\t\tbtnBasicInfo:{//按钮信息\r\n\t\t\t\ttype:Object,\r\n\t\t\t\tdefault:function () { return {\r\n\t\t\t\t\tnormalEvent:[\"normalBtn\",\"jumpMenuBtn\",\"jumpTabBtn\"],\r\n\t\t\t\t\tdelEvent:[\"delBtn\"],\r\n\t\t\t\t\tsaveEvent:[\"saveBtn\",\"archiveBtn\",\"normalArchiveBtn\"]\r\n\t\t\t\t} }\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata (){\r\n\t\t\treturn {\r\n\t\t\t\tcomBoxVisible:false,\r\n\t\t\t\tbtnDisable:false,//按钮是否不能点击\r\n\t\t\t\tbundlesList:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"GlobalIds\",\"isOriginHei\"]),\r\n\t\t\t...mapState(\"common\", {\r\n\t\t\t\ttabsElements:'tabsElements',\r\n\t\t\t\ttabsFormDatas:'tabsFormDatas',\r\n\t\t\t\tsubmitTabsDatas:'submitTabsDatas',\r\n\t\t\t\tframeUId:'frameUId'\r\n\t\t\t}),\r\n\t\t\t...mapState(\"form\", [\"currentBottomBtns\"]),\r\n\t\t\t...mapState(\"verificationRule\", {rules: 'rules',checkedFlag:'checkedFlag'}),\r\n\t\t\t...mapState(\"home\",[\"bottomList\",\"workSpaceList\",\"topCoreList\"]),\r\n\t\t\t/**\r\n\t\t\t * 处理按钮需要携带的参数，\r\n\t\t\t * baseType:按钮类型 普通按钮、保存、删除、归档等\r\n\t\t\t * checkedForm:是否需要校验表单,目前没有配置，默认保存按钮需要校验，其他按钮均不需要 TODO 后续有校验规则是需要进一步完善\r\n\t\t\t * elementFormat:刷新类型 0-不刷新；1-刷新本面板；2-刷新框架\r\n\t\t\t */\r\n\t\t\tbtnInfo() {\r\n\t\t\t\treturn function(item){\r\n\t\t\t\t\tconst noChecked = [4,5,6,24,43,44],//是否需要校验表单规则\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tbaseType,checkedForm = 1,elementFormat,\r\n\t\t\t\t\t\t\t\t\ttype,relationTabId,relationTableName,\r\n\t\t\t\t\t\t\t\t\telementId,jumpMenuList,jumpTabList\r\n\t\t\t\t\t\t\t\t} = item \r\n\t\t\t\t\t//判断是否需要校验表单规则\r\n\t\t\t\t\tlet static_checkedForm = noChecked.indexOf(baseType) !== -1 ? 0 : checkedForm\r\n\t\t\t\t\t//根据不同的按钮，有不同的默认刷新类型\r\n\t\t\t\t\tlet static_elementFormat = elementFormat\r\n\t\t\t\t\tif(!static_elementFormat){//如果没有设置刷新类型\r\n\t\t\t\t\t\tconst norefreshAry = [24,43,44] \r\n\t\t\t\t\t\tif(norefreshAry.indexOf(baseType)!==-1) static_elementFormat = 0 //普通按钮默认不刷新\r\n\t\t\t\t\t\telse if(this.tabInfo.templateType === \"list\" && baseType === 6) static_elementFormat = 0 //列表上的删除按钮默认刷新本面板\r\n\t\t\t\t\t\telse static_elementFormat = 2 //其他默认都刷新上一个面板\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype,relationTabId,relationTableName,elementId,\r\n\t\t\t\t\t\telementFormat:static_elementFormat, //0-不刷新，1-刷新本面板，2-刷新上一个面板\r\n\t\t\t\t\t\tstatic_checkedForm: static_checkedForm,\r\n\t\t\t\t\t\tjumpMenuList, //跳转菜单\r\n\t\t\t\t\t\tjumpTabList//跳转面板\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbuttons(){\r\n\t\t\t\tconst tabId = this.tabInfo.mobileTabId\r\n\t\t\t\treturn this.currentBottomBtns[tabId]\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations([\"SET_FRAMETYPE\"]),\r\n\t\t\t...mapMutations(\"framsStore\",[\"SET_FRAMS_JUMParams\",\"SET_FRAMS_JUMINParams\"]),\r\n\t\t\t...mapMutations(\"common\",[\"SET_TEMPLATE_PARAMS\",\"SET_FORMREFRESH_PARENT\"]),\r\n\t\t\tshowByPermissiones(basetype,visiabled,type){//按钮权限\r\n\t\t\t\tif(!visiabled) return false\r\n\t\t\t\tconst saveEvent = this.btnBasicInfo.saveEvent || [],\r\n\t\t\t\t\t  normalEvent = this.btnBasicInfo.normalEvent || [],\r\n\t\t\t\t\t  delEvent = this.btnBasicInfo.delEvent || []\r\n\t\t\t\tif(saveEvent.indexOf(type)===-1 && delEvent.indexOf(type)===-1 && normalEvent.indexOf(type)===-1) return false\r\n\t\t\t\t\r\n\t\t\t\tlet bundleId = this.tabInfo.bundleId\r\n\t\t\t\treturn this.Static_GlobalFucs.Permissiones(bundleId,basetype,this.tabInfo.formType)\r\n\t\t\t},\r\n\t\t\tgetJumpBundleParam(passParam = ''){\r\n\t\t\t\tif(!passParam) return\r\n\t\t\t\t\r\n\t\t\t\tconst jumpConfig = {\r\n\t\t\t\t\tpassParam:passParam,\r\n\t\t\t\t\tmobileTabId: this.tabInfo.mobileTabId,\r\n\t\t\t\t\ttabsElements: this.tabsElements,\r\n\t\t\t\t\ttabsFormDatas: this.tabsFormDatas\r\n\t\t\t\t}\r\n\t\t\t\tconst jumpBundleParam = btnsComs.getJumpBundleParam(jumpConfig, this)\r\n\t\t\t\t//设置跳转菜单的变量\r\n\t\t\t\tif(jumpBundleParam)\r\n\t\t\t\t\tthis.SET_FRAMS_JUMParams({\r\n\t\t\t\t\t\tsource:this.tabInfo.bundleId,\r\n\t\t\t\t\t\tvalue:jumpBundleParam\r\n\t\t\t\t\t})\r\n\t\t\t\treturn jumpBundleParam || {}\r\n\t\t\t},\r\n\t\t\thandleBtnClick(params){//按钮点击\r\n\t\t\t\tthis.$emit(\"checkedForm\",{\r\n\t\t\t\t\tstatic_checkedForm:params.static_checkedForm//是否验证表单数据\r\n\t\t\t\t})\r\n\t\t\t\tconst tabId = this.tabInfo.mobileTabId,\r\n\t\t\t\t      check = this.checkedFlag[tabId]\r\n\t\t\t\tif(params.static_checkedForm === 1 && !check) return\r\n\t\t\t\tparams = {...this.tabInfo,...this.btnBasicInfo,...params}\r\n\t\t\t\tparams.submitFormData = this.submitTabsDatas[tabId] || {}\r\n\t\t\t\tif(this.tabInfo.templateType === \"list\") params.submitFormData.ids = this.GlobalIds.join(\",\")\r\n\t\t\t\tif(this.tabInfo.templateType === \"list\" && params.type === 'delBtn' && !params.submitFormData.ids){\r\n\t\t\t\t\t this.Static_GlobalFucs.showToast({title:this.$i18nMsg('lang-BRAT-delTip')}) // 中文：请选择数据\r\n\t\t\t\t\t return \r\n\t\t\t\t}\r\n\t\t\t\tif(params.type === 'saveBtn' && this.tabInfo.formType === \"multiple\" && this.GlobalIds.length>0){\r\n\t\t\t\t\t//如果是保存按钮并且来源为列表上普通按钮\r\n\t\t\t\t\t//判断是不是需要走批量逻辑\r\n\t\t\t\t\tparams.submitFormData.static_ids = this.GlobalIds.join(\",\")\r\n\t\t\t\t\tif( \"id\" in params.submitFormData) delete params.submitFormData.id\r\n\t\t\t\t\tparams.type = \"batchSaveBtn\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//容错，如果同时存在jumpMenuList和jumpTabList\r\n\t\t\t\t//如果同时有跳转菜单和跳转面板，默认跳转菜单\r\n\t\t\t\t//tab-面板；menu-菜单\r\n\t\t\t\tlet jumpType = 'tab'\r\n\t\t\t\tif(params.jumpMenuList && params.jumpMenuList.length) jumpType = 'menu'\r\n\t\t\t\tconsole.log(\"tab=============================\")\r\n\t\t\t\tif(jumpType === 'menu') {//如果有跳转菜单列表\r\n\t\t\t\t\t//获取符合条件的跳转菜单\r\n\t\t\t\t\tconst jumpMenu = this.getAccordBundle(params.jumpMenuList)\r\n\t\t\t\t\tif(jumpMenu){//如果有符合的菜单跳转\r\n\t\t\t\t\t\t//先进行判断菜单列表中符合的列表\r\n\t\t\t\t\t\tconst {jumpBundleId,passParam} = jumpMenu\r\n\t\t\t\t\t\tparams.jumpBundleId = jumpBundleId\r\n\t\t\t\t\t\tparams.jumpBundleParam = this.getJumpBundleParam(passParam) || {}\r\n\t\t\t\t\t\tparams.bundlesList = this.bundlesList\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log(\"tab=============================\")\r\n\t\t\t\t\t//获取符合条件的跳转面板\r\n\t\t\t\t\tconst jumpTab = this.getAccordBundle(params.jumpTabList)\r\n\t\t\t\t\tif(jumpTab){//如果有符合的菜单跳转\r\n\t\t\t\t\t\tconst {jumpMobileTabId,relationTabId} = jumpTab\r\n\t\t\t\t\t\tparams.relationTabId = jumpMobileTabId || relationTabId\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst {static_elementId} = params.submitFormData\r\n\t\t\t\tif(static_elementId){\r\n\t\t\t\t\tparams.type = 'saveBtn'\r\n\t\t\t\t\tdelete params.submitFormData.id //多条新增删除对应的id字段\r\n\t\t\t\t}\r\n\t\t\t\tbtnsComs.click(params,this)\r\n\t\t\t},\r\n\t\t\tisEligible(preconditions){//是否符合条件\r\n\t\t\t\tif(!preconditions) return true //如果没有匹配条件默认符合\r\n\t\t\t\telse{\r\n\t\t\t\t\tconst paramFormatConfig = {\r\n\t\t\t\t\t\totherTabId:this.tabInfo.relationMainTab,\r\n\t\t\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\t\tbundleParams:this.tabInfo.bundleParams,\r\n\t\t\t\t\t\ttabsElements:this.tabsElements,\r\n\t\t\t\t\t\ttabsFormDatas:this.tabsFormDatas\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet preconditionsList = []\r\n\t\t\t\t\ttry{preconditionsList = JSON.parse(preconditions)}catch(e){preconditionsList = []}\r\n\t\t\t\t\tlet eligible = true\r\n\t\t\t\t\tfor(let i = 0,len=preconditionsList.length;i<len;i++){\r\n\t\t\t\t\t\tconst preconditionObj = preconditionsList[i],\r\n\t\t\t\t\t\t\t    {key,cond,value:passK} = preconditionObj\r\n\t\t\t\t\t\t//获取匹配条件中变量的值\t\t\t\r\n\t\t\t\t\t\tlet keyValue = this.Static_GlobalFucs.Global_ParamFormat({...{key},...paramFormatConfig},this),\r\n\t\t\t\t\t\t\t\tpassKVaule = this.Static_GlobalFucs.Global_ParamFormat({...{key:passK},...paramFormatConfig},this)\r\n\t\t\t\t\t\tkeyValue = `${keyValue.id}`\r\n\t\t\t\t\t\tpassKVaule = `${passKVaule.id}`\r\n\t\t\t\t\t\tconst conditionType = TRIGGER_Conditions.find(item => item.name === cond)\t\r\n\t\t\t\t\t\t//只有其中一个匹配条件不符合就跳出匹配，且返回false\r\n\t\t\t\t\t\tif(!TRIGGRT_ConditionFnc(conditionType,passKVaule,keyValue)){\r\n\t\t\t\t\t\t\teligible = false\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn eligible\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetAccordBundle(jumpList=[]){//从跳转菜单列表中获取符合条件的菜单\r\n\t\t\t\tlet jumpThing = ''\r\n\t\t\t\tfor(let i = 0,len=jumpList.length;i<len;i++){\r\n\t\t\t\t\tconst jumpThingMap = jumpList[i] || {}\r\n\t\t\t\t\tif(this.isEligible(jumpThingMap.preconditions)){//如果符合条件，则跳出返回符合条件的跳转菜单\r\n\t\t\t\t\t\tjumpThing = {...jumpThingMap}\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn jumpThing\r\n\t\t\t},\r\n\t\t\tloading(param){\r\n\t\t\t\tthis.btnDisable = param || false\r\n\t\t\t},\r\n\t\t\tbtnBack(elementFormat){\r\n\t\t\t\tthis.btnDisable = false\r\n\t\t\t\tif(elementFormat === 2){//刷新上一个面板\r\n\t\t\t\t\tbus.$emit(this.tabInfo.parentKey,this.tabInfo.refreshParams)\r\n\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t}else if(elementFormat === 1){//刷新本页面\r\n\t\t\t\t\tbus.$emit(this.tabInfo.selfKey,this.tabInfo.refreshParams)\r\n\t\t\t\t}else if(elementFormat === 3){//刷新框架\r\n\t\t\t\t\tlet framePageInfo = ELEMENT_BACKFRAME({frameUId:this.frameUId}),\r\n\t\t\t\t\t\tindex = framePageInfo.pageNum - (framePageInfo.pageIndex+1),\r\n\t\t\t\t\t\tkey = ''\r\n\t\t\t\t\tif(framePageInfo.templateType === 'form') key = `formReload${this.frameUId}`\r\n\t\t\t\t\telse key = `listReload${this.frameUId}`\r\n\t\t\t\t\tbus.$emit(key,this.tabInfo.refreshParams)\r\n\t\t\t\t\tuni.navigateBack({delta:index,animationType:'slide-out-right'})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbtnEvent(elementFormat,backParam={}){\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tif(backParam.tip) \r\n\t\t\t\t this.Static_GlobalFucs.showToast({\r\n\t\t\t\t\ttitle:backParam.tipContent,\r\n\t\t\t\t\tmask:true,\r\n\t\t\t\t\tcomplete(){\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tuni.hideToast()\r\n\t\t\t\t\t\t\t_this.btnBack(elementFormat)\r\n\t\t\t\t\t\t},600)\r\n\t\t\t\t\t}\r\n\t\t\t\t })\r\n\t\t\t\telse this.btnBack(elementFormat)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tlet workBundle = []\r\n\t\t\tfor(let key in this.workSpaceList){\r\n\t\t\t\tconst group = this.workSpaceList[key]\r\n\t\t\t\tworkBundle = [...workBundle,...group.list]\r\n\t\t\t}\r\n\t\t\tconsole.log(this.buttons)\r\n\t\t\tthis.bundlesList = [...this.bottomList,...workBundle]\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n"],"sourceRoot":""}