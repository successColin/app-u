{"version":3,"sources":["webpack:///D:/code/2.0app/components/plugin/uploadImgs/sunui-upimg-basic.vue?b6be","webpack:///D:/code/2.0app/components/plugin/uploadImgs/sunui-upimg-basic.vue?0fbb","webpack:///D:/code/2.0app/components/plugin/uploadImgs/sunui-upimg-basic.vue?fddd","webpack:///D:/code/2.0app/components/plugin/uploadImgs/sunui-upimg-basic.vue?ad84","uni-app:///components/plugin/uploadImgs/sunui-upimg-basic.vue","webpack:///D:/code/2.0app/components/plugin/uploadImgs/sunui-upimg-basic.vue?e70d"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,kWACIA,EADJ,sKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,qDACZ,aAAAF,E;;;;2GCvBf,ypC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,yBACtBP,EAAIQ,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLR,GAAIA,MAKRS,GAAmB,EACnBC,EAAkB,GACtBf,EAAOgB,eAAgB,G;;;;2DCjBvB,2vBAAosB,eAAG,G;;;;4OCkDvsB,sCAEA,GADA,gCACA,iB,4iCAEA,CACA,mBACA,OACA,YACA,YACA,QAFA,WAGA,WAGA,cACA,YACA,QAFA,WAGA,WAGA,OACA,YACA,wBAEA,iBACA,mBACA,2BACA,kCACA,wBACA,uBACA,2BACA,WACA,sBACA,WAEA,WACA,sBACA,WAEA,UACA,sBACA,WAEA,kBACA,gBAEA,KAzCA,WA0CA,OACA,gBACA,wBACA,qBACA,uBACA,qBACA,gCACA,gCACA,8BACA,oBAGA,eACA,gDADA,CAEA,YAFA,WAGA,OAEA,aACA,+DAGA,QAEA,SAEA,QAEA,iBAEA,YAEA,iBAEA,sBAEA,0BAEA,4CAEA,kBAEA,cAEA,aAEA,gBAEA,eAEA,gBAEA,2CAGA,QAhGA,WAkGA,sBACA,IACA,gBACA,UAGA,kBADA,uBACA,SAEA,MAEA,QACA,uEAGA,4BAEA,OACA,iBADA,WAEA,4BAEA,oBAJA,SAIA,KACA,kCACA,yBACA,uBACA,yBACA,aAIA,cACA,uDADA,IAEA,mDAFA,CAGA,oBAHA,WAIA,qCACA,OACA,oBACA,gDACA,aACA,0DAEA,mBACA,uBACA,WAGA,gBAhBA,SAgBA,GACA,4BAEA,YAnBA,SAmBA,GACA,sCAEA,YAtBA,SAsBA,GACA,WAEA,UAzBA,SAyBA,GACA,WAEA,WA5BA,SA4BA,GACA,WAEA,YA/BA,SA+BA,GACA,c,YAMA,sBACA,OACA,aACA,uBAEA,QACA,cACA,wBACA,oBACA,iBAEA,eACA,oEACA,2BACA,2EACA,YAEA,qEACA,UADA,aACA,8DAEA,yIACA,qCACA,mCACA,yBACA,wBAEA,iDAEA,yCACA,2BACA,iCAVA,gBAcA,SAdA,uGAoBA,mBACA,qDACA,gDACA,kFAIA,gIACA,oBADA,uBAEA,uBAFA,6BAKA,yBALA,qDAQA,eARA,gCASA,2BACA,0BACA,sCACA,gCACA,0BACA,0BAEA,kBACA,wBACA,uBACA,uBACA,2BACA,YACA,0BAEA,sBAEA,+BA1BA,mGAiCA,6IACA,2BADA,mGAQA,sJACA,GACA,2BAGA,uBACA,OACA,eACA,eAGA,0BACA,+BAZA,SAaA,cACA,YACA,QACA,qCACA,eAEA,QAGA,wBACA,6CAEA,QAZA,SAYA,4HACA,kBADA,mBAEA,sBACA,UAHA,uBAIA,SACA,qBAEA,kBACA,gBAEA,wBACA,0BACA,gCACA,gCAEA,2BACA,2BAhBA,SAmBA,eAnBA,OAoBA,uBApBA,OAuBA,gBAvBA,8CA0BA,KAtCA,SAsCA,4HACA,eACA,sDAEA,yBACA,uBACA,uBACA,kBACA,KACA,oCATA,gDAnDA,OAaA,EAbA,OAiEA,sDACA,oJACA,eADA,YACA,KADA,gCAEA,EAFA,gBAEA,uBAFA,OAGA,gCAHA,OACA,IADA,iHAlEA,uGA2EA,+IACA,uCADA,qGAKA,gBACA,oCACA,aACA,wCACA,yCACA,oBACA,WACA,WAMA,wIACA,kDAEA,2BACA,gCACA,aALA,gCAMA,iCANA,kCASA,KATA,wBAWA,KACA,QACA,UAbA,UAeA,wBAfA,QAgBA,yBAhBA,QAmBA,kCACA,gCACA,4CArBA,oGAyBA,gBACA,gBACA,2DACA,4BAKA,uIAEA,IADA,KACA,2CACA,qCAEA,gBACA,oCACA,SAPA,qG;;;;2DCjbA,u0CAAyxC,eAAG,G","file":"components/plugin/uploadImgs/sunui-upimg-basic.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./sunui-upimg-basic.vue?vue&type=template&id=6c8a9c8f&scoped=true&name=sunui-upimg&\"\nvar renderjs\nimport script from \"./sunui-upimg-basic.vue?vue&type=script&lang=js&\"\nexport * from \"./sunui-upimg-basic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sunui-upimg-basic.vue?vue&type=style&index=0&id=6c8a9c8f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c8a9c8f\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/plugin/uploadImgs/sunui-upimg-basic.vue\"\nexport default component.exports","export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-basic.vue?vue&type=template&id=6c8a9c8f&scoped=true&name=sunui-upimg&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-upload-personal\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-basic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-basic.vue?vue&type=script&lang=js&\"","<template name='sunui-upimg'>\r\n\t<view class=\"upimg\" v-show=\"static_visiabled\" :class=\"[static_readonly?'readonly':'']\">\r\n\t\t<label v-if=\"!uploadType\" class=\"text\">\r\n\t\t\t{{ elementLable }}\r\n\t\t\t<span v-if=\"static_requisite\" class=\"icon iconfont iconmust-fill2 requisite\"></span>\r\n\t\t</label>\r\n\t\t\t<!-- 个人资质样式 -->\r\n\t\t\t<view class=\"qualification-upload-content\" v-if=\"uploadType == 'qualiflcation'\">\r\n\t\t\t\t<view class=\"upload-item\" @click='chooseImage(upImgConfig.count)' v-show=\"upload_picture_list.length<upImgConfig.count || upImgConfig.notli\" >\r\n\t\t\t\t\t<m-font-icon icon=\"iconpaizhaozhaoxiangji\" color=\"#D9D9D9\" :iconSize=\"90\"></m-font-icon>\r\n\t\t\t\t\t<view>{{ $i18nMsg('lang-upload-personal') }}</view> <!-- 中文：上传个人资质 -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 头像上传 -->\r\n\t\t\t<view v-if=\"uploadType == 'touxiang'\" class=\"userinfo-upload\" @click='chooseImage(1)'>\r\n\t\t\t\t<image :src=\"defaultpicpath\" mode=\"aspectFill\" ref=\"uImage\"></image>\r\n\t\t\t</view>\r\n\t\t<scroll-view v-if=\"uploadType != 'touxiang'\" scroll-x :class=\"uploadType == 'qualiflcation'?'noscroll':''\">\r\n\t\t\t<view class=\"sunsin_picture_list\" :class=\"uploadType == 'qualiflcation'?'sunsin_picture_list_qualification':''\">\r\n\t\t\t<!-- 默认样式 -->\r\n\t\t\t<view v-if=\"uploadType != 'qualiflcation' && !static_readonly\" >\r\n\t\t\t\t<view class='sunsin_picture_item sunsin_width' v-show=\"upload_picture_list.length<upImgConfig.count || upImgConfig.notli\"\r\n\t\t\t\t v-if=\"upImgConfig.iconReplace =='' || upImgConfig.iconReplace==undefined\">\r\n\t\t\t\t\t<view class=\"sunsin_add_image sunsin_width\" style=\"background-image: url(../../static/images/upload.png);\" @click='chooseImage(upImgConfig.count)'\r\n\t\t\t\t\t v-show=\"upImgConfig.isAddImage || true\" ></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class='sunsin_picture_item sunsin_width' v-show=\"upload_picture_list.length<upImgConfig.count || upImgConfig.notli\"\r\n\t\t\t\t v-else>\r\n\t\t\t\t\t<view class=\"sunsin_add_image sunsin_width\" style=\"background-image: url(../../static/images/upload.png);\" @click='chooseImage(upImgConfig.count)' \r\n\t\t\t\t\t v-show=\"upImgConfig.isAddImage || true\" v-if=\"!static_readonly\">\r\n\t\t\t\t\t\t<!-- <image src=\"../../static/images/upload.png\" class=\"icon_replace\"></image> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-for=\"(item,index) in upload_picture_list\" :key=\"index\" class=\"sunsin_picture_item\">\r\n\t\t\t\t<image v-show=\"item.upload_percent < 100\" class=\"sunsin_width\" :src=\"item.path\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<image v-show=\"item.upload_percent == 100\" class=\"sunsin_width\" :data-src=\"item.url\" :src=\"item.url\"\r\n\t\t\t\t mode=\"aspectFill\" :data-idx=\"index\" @click=\"previewImgs\"></image>\r\n\t\t\t\t<view class=\"sunsin_upload_progress sunsin_width\" v-show=\"item.upload_percent < 100\" :data-index=\"index\" @click=\"previewImg\">{{item.upload_percent}}%</view>\r\n\t\t\t\t<text class='del iconfont icon-shanchu' :class=\"upImgConfig.delBtnLocation=='left'?'left':upImgConfig.delBtnLocation=='right'?'right':upImgConfig.delBtnLocation=='bleft'?'bleft':upImgConfig.delBtnLocation=='bright'?'bright':'right'\"\r\n\t\t\t\t @click='deleteImg' :data-url=\"item.url\" :data-index=\"index\" :style=\"'color:'+upImgConfig.delIconText+';background-color:'+upImgConfig.delIconColor\"\r\n\t\t\t\t :hidden=\"upImgConfig.isDelIcon || false\" v-if=\"!static_readonly\">×</text>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {fileApi} from '@/common/request/api.js'\r\n\timport state from \"@/store/state.js\"\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\t\r\n\texport default {\r\n\t\tname: 'sunui-upimg',\r\n\t\tprops: {\r\n\t\t\tupImgBasic: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault() {\r\n\t\t\t\t  return {}\r\n\t\t\t   }\r\n\t\t\t},\r\n\t\t\tgetPicParams: { //请求图片时额外参数\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault() {\r\n\t\t\t\t  return {}\r\n\t\t\t   }\r\n\t\t\t},\r\n\t\t\tlabel: {//文本框title\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"elementLable\"\r\n\t\t\t},\r\n\t\t\telementId:Number,\r\n\t\t\tmobileTabId:Number,\r\n\t\t\trelationId:[String,Number],\r\n\t\t\trelationTableName:[String,Number],\r\n\t\t\tstateId:[String,Number],\r\n\t\t\ttypeId:[String,Number],\r\n\t\t\tpriorityId:[String,Number],\r\n\t\t\tvisiabled:{\r\n\t\t\t\ttype:[Number,Boolean],\r\n\t\t\t\tdefault: 1\r\n\t\t\t},//是否显示\r\n\t\t\trequisite:{\r\n\t\t\t\ttype:[Number,Boolean],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},//是否必填\r\n\t\t\tdisabled: {\r\n\t\t\t\ttype:[Number,Boolean],\r\n\t\t\t\tdefault: 0\r\n\t\t\t},//是否便捷\r\n\t\t\tuploadType:String,\r\n\t\t\tpicpath:String,//头像路径\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\telementValue:\"\",\r\n\t\t\t\telementLable:this.label,\r\n\t\t\t\tupload_after_list: [],\r\n\t\t\t\tupload_picture_list: [],\r\n\t\t\t\tupload_ready_list: [],//准备上传的图片\r\n\t\t\t\tstatic_visiabled:this.visiabled,\r\n\t\t\t\tstatic_requisite:this.requisite,\r\n\t\t\t\tstatic_readonly:this.disabled,\r\n\t\t\t\tdefaultpicpath:'',\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"baseUrl\",\"defaultUrl\",\"token\"]),\r\n\t\t\tupImgConfig() {\r\n\t\t\t\tconst basicImgConfig = {\r\n\t\t\t\t\t// 后端图片接口地址\r\n\t\t\t\t\tbasicConfig: {\r\n\t\t\t\t\t\turl: 'https://p.dns06.net.cn/index.php?m=Api&c=index&a=upload'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 是否开启提示(提醒上传图片的数量)\r\n\t\t\t\t\ttips: true,\r\n\t\t\t\t\t// 是否开启notli(开启的话就是选择完直接上传，关闭的话当count满足数量时才上传)\r\n\t\t\t\t\tnotli: false,\r\n\t\t\t\t\t// 图片数量\r\n\t\t\t\t\tcount: 9,\r\n\t\t\t\t\t// 相机来源(相机->camera,相册->album,两者都有->all,默认all)\r\n\t\t\t\t\tsourceType: 'all',\r\n\t\t\t\t\t// 是否压缩上传照片(仅小程序生效)\r\n\t\t\t\t\tsizeType: true,\r\n\t\t\t\t\t// 上传图片背景修改 \r\n\t\t\t\t\tupBgColor: '#fff',\r\n\t\t\t\t\t// 上传icon图标颜色修改(仅限于iconfont)\r\n\t\t\t\t\tupIconColor: '#D9D9D9',\r\n\t\t\t\t\t// 上传svg图标名称\r\n\t\t\t\t\tupSvgIconName: 'icon-card',\r\n\t\t\t\t\t// 上传文字描述(仅限四个字)\r\n\t\t\t\t\tupTextDesc: this.$i18nMsg('lang-upload-img'), // 中文：上传图片\r\n\t\t\t\t\t// 删除按钮位置(left,right,bleft,bright),默认右上角\r\n\t\t\t\t\tdelBtnLocation: '',\r\n\t\t\t\t\t// 是否隐藏添加图片\r\n\t\t\t\t\tisAddImage: false,\r\n\t\t\t\t\t// 是否隐藏删除图标\r\n\t\t\t\t\tisDelIcon: false,\r\n\t\t\t\t\t// 删除图标定义背景颜色\r\n\t\t\t\t\tdelIconColor: '',\r\n\t\t\t\t\t// 删除图标字体颜色\r\n\t\t\t\t\tdelIconText: '',\r\n\t\t\t\t\t// 上传图标替换(+),是个http,https图片地址(https://www.playsort.cn/right.png)\r\n\t\t\t\t\ticonReplace: ''\r\n\t\t\t\t}\r\n\t\t\t\treturn Object.assign(basicImgConfig,this.upImgBasic)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//设置默认值\r\n\t\t\tlet value = this.relationId\r\n\t\t\ttry{//有起始值的转化成json\r\n\t\t\t\tvalue = JSON.parse(value)\r\n\t\t\t}catch(e){}\r\n\t\t\t\r\n\t\t\tif(value && typeof value === \"object\"){\r\n\t\t\t\tthis.elementValue = value.id || \"\"\r\n\t\t\t}else{\r\n\t\t\t\tthis.elementValue = value || \"\"\r\n\t\t\t}\r\n\t\t\tgImage(this)//获取图片\r\n\t\t\tif(this.picpath) this.defaultpicpath = this.picpath.replace(/[\\r\\n]/g, \"\");\r\n\t\t\t\r\n\t\t\t//设置校验规则\r\n\t\t\tthis.setVerificationRule()\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tstatic_requisite(){//是否必填\r\n\t\t\t\tthis.setVerificationRule()\r\n\t\t\t},\r\n\t\t\tupload_picture_list(newVal, oldVal){//图片值\r\n\t\t\t\tif(!this.mobileTabId || !this.elementId) return \r\n\t\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\t\ttabId:this.mobileTabId,\r\n\t\t\t\t\telementId:this.elementId,\r\n\t\t\t\t\tparams:newVal\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(\"verificationRule\",[\"SET_TAB_RULE\"]),\r\n\t\t\t...mapMutations(\"common\",[\"SET_TABS_FORMDATAS\"]),\r\n\t\t\tsetVerificationRule(){//设置验证规则\r\n\t\t\t\tif(!this.mobileTabId || !this.elementId) return \r\n\t\t\t\tconst rule = {\r\n\t\t\t\t\tname:this.elementId,\r\n\t\t\t\t\tcheckType : this.static_requisite ? \"imgnotnull\" :\"\", \r\n\t\t\t\t\tcheckRule:\"\",  \r\n\t\t\t\t\terrorMsg: this.elementLable + this.$i18nMsg('lang-notNull'), // 中文：不能为空\r\n\t\t\t\t}\r\n\t\t\t\tthis.SET_TAB_RULE({\r\n\t\t\t\t\ttabId:this.mobileTabId,\r\n\t\t\t\t\trule:rule\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitServerImage(e) {\r\n\t\t\t\tthis.upload_picture_list = e;\r\n\t\t\t},\r\n\t\t\tchooseImage(count) {\r\n\t\t\t\tcImage(this, parseInt(count), this.upImgConfig);\r\n\t\t\t},\r\n\t\t\tuploadimage(e) {\r\n\t\t\t\tuImage(this, e);\r\n\t\t\t},\r\n\t\t\tdeleteImg(e) {\r\n\t\t\t\tdImage(e, this);\r\n\t\t\t},\r\n\t\t\tpreviewImg(e) {\r\n\t\t\t\tpImage(e, this);\r\n\t\t\t},\r\n\t\t\tpreviewImgs(e) {\r\n\t\t\t\tpuImage(e, this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// 选择图片(通用)\r\n\tconst cImage = (_this, count, configs) => {\r\n\t\tlet config = {\r\n\t\t\tbasicConfig: {\r\n\t\t\t\turl: configs.basicConfig.url\r\n\t\t\t},\r\n\t\t\tcount,\r\n\t\t\tnotli: configs.notli,\r\n\t\t\tsourceType: configs.sourceType,\r\n\t\t\tsizeType: configs.sizeType,\r\n\t\t\ttips: configs.tips || false\r\n\t\t}\r\n\t\tuni.chooseImage({\r\n\t\t\tcount: config.notli ? config.count : _this.upload_after_list.length == 0 ? config.count : config.count -\r\n\t\t\t\t_this.upload_after_list.length,\r\n\t\t\tsizeType: config.sizeType == \"\" || config.sizeType == undefined || config.sizeType == true ? ['compressed'] : [\r\n\t\t\t\t'original'\r\n\t\t\t],\r\n\t\t\tsourceType: config.sourceType == \"\" || config.sourceType == undefined ? ['album', 'camera'] : config.sourceType ==\r\n\t\t\t\t'camera' ? ['camera'] : config.sourceType == 'album' ? ['album'] : ['album', 'camera'],\r\n\t\t\t\t\r\n\t\t\tsuccess: async (res) => {\r\n\t\t\t\tfor (let i = 0, len = res.tempFiles.length; i < len; i++) {\r\n\t\t\t\t\tres.tempFiles[i]['upload_percent'] = 0;\r\n\t\t\t\t\tres.tempFiles[i]['url'] = '';\r\n\t\t\t\t\tres.tempFiles[i]['id'] = '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet totalLength = _this.upload_picture_list.length + _this.upload_ready_list\r\n\t\t\t\t\t\r\n\t\t\t\t\t_this.upload_ready_list.push(res.tempFiles[i]);\r\n\t\t\t\t\tif(_this.uploadType == 'touxiang'){\r\n\t\t\t\t\t\t_this.defaultpicpath = res.tempFiles[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 过滤多出的预览图片\r\n\t\t\t\tawait fImage(_this, res, config);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 过滤超出的预览图片以及上传(通用)\r\n\tconst fImage = (_this, res, config) => {\r\n\t\t!config.notli && config.count == _this.upload_ready_list.length ? uImage(_this, config) : '';\r\n\t\tconfig.notli &&  _this.upload_ready_list.length !== 0 ? uImage(_this, config) : '';\r\n\t\t_this.upload_after_list = _this.upload_after_list.concat(res.tempFilePaths).slice(0, config.count);\r\n\t}\r\n\t\r\n\t//获取文件\r\n\tconst gImage = async (_this, config) => {\r\n\t\tif(!_this.relationTableName){\r\n\t\t\tconsole.error(\"没有关联表\")\r\n\t\t\treturn \r\n\t\t}\r\n\t\tif(_this.uploadType == 'feedback'){//意见反馈不获取图片\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(_this.elementValue){\r\n\t\t\tawait fileApi.getRelationFile({\r\n\t\t\t\trelationId:_this.elementValue,\r\n\t\t\t\trelationTableName:_this.relationTableName,\r\n\t\t\t\trelationpriorityId:_this.priorityId,\r\n\t\t\t\trelationStateId:_this.stateId,\r\n\t\t\t\trelationTypeId:_this.typeId\r\n\t\t\t})\r\n\t\t\t.then(pics => {\r\n\t\t\t\t_this.upload_picture_list = pics\r\n\t\t\t\t_this.upload_ready_list = []\r\n\t\t\t\t_this.upload_after_list = []\r\n\t\t\t\tif(_this.uploadType == 'touxiang'){\r\n\t\t\t\t\tif(pics.length>0){\r\n\t\t\t\t\t\t_this.defaultpicpath = pics[0].url;\r\n\t\t\t\t\t\t//_this.$emit('onUpImg', pics);\r\n\t\t\t\t\t\t_this.$emit('isExist', pics);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.defaultpicpath = _this.picpath;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// 上传文件\r\n\tconst uImage = async (_this, config) => {\r\n\t\tawait upload_file_server(_this, config, _this.upload_ready_list)\r\n\t\t// for (let j = 0, len = _this.upload_picture_list.length; j < len; j++) {\r\n\t\t// \tif (_this.upload_picture_list[j]['upload_percent'] == 0) {\r\n\t\t// \t\tawait upload_file_server(_this, config, _this.upload_picture_list, j)\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n\tconst upload_file_server = async (_this, configs, upload_ready_list, j) => {//将没有上传的图片批量上传\r\n\t\tlet basicConfig = {\r\n\t\t\turl: configs.basicConfig.url || \"\"\r\n\t\t}\r\n\t\t\r\n\t\tlet imgs = upload_ready_list.map((value, index) => {//转化可上传数据\r\n\t\t    return {\r\n\t\t            name: \"files\"+index, \r\n\t\t            uri: value.path\r\n\t\t        }\r\n\t\t})\r\n\t\tlet baseUrl = _this.baseUrl || _this.defaultUrl;\r\n\t\tconst upload_picture_list_length = _this.upload_picture_list.length\r\n\t\tconst upload_task = await uni.uploadFile({//开始上传\r\n\t\t\turl: baseUrl + basicConfig.url,\r\n\t\t\theader: {\r\n\t\t\t\t'content-type': 'multipart/form-data',\r\n\t\t\t\t'token':_this.token\r\n\t\t\t},\r\n\t\t\tfiles:imgs,\r\n\t\t\t// filePath: upload_picture_list[j]['path'],\r\n\t\t\t// name: 'files',\r\n\t\t\tformData: EncryptionPSW({\r\n\t\t\t\t'tableName': _this.relationTableName || \"workorder\"\r\n\t\t\t}),\r\n\t\t\tasync success(res) {\r\n\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\tlet result = JSON.parse(res.data);\r\n\t\t\t\t\tif(result.success){\r\n\t\t\t\t\t\tconst imags = result.data\r\n\t\t\t\t\t\timags.map( (item, index) => {\r\n\t\t\t\t\t\t\t//保存成功后将地址和id存入upload_picture_list中\r\n\t\t\t\t\t\t\tupload_ready_list[index]['url'] = item.url\r\n\t\t\t\t\t\t\tupload_ready_list[index]['id'] = item.id\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tupload_ready_list[index]['typeId'] = _this.typeId\r\n\t\t\t\t\t\t\tupload_ready_list[index]['stateId'] = _this.stateId\r\n\t\t\t\t\t\t\tupload_ready_list[index]['priorityId'] = _this.priorityId\r\n\t\t\t\t\t\t\t_this.upload_picture_list[upload_picture_list_length+index] = upload_ready_list[index]\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(_this.uploadType == 'touxiang'){\r\n\t\t\t\t\t\t\t\t_this.defaultpicpath = item.url;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tawait tImage(_this, upload_ready_list, configs.count);\r\n\t\t\t\t\t\t_this.upload_ready_list = []//清空可以上传的图片\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync fail(err) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: this.$i18nMsg('lang-myself-PictureUploadFailed') //中文：`上传失败!`\r\n\t\t\t\t});\r\n\t\t\t\t_this.upload_picture_list = [];\r\n\t\t\t\t_this.upload_after_list = [];\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}, 2000)\r\n\t\t\t\tconsole.warn(err, '请检查是否CORB/CORS错误!')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//上传进度\r\n\t\t_this.upload_picture_list = _this.upload_picture_list.concat(upload_ready_list)//将上传的图片添加到已上传的图片中展示\r\n\t\tupload_task.onProgressUpdate(async (res) => {\r\n\t\t\tfor (let i = 0, len = upload_ready_list.length; i < len; i++) {\r\n\t\t\t\tupload_ready_list[i]['upload_percent'] = await res.progress;\r\n\t\t\t\t_this.upload_picture_list[upload_picture_list_length+i] = upload_ready_list[i]\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 上传图片子组件->父组件(通用)\r\n\tconst tImage = async (_this, upload_ready_list, count) => {\r\n\t\tawait _this.$emit('onUpImg', _this.upload_ready_list);\r\n\t}\r\n\r\n\t// 删除图片(通用)\r\n\tconst dImage = (e, _this) => {\r\n\t\tconst index = e.currentTarget.dataset.index\r\n\t\tuni.showModal({\r\n\t\t\ttitle:_this.$i18nMsg(\"lang-form-modalTips\"),\r\n\t\t\tcontent:_this.$i18nMsg(\"lang-form-modalDel\"),\r\n\t\t\tsuccess: function (res) {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tdImageView(_this, index)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n\tconst dImageView = async (_this, index) =>{//删除节点\r\n\t\tconsole.log(\"dImageView========================\")\r\n\t\t\r\n\t\tconst imag = _this.upload_picture_list[index]//图片信息\r\n\t\tconsole.log(JSON.stringify(imag))\r\n\t\tif(imag.relationId) {//如果存在业务id需要删除业务关系\r\n\t\t\tawait fileApi.filesRelationDel(imag.id)\r\n\t\t}else{\r\n\t\t\t//没有业务关系时分图片是否已经上传至文件服务器\r\n\t\t\tif(imag.id){\r\n\t\t\t\t\r\n\t\t\t\tlet params = []\r\n\t\t\t\tparams.push({\r\n\t\t\t\t\tid:imag.id\r\n\t\t\t\t})\r\n\t\t\t\tawait fileApi.fileDelete(params)\r\n\t\t\t\t_this.$emit('onImgDel', imag.id)\r\n\t\t\t}\r\n\t\t}\r\n\t\t_this.upload_picture_list.splice(index, 1);\r\n\t\t_this.upload_after_list.splice(index, 1);\r\n\t\t_this.upload_picture_list = _this.upload_picture_list;\r\n\t}\r\n\r\n\t// 上传前预览图片(通用)\r\n\tconst pImage = (e, _this) => {\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: _this.upload_after_list[e.currentTarget.dataset.index],\r\n\t\t\turls: _this.upload_after_list\r\n\t\t})\r\n\t}\r\n\r\n\t// 上传后预览(通用)\r\n\tconst puImage = async (e, _this) => {\r\n\t\tlet prevImgArr = [];\r\n\t\tfor (let i = 0, len = _this.upload_picture_list.length; i < len; i++) {\r\n\t\t\tprevImgArr.push(_this.upload_picture_list[i].url);\r\n\t\t}\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: e.currentTarget.dataset.src,\r\n\t\t\turls: prevImgArr\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import \"@/static/scss/common/_function.scss\";\r\n\t.icon-text {\r\n\t\tfont-size: .2em;\r\n\t}\r\n\r\n\t/* 宽度 */\r\n\t.sunsin_width {\r\n\t\twidth: 150upx !important;\r\n\t\theight: 150upx !important;\r\n\t\t/* line-height: 150upx !important; */\r\n\t}\r\n\r\n\t/* 循环列表样式 */\r\n\t.sunsin_picture_list {\r\n\t\twidth: 96%;\r\n\t\tpadding: 2% 0;\r\n\t\tdisplay: flex;\r\n\t\t/* flex-wrap: wrap; */\r\n\t\ttext-align: center;\r\n\t}\r\n\t.sunsin_picture_list.wrap{\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.sunsin_picture_list image {\r\n\t\twidth: 40upx;\r\n\t\theight: 40upx;\r\n\t\tmargin: 0 4%;\r\n\t}\r\n\t.sunsin_picture_list image.icon_replace {\r\n\t\twidth: 150upx;\r\n\t\theight: 150upx;\r\n\t}\r\n\r\n\t/* 添加图片样式 */\r\n\t.sunsin_add_image {\r\n\t\tcolor: #ddd;\r\n\t\tfont-size:24upx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 0 !important;\r\n\t\tcursor: pointer;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t\tborder:1px dashed rgba(217,217,217,1);\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position: center;\r\n\t\tbackground-size: 60%;\r\n\t}\r\n\r\n\t/* 预览图片 */\r\n\t.sunsin_picture_item {\r\n\t\tposition: relative;\r\n\t\tmargin-right: 30upx;\r\n\t}\r\n\r\n\t/* 删除按钮样式 */\r\n\t.sunsin_picture_item .del {\r\n\t\tposition: absolute;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: -4upx;\r\n\t\tborder-top-right-radius: 6upx;\r\n\t\twidth: 40upx;\r\n\t\theight: 40upx;\r\n\t\tline-height: 40upx;\r\n\t\tz-index: 2;\r\n\t\ttext-align: center;\r\n\t\tbackground-color: #808080;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t/* 删除图标位置(上左) */\r\n\t.sunsin_picture_item .del.left {\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tmargin-left: 4%;\r\n\t\tborder-top-right-radius: 0;\r\n\t\tborder-top-left-radius: 6upx;\r\n\t}\r\n\r\n\t/* 删除图标位置(上右) */\r\n\t.sunsin_picture_item .del.right {\r\n\t\ttop: 0;\r\n\t\tright: -4.2%;\r\n\t}\r\n\r\n\t/* 删除图标位置(下左) */\r\n\t.sunsin_picture_item .del.bleft {\r\n\t\tbottom: 0;\r\n\t\tleft: 4%;\r\n\t\tborder-top-left-radius: 0;\r\n\t\tborder-bottom-left-radius: 6upx;\r\n\t}\r\n\r\n\t/* 删除图标位置(下右) */\r\n\t.sunsin_picture_item .del.bright {\r\n\t\tright: -4.2%;\r\n\t\tbottom: 0;\r\n\t\tborder-top-right-radius: 0;\r\n\t}\r\n\r\n\t/* 进度遮罩层样式 */\r\n\t.sunsin_upload_progress {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 24upx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 160upx;\r\n\t\tmargin-left: 4%;\r\n\t\tborder-radius: 8upx;\r\n\t\tbackground-color: rgba(0, 0, 0, .7);\r\n\t}\r\n\r\n\t/* 自定义添加图片样式 */\r\n\t.sunsin_picture_item image {\r\n\t\tbox-shadow: 6upx 6upx 12upx rgba(112, 128, 144, 0.7);\r\n\t\tborder-radius: 15upx;\r\n\t}\r\n\t\r\n\t/* 个人资质上传图片样式 */\r\n\t// .qualification-upload-content{\r\n\t// \tpadding: pxToREM(30) ;\r\n\t// \tbackground: #fff;\r\n\t// \twidth: 100%;\r\n\t// }\r\n\t.upload-item{\r\n\t\twidth: 100%;\r\n\t\theight: pxToREM(345);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t    align-items: center;\r\n\t\tflex-direction: column;\r\n\t\tbackground: #FAFAFA;\r\n\t\tborder-radius:pxToREM(12);\r\n\t\tcolor: #D9D9D9;\r\n\t\tfont-size: pxToREM(28);\r\n\t\tline-height: pxToREM(90);\r\n\t}\r\n\t.sunsin_picture_list_qualification{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content:flex-start;\r\n\t\tmargin-top: pxToREM(25);\r\n\t\twidth:100%;\r\n\t\tflex-wrap: wrap;\r\n\t\tborder: none;\r\n\t}\r\n\t.sunsin_picture_list_qualification>view{\r\n\t\tflex-grow:0;\r\n\t\twidth: 30%;\r\n\t\theight: pxToREM(214);\r\n\t\tmargin: 5px 1.5%;\r\n\t}\r\n\t.sunsin_picture_list_qualification>view>image.sunsin_width,.sunsin_picture_list_qualification>view>view.sunsin_width{\r\n\t\twidth: 100% !important;\r\n\t\theight: 100% !important;\r\n\t\tmargin: 0;\r\n\t}\r\n\t.sunsin_picture_list_qualification .del.right{\r\n\t\tright: 0;\r\n\t}\r\n\t.noscroll{\r\n\t\toverflow-x: hidden;\r\n\t}\r\n\t.userinfo-upload{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.userinfo-upload image{\r\n\t\twidth: pxToREM(110);\r\n\t\theight: pxToREM(110);\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-basic.vue?vue&type=style&index=0&id=6c8a9c8f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sunui-upimg-basic.vue?vue&type=style&index=0&id=6c8a9c8f&lang=scss&scoped=true&\""],"sourceRoot":""}