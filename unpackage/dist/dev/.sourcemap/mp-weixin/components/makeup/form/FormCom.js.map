{"version":3,"sources":["webpack:///D:/code/2.0app/components/makeup/form/FormCom.vue?ed9e","webpack:///D:/code/2.0app/components/makeup/form/FormCom.vue?f63f","webpack:///D:/code/2.0app/components/makeup/form/FormCom.vue?b722","webpack:///D:/code/2.0app/components/makeup/form/FormCom.vue?67bb","uni-app:///components/makeup/form/FormCom.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m13","_self","_c","pxToREM","l0","__map","currentElements","element","index","g0","showElementType","indexOf","baseType","m0","showElement","f0","_f","currentFormData","m1","f1","m2","f2","m3","f3","m4","f4","m5","f5","m6","f6","m7","dataFormat","f7","f8","m8","m9","f9","m10","imageConfig","m11","requestConfig","m12","f10","m14","f11","m15","f12","f13","currentConditions","$orig","__get_orig","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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BAkBA,4CACA,8C,+2KACA,K,EACA,CACA,YACA,gDACA,yDACA,gDACA,mDAEA,OACA,kCACA,oEACA,uDACA,YACA,YACA,QAFA,WAGA,OACA,YACA,mBACA,qBACA,uBACA,oBACA,gBAEA,kBAIA,iBACA,WACA,mBACA,4DAIA,eACA,iFADA,IAEA,yDAFA,IAGA,kDAHA,CAIA,mBAJA,WAIA,qCACA,iBALA,WAMA,2DACA,KAGA,OAFA,qEACA,uDACA,GAEA,WAZA,WAaA,0CAEA,YAfA,WAgBA,kFACA,OACA,cACA,UACA,4BAKA,cAzBA,WA0BA,kFACA,qBACA,KAQA,OAPA,oBACA,0BAEA,iDAGA,6CACA,CACA,YACA,cACA,aACA,0CACA,sCACA,gCACA,0BACA,wBACA,gBAMA,KApFA,WAqFA,OACA,mBACA,mBACA,iBACA,uBACA,sBACA,qBACA,aAGA,SACA,UADA,SACA,oEACA,2BACA,WACA,8BACA,WAKA,IAJA,SADA,EAEA,EAFA,IAEA,UAFA,MAEA,GAFA,MAEA,YAFA,MAEA,GAFA,EAGA,+BACA,eACA,wBACA,SACA,qBACA,QACA,WACA,UAGA,SAOA,OALA,uCACA,YACA,iCAEA,gEACA,IAIA,cACA,6DADA,IAEA,uIAFA,IAGA,uEAHA,IAIA,sDAJA,IAKA,8CALA,CAMA,eANA,WAMA,+DACA,2BACA,8BACA,OACA,8BACA,qCACA,yCAEA,4EACA,sDAEA,iBAjBA,WAkBA,6BACA,cACA,UACA,sEAGA,WAxBA,SAwBA,4HACA,oCADA,8CAGA,YA3BA,SA2BA,0IAMA,IALA,EACA,eACA,gBAEA,GACA,uBACA,IACA,cACA,UACA,cACA,wBACA,0BACA,kCAGA,SACA,uBAjBA,8CAqBA,YAhDA,SAgDA,OAEA,OADA,sBACA,wDAMA,iBAxDA,SAwDA,OACA,oEAEA,8BACA,8BAJA,MAOA,aADA,EANA,EAMA,kBANA,EAMA,cANA,EAMA,UANA,EAMA,aACA,EAPA,EAOA,WAPA,EAOA,WACA,GACA,2FACA,aACA,gCAEA,KACA,CAKA,IAJA,SADA,EAEA,EAFA,IAEA,UAFA,MAEA,GAFA,MAEA,YAFA,MAEA,GAFA,EAGA,+BACA,eACA,wBACA,SACA,qBACA,QACA,WACA,UAGA,YACA,qBAfA,qCAiBA,6BACA,CACA,8CACA,qBACA,oBACA,4CAEA,sCAGA,WAhGA,SAgGA,GACA,yDACA,qDACA,WACA,GACA,6CACA,qCACA,sBACA,mBAEA,MACA,kCACA,wBAEA,oCAGA,WAjHA,WAiHA,yGAEA,yBACA,6CACA,wEAKA,OAJA,2BACA,uCACA,8DACA,+BAGA,4CACA,4CAEA,oCACA,yBACA,wDACA,0EACA,4CACA,4BACA,CACA,WACA,4BAEA,oDACA,oDACA,2BACA,uCAEA,gCAEA,iBAhJA,SAgJA,GACA,aACA,gCACA,kGACA,wBACA,2BACA,QACA,kBACA,+DACA,0CAGA,MA5JA,SA4JA,KACA,8BACA,kCAIA,OAFA,mBACA,uCACA,MACA,mCACA,MACA,0CADA,GAKA,uBAzKA,SAyKA,GACA,sBACA,6BAEA,GACA,qCACA,+BACA,sCACA,6BACA,uCACA,wBAEA,wCAIA,kBAzLA,SAyLA,kKACA,wBADA,uBAEA,2DAFA,6BAKA,2BALA,uBAMA,uGANA,6BAQA,yBARA,wBASA,qGATA,8BAaA,6CACA,0EACA,0BAfA,wBAgBA,6BAhBA,8BAmBA,oBACA,KACA,OACA,oBAtBA,EAuBA,YAvBA,EAuBA,gBAvBA,EAuBA,iBAvBA,EAuBA,WAvBA,EAuBA,UACA,gBAxBA,wBAyBA,UACA,EA1BA,UA0BA,EA1BA,YA0BA,SACA,eA3BA,UA4BA,mCACA,WACA,aACA,qBACA,OACA,SAEA,KACA,CACA,cACA,mBACA,aACA,oBAEA,yCAPA,0BASA,OA5CA,QA8CA,OA9CA,wBA+CA,YACA,cAEA,WAEA,2DACA,QArDA,QAuDA,sBACA,4BACA,aAGA,GACA,YACA,8BACA,0CACA,kCACA,4BACA,gDACA,kCACA,gEACA,oEACA,8DACA,gEACA,WACA,gCACA,mBACA,qCACA,iBACA,uBAEA,qEACA,wDAEA,eACA,4BACA,6BACA,+BACA,qCAEA,sBACA,4BACA,sBAEA,oBACA,4BACA,iCAEA,2CACA,sCAEA,iBACA,4BACA,gBAEA,gCAvGA,iDA2GA,QAhaA,WAgaA,WACA,qGACA,4CACA,gEAEA,OACA,qFACA,6CACA,qCACA,+CAEA,yBACA,oDACA,gBACA,+DACA,OACA,2DACA,OACA,oBACA,YACA,gBAMA,sDACA,6BAEA,KACA,wBAFA,IAIA,uBACA,mDACA,2BAGA,cArcA,WAucA,sDACA,oB","file":"components/makeup/form/FormCom.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./FormCom.vue?vue&type=template&id=3e13ec0d&name=mForm&\"\nvar renderjs\nimport script from \"./FormCom.vue?vue&type=script&lang=js&\"\nexport * from \"./FormCom.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/makeup/form/FormCom.vue\"\nexport default component.exports","export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormCom.vue?vue&type=template&id=3e13ec0d&name=mForm&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m13 = _vm.pxToREM(48)\n\n  var l0 = _vm.__map(_vm.currentElements, function(element, index) {\n    var g0 = _vm.showElementType.indexOf(element.baseType)\n    var m0 = _vm.showElement(element.baseType, [17])\n\n    var f0 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m1 = _vm.showElement(element.baseType, [1])\n\n    var f1 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m2 = _vm.showElement(element.baseType, [10])\n\n    var f2 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m3 = _vm.showElement(element.baseType, [3, 12, 25])\n\n    var f3 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m4 = _vm.showElement(element.baseType, [2, 20, 21, 22])\n\n    var f4 = _vm._f(\"formValue\")(_vm.currentFormData, element, 1)\n\n    var m5 = _vm.showElement(element.baseType, [45])\n\n    var f5 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m6 = _vm.showElement(element.baseType, [15])\n\n    var f6 = _vm._f(\"formValue\")(_vm.currentFormData, element, 1)\n\n    var m7 = _vm.showElement(element.baseType, [9, 31], element.dataFormat)\n\n    var f7 = _vm._f(\"formValue\")(_vm.currentFormData, element, 3)\n\n    var f8 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m8 = _vm.showElement(element.baseType, [32])\n    var m9 = _vm.showElement(element.baseType, [8])\n\n    var f9 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m10 = _vm.imageConfig(element)\n    var m11 = _vm.requestConfig(element)\n    var m12 = _vm.showElement(element.baseType, [36])\n\n    var f10 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m14 = _vm.showElement(element.baseType, [46])\n\n    var f11 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var m15 = _vm.showElement(element.baseType, [39])\n\n    var f12 = _vm._f(\"formValue\")(_vm.currentFormData, element)\n\n    var f13 = _vm._f(\"formValue\")(_vm.currentConditions, element)\n\n    return {\n      $orig: _vm.__get_orig(element),\n      g0: g0,\n      m0: m0,\n      f0: f0,\n      m1: m1,\n      f1: f1,\n      m2: m2,\n      f2: f2,\n      m3: m3,\n      f3: f3,\n      m4: m4,\n      f4: f4,\n      m5: m5,\n      f5: f5,\n      m6: m6,\n      f6: f6,\n      m7: m7,\n      f7: f7,\n      f8: f8,\n      m8: m8,\n      m9: m9,\n      f9: f9,\n      m10: m10,\n      m11: m11,\n      m12: m12,\n      f10: f10,\n      m14: m14,\n      f11: f11,\n      m15: m15,\n      f12: f12,\n      f13: f13\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m13: m13,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormCom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./FormCom.vue?vue&type=script&lang=js&\"","<template name=\"mForm\">\r\n\t<view class=\"mForm animated fadeIn\">\r\n\t\t<block v-for=\"(element,index) in currentElements\" :key=\"index\">\r\n\t\t<view v-if=\"element.visiabled\" :class=\"{splitline:element.type === 'splitLine',\r\n\t\t 'form-items':element.type !== 'splitLine'&& element.baseType !==8 && element.baseType !==32 && showElementType.indexOf(element.baseType)!==-1}\">\r\n\t\t\t<m-label class=\"item\" v-if=\"showElement(element.baseType,[17])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue = \"elementValueChang\"\r\n\t\t\t @showRelationTab = \"showElementRelationTab(element)\">\r\n\t\t\t</m-label>\r\n\t\t\t<m-inputLable class=\"item\" v-else-if=\"showElement(element.baseType,[1])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue = \"elementValueChang\">\r\n\t\t\t</m-inputLable>\r\n\t\t\t<m-textarea class=\"item\" v-else-if=\"showElement(element.baseType,[10])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue=\"elementValueChang\">\r\n\t\t\t</m-textarea>\r\n\t\t\t<m-searchSelect class=\"item\" v-else-if=\"showElement(element.baseType,[3,12,25])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @select=\"selectSearchData(element)\"\r\n\t\t\t @selectScan = \"selectScan(element)\"\r\n\t\t\t @showRelationTab = \"showElementRelationTab(element)\">\r\n\t\t\t</m-searchSelect> \r\n\t\t\t<m-select class=\"item\" v-else-if=\"showElement(element.baseType,[2,20,21,22])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element,1)\"\r\n\t\t\t @select=\"selectData(element)\">\r\n\t\t\t</m-select>\r\n\t\t\t<m-multiple-search-select class=\"item\" v-else-if=\"showElement(element.baseType,[45])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue = \"elementValueChang\"\r\n\t\t\t @select=\"selectSearchData(element)\"\r\n\t\t\t @selectScan = \"selectScan(element)\">\r\n\t\t\t</m-multiple-search-select>\r\n\t\t\t<m-radio  class=\"item\" v-else-if=\"showElement(element.baseType,[15])\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t :value=\"currentFormData | formValue(element,1)\"\r\n\t\t\t @changeValue = \"elementValueChang\"></m-radio>\r\n\t\t\t<block v-else-if=\"showElement(element.baseType,[9,31],element.dataFormat)\">\r\n\t\t\t\t<!-- dataFormat：1-区间-->\r\n\t\t\t\t<m-datePicker-range class=\"item\" v-if=\"element.dataFormat === 1 || element.baseType === 31\" :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t\t :value=\"currentFormData | formValue(element,3)\"\r\n\t\t\t\t @selectStart=\"selectData(element,'rangeStart')\"\r\n\t\t\t\t @selectEnd=\"selectData(element,'rangeEnd')\">\r\n\t\t\t\t</m-datePicker-range>\r\n\t\t\t\t<m-datePicker class=\"item\" v-else :sourceType=\"sourceType\" :element = \"element\"\r\n\t\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t\t @select=\"selectData(element)\">\r\n\t\t\t\t</m-datePicker>\r\n\t\t\t</block>\r\n\t\t\t<m-image v-else-if=\"showElement(element.baseType,[32])\" :sourceType=\"sourceType\"\r\n\t\t\t :element = \"element\"\r\n\t\t\t :relationId=\"formConfig.otherParams.id\">\r\n\t\t\t</m-image>\r\n\t\t\t<!-- 图片上传-->\r\n\t\t\t<m-upload v-else-if=\"showElement(element.baseType,[8])\" :sourceType=\"sourceType\" \r\n\t\t\t :uploadNum=\"-1\"\r\n\t\t\t :element = \"element\"\r\n\t\t\t :base64Url=\"currentFormData | formValue(element)\"\r\n\t\t\t :imageConfig = \"imageConfig(element)\"\r\n\t\t\t :requestConfig = \"requestConfig(element)\"\r\n\t\t\t @onUpImg=\"upBasicData\" \r\n\t\t\t @onImgDel=\"delImgInfo\"\r\n\t\t\t @allImgs=\"elementValueChang\">\r\n\t\t\t</m-upload>\r\n\t\t\t<m-rate class=\"item\" v-else-if=\"showElement(element.baseType,[36])\" :sourceType=\"sourceType\" \r\n\t\t\t :element = \"element\" \r\n\t\t\t :size=\"pxToREM(48)\"\r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue = \"elementValueChang\">\r\n\t\t\t</m-rate>\r\n\t\t\t<m-map class=\"item\"  v-else-if=\"showElement(element.baseType,[46])\" :sourceType=\"sourceType\"\r\n\t\t\t :element = \"element\" \r\n\t\t\t :value=\"currentFormData | formValue(element)\"\r\n\t\t\t @changeValue = \"elementValueChang\">\r\n\t\t\t</m-map>\r\n\t\t\t<mni-rich v-else-if=\"showElement(element.baseType,[39])\" :sourceType=\"sourceType\" \r\n\t\t\t :html=\"currentFormData | formValue(element)\"></mni-rich>\r\n\t\t\t<m-advanced-filter class=\"advancedFilter-condition\" v-if=\"sourceType==='advancedFilter' && element.dataFormat !==1 && element.baseType !== 31\" \r\n\t\t\t :value=\"currentConditions | formValue(element)\" \r\n\t\t\t @select=\"selectData(element,'advancedFilter')\">\r\n\t\t\t</m-advanced-filter>\r\n\t\t</view>\r\n\t\t</block>\r\n\t\t<!-- 下拉控件 -->\r\n\t\t<mpvue-picker\r\n\t\t\tref=\"selectPicker\"\r\n\t\t\t:mode=\"pickerMode\" \r\n\t\t\t:pickerValueDefault=\"selectValueDefault\"\r\n\t\t\t:pickerValueArray=\"selectValueArray\"\r\n\t\t\t@onConfirm = \"selectDataChoice\"/>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport bus from '@/static/js/bus'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport {commonApi} from '@/common/request/api.js'\r\nimport { COMMON_FORMAT_DECIMAL } from '@/common/common.js'\r\nimport formCom from './formCom.js'\r\n\r\nimport mLabel from '@/components/element/m-label.vue'\r\nimport mSearchSelect from '@/components/element/m-searchSelect.vue'\r\nimport mInputLable from '@/components/element/m-inputLable1.vue'\r\nimport mSelect from '@/components/element/m-select.vue'\r\nimport mRadio from '@/components/element/m-radio.vue'\r\nimport mDatePicker from '@/components/element/m-datePicker.vue'\r\nimport mDatePickerRange from '@/components/element/m-datePickerRange.vue'\r\nimport mTextarea from '@/components/element/m-textarea.vue'\r\nimport mpvuePicker from '@/components/mpvue-picker/mpvuePicker.vue'\r\nimport mAdvancedFilter from '@/components/element/m-advancedFilter.vue'\r\nimport mUpload from '@/components/mniUpload/MniUpload.vue'\r\nimport mRate from '@/components/element/m-rate.vue'\r\nimport mMap from '@/components/element/m-map.vue'\r\nimport mImage from '@/components/element/m-image.vue'\r\nimport MniRich from '@/components/jyf-parser/jyf-parser.vue'\r\nimport mMultipleSearchSelect from '@/components/element/multiple/m-multiple-searchSelect.vue'\r\nimport { advancedFilterCondition } from '@/common/constant/constant.js'\r\n\timport EncryptionPSW from '@/static/js/encryptionPSW.js'\r\nlet static_selectDatas = {}\r\nexport default {\r\n\tcomponents: {\r\n\t\tmImage,mLabel,mSearchSelect,mInputLable,\r\n\t\tmSelect,mpvuePicker,mDatePicker,mDatePickerRange,\r\n\t\tmAdvancedFilter,mTextarea,mUpload,mRate,\r\n\t\tMniRich,mRadio, mMap, mMultipleSearchSelect\r\n\t},\r\n\tprops:{\r\n\t\ttabInfo:{type:Object,required: true},\r\n\t\tadvancedFilterConditions:{type:Object,default(){return{}}},\r\n\t\toldFormData:{type:Object,default(){return{}}},\r\n\t\tformConfig:{\r\n\t\t\ttype:Object,\r\n\t\t\tdefault(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tbaseParams:{//基本参数\r\n\t\t\t\t\t\tcurrentElements:[],\r\n\t\t\t\t\t\tcurrentBottomBtns:[],\r\n\t\t\t\t\t\tcurrentTopRightBtns:[],\r\n\t\t\t\t\t\tcurrentComboBoxs:[],\r\n\t\t\t\t\t\ttabElements:[],\r\n\t\t\t\t\t},\r\n\t\t\t\t\totherParams:{},\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowElementType:{\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: function () {\r\n\t\t\t\treturn [1,2,3,8,9,10,12,15,17,20,21,22,25,36,32,39,46,45]\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(\"form\", [\"filterSQLParams\",\"currentBottomBtns\",\"currentComboBoxs\"]),\r\n\t\t...mapState(\"common\", [\"tabsFormDatas\",\"tabsElements\"]),\r\n\t\t...mapState(\"verificationRule\", {rules: 'rules'}),\r\n\t\tselectValueElement(){return this.selectElement.elementId},\r\n\t\tselectValueArray(){\r\n\t\t\tconst baseData = [{value:\"\",label:this.$i18nMsg('lang-BRAT-delTip')}] // 中文：\"请选择数据\"\r\n\t\t\tlet ary = []\r\n\t\t\tif(this.selectElement.static_advancedFilter) ary = advancedFilterCondition\r\n\t\t\telse ary = this.selectValueElement ? (static_selectDatas[this.selectValueElement] || baseData) : baseData\r\n\t\t\treturn ary\r\n\t\t},\r\n\t\tsourceType(){\r\n\t\t\treturn this.tabInfo.templateType || \"form\"\r\n\t\t},\r\n\t\timageConfig(){\r\n\t\t\treturn function(element = {}){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t allImgsParam:{\r\n\t\t\t\t\t\telement:element,\r\n\t\t\t\t\t\ttriggerBaseType:'upImg'\r\n\t\t\t\t\t }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\trequestConfig(){\r\n\t\t\treturn function(element = {}){\r\n\t\t\t\tlet submitUrl ='file/uploadFiles',\r\n\t\t\t\t\tsubmitParam = {}\r\n\t\t\t\tif(element.elementFormat === 2){\r\n\t\t\t\t\tsubmitUrl ='file/textEditorUpload' \r\n\t\t\t\t}else{\r\n\t\t\t\t\tsubmitParam = EncryptionPSW({tableName:element.relationTableName})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(element.waterMarkId) submitParam.waterMarkId = element.waterMarkId //是否加水印\r\n\t\t\t\treturn {\r\n\t\t\t\t\tsubmitUrl:submitUrl,\r\n\t\t\t\t\tsubmitParam:submitParam,\r\n\t\t\t\t\tgetPicParam:{\r\n\t\t\t\t\t\trelationId:this.formConfig.otherParams.id,\r\n\t\t\t\t\t\trelationTableName:element.relationTableName,\r\n\t\t\t\t\t\trelationpriorityId:element.priorityId,\r\n\t\t\t\t\t\trelationStateId:element.stateId,\r\n\t\t\t\t\t\trelationTypeId:element.typeId,\r\n\t\t\t\t\t\telement:element\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tcurrentElements:[],\r\n\t\t\tcurrentFormData:{},\r\n\t\t\tselectElement:\"\",\r\n\t\t\tselectValueDefault: [0],\r\n\t\t\tpickerMode:\"selector\",//dateSelector-日期 datetimeSelector-时间\r\n\t\t\tcurrentConditions:{},\r\n\t\t\tfileIds:{}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tformValue(formData,element,type=2){//type 1-显示id，2-显示name,3-返回对象\r\n\t\t\tconst {baseType, elementId} = element\r\n\t\t\tlet value = formData[elementId] || \"\"\r\n\t\t\ttry{value = JSON.parse(value)}catch(e){}\r\n\t\t\tif(baseType === 45){ //多选\r\n\t\t\t\tlet result = []\r\n\t\t\t\tconst {id=\"\",name=\"\"} = value,\r\n\t\t\t\t\t\t\tresultValue = `${id}` ? id.split(\",\"):[],\r\n\t\t\t\t\t\t\tresultLabel = name.split(\",\")\r\n\t\t\t\tfor(let i = 0,len=resultValue.length;i<len;i++){\r\n\t\t\t\t\tlet label = \"\"\r\n\t\t\t\t\tif(i<resultLabel.length) label = resultLabel[i]\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tvalue:resultValue[i],\r\n\t\t\t\t\t\tlabel:label\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn result\r\n\t\t\t}else{\r\n\t\t\t\tif(type === 1) value = typeof value !== \"object\" ? value : value.id || \"\"\r\n\t\t\t\telse if(type===3) value = value || {}\r\n\t\t\t\telse value = typeof value !== \"object\" ? value : value.name || \"\"\r\n\t\t\t\t//如果字段类型为4：decimal去除后面无用的点\r\n\t\t\t\tif(element.relationColumnType === 4 && value) value = COMMON_FORMAT_DECIMAL(value)\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\t...mapMutations(\"form\",[\"SET_ALLBTNS\",\"SET_FORM_OPTIONS\"]),\r\n\t\t...mapMutations(\"common\",[\"SET_TABS_FORMDATAS\",\"SET_TABS_SUBFORMDATAS\",\"SET_TEMPLATE_PARAMS\",\"SET_PANEL_PARAMS\",\"SET_COM_TABCHILD\"]),\r\n\t\t...mapMutations(\"verificationRule\",[\"CHECKED_FLAG\",\"SET_VER_RULES\"]),\r\n\t\t...mapMutations(\"advanceFilter\",[\"SET_CONNECTORS\"]),\r\n\t\t...mapMutations([\"STATE_formElementFocus\"]),\r\n\t\tsubmitFormData(type=1){\r\n\t\t\tconst formData = this.currentFormData || {}\r\n\t\t\tformData.static_fileIds = this.fileIds\r\n\t\t\tconst config = {\r\n\t\t\t\ttriggers:this.tabInfo.trigger,\r\n\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\totherTabId: this.tabInfo.relationMainTab,\r\n\t\t\t}\r\n\t\t\tif(type === 1) return formCom.getFormData(this.currentElements,formData,config,this).formDatas\r\n\t\t\telse return formCom.getFormData(this.currentElements,formData,config,this)\r\n\t\t},\r\n\t\tverificationRule(){//验证\r\n\t\t\tconst formInfo = this.submitFormData(2),\r\n\t\t\t\t  formData = formInfo.formDatas,\r\n\t\t\t\t  rules = formInfo.rules\r\n\t\t\treturn formCom.verificationForm(rules,formData,this.tabInfo.mobileTabId,this)\r\n\t\t},\r\n\t\t// 删除图片\r\n\t\tasync delImgInfo(e) {\r\n\t\t\tif(e in this.fileIds) delete this.fileIds[e]\r\n\t\t},\r\n\t\tasync upBasicData(e) {\r\n\t\t\tconst _this = this\r\n\t\t\tconst uploadPics = e.uploadPics,\r\n\t\t\t\t  otherParam = e.getPicParam\r\n\t\t\t// 上传图片但未绑定的图片数组\r\n\t\t\tlet arrImg = [];\r\n\t\t\tfor (let i = 0, len = uploadPics.length; i < len; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (uploadPics[i].id != \"\") {// 将未上传的图片信息保存到fileIds数组\r\n\t\t\t\t\t\tconst fileId = uploadPics[i].id\r\n\t\t\t\t\t\tthis.fileIds[fileId] = {\r\n\t\t\t\t\t\t\ttypeId:otherParam.relationTypeId,\r\n\t\t\t\t\t\t\tstateId:otherParam.relationStateId,\r\n\t\t\t\t\t\t\tpriorityId:otherParam.relationpriorityId,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log('上传失败...');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowElement(elementType,type,dataFormat){\r\n\t\t\tif(elementType === 9 && dataFormat === 1) elementType = 31 //如果是时间控件但数据格式是区间\r\n\t\t\treturn type.indexOf(elementType) !== -1 && this.showElementType.indexOf(elementType) !== -1\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {Object} element 控件属性\r\n\t\t * @description 数据选择框点击按钮时触发的事件，这个事件中获取控件的参数。\r\n\t\t */\r\n\t\tselectSearchData(element){//数据框选择\r\n\t\t\tconst {isMultiple,elementId, selectListTabId, mainColumnName} = element\r\n\t\t\t//获取控件当前的地址，目的为了弹出面板时可以勾选之前选中的值\r\n\t\t\tlet value = this.currentFormData[elementId] || \"\"\r\n\t\t\ttry{value = JSON.parse(value)}catch(e){}\r\n\t\t\t\r\n\t\t\tconst {relationMainTab, mobileTabId, jumpTag, bundleParams,\r\n\t\t\t\t\t\t bundleId, bundleName} = this.tabInfo\r\n\t\t\tlet param = {//设置下一个面板的参数\r\n\t\t\t\trelationMainTab,mobileTabId,element,jumpTag,bundleParams,bundleId,bundleName,\r\n\t\t\t\tshowColumn:mainColumnName,//数据选择框弹出面板中顶部显示的字段\r\n\t\t\t\tonKey: `searchSelect${mobileTabId}`\r\n\t\t\t}\r\n\t\t\tif(!isMultiple) param.checkId = typeof value !== \"object\" ? value : value.id\r\n\t\t\telse{//是多选,需要将外面已经选中的数据组成list装到弹出面板中\r\n\t\t\t\tlet result = []\r\n\t\t\t\tconst {id=\"\",name=\"\"} = value,\r\n\t\t\t\t\t\t\tresultValue = `${id}` ? id.split(\",\"):[],\r\n\t\t\t\t\t\t\tresultLabel = name.split(\",\")\r\n\t\t\t\tfor(let i = 0,len=resultValue.length;i<len;i++){\r\n\t\t\t\t\tlet label = \"\"\r\n\t\t\t\t\tif(i<resultLabel.length) label = resultLabel[i]\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tvalue:resultValue[i],\r\n\t\t\t\t\t\tlabel:label\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tparam.checkId = id\r\n\t\t\t\tparam.checkedList = result\r\n\t\t\t}\r\n\t\t\tif(selectListTabId ) param.selectListTabId = selectListTabId\r\n\t\t\telse {\r\n\t\t\t\tconst filterSQLTab = this.filterSQLParams[param.mobileTabId] || {},\r\n\t\t\t\t\t  filterSQLParams = filterSQLTab[element.elementId] || [] \r\n\t\t\t\tparam.filterSQLParams = filterSQLParams\r\n\t\t\t\tparam.elementFilterParams = element.elementFilterParams\r\n\t\t\t}\r\n\t\t\tformCom.selectSearchData(element, param, this)\r\n\t\t},\r\n\t\t//数据框扫描\r\n\t\tselectScan(element){\r\n\t\t\tconst filterSQLTab = this.filterSQLParams[this.tabInfo.mobileTabId] || {},\r\n\t\t\t\t\t  {isMultiple,elementId,elementFilterParams} = element,\r\n\t\t\t\t\t  filterSQLParams = filterSQLTab[elementId] || []\r\n\t\t\tlet param = {//设置下一个面板的参数\r\n\t\t\t\trelationMainTab: this.tabInfo.relationMainTab,\r\n\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\telementFilterParams:elementFilterParams,\r\n\t\t\t\tfilterSQLParams:filterSQLParams\r\n\t\t\t}\r\n\t\t\tif(isMultiple){//是否多选\r\n\t\t\t\tconst valueObj =this.currentFormData[elementId] || {}\r\n\t\t\t\tparam.elementValue = valueObj.id || ''\r\n\t\t\t}\r\n\t\t\tformCom.scanSearchData(element, param, this)\r\n\t\t},\r\n\t\t//下拉框选择\r\n\t\tselectData(element = {},type){\r\n\t\t\t//如果是高级筛选条件下拉框\r\n\t\t\tif(type === \"advancedFilter\"){\r\n\t\t\t\tconst advancedFilterValue = this.currentConditions[element.elementId] || 3\r\n\t\t\t\tconst index = advancedFilterCondition.findIndex(item => item.value == advancedFilterValue)\r\n\t\t\t\tthis.pickerMode = \"selector\"\r\n\t\t\t\tthis.selectValueDefault = index === -1 ? [0] : [index]\r\n\t\t\t\tthis.selectElement = {...element, ...{static_advancedFilter:true}}\r\n\t\t\t\tthis.$refs.selectPicker.show();\r\n\t\t\t\treturn \r\n\t\t\t}\r\n\t\t\tthis.selectElement = {...element,...{rangeType:type}}\r\n\t\t\tlet elementValue = this.currentFormData[element.elementId] || \"\"\r\n\t\t\t//如果为时间类型\r\n\t\t\tif(element.baseType === 9 || element.baseType === 31){\r\n\t\t\t\tconst elementFormat = element.elementFormat || 1 //时间类型：1-yyyy-MM-dd hh:mm:ss 2-yyyy-MM-dd\r\n\t\t\t\tthis.pickerMode = elementFormat === 1 ? \"datetimeSelector\" : \"dateSelector\"\r\n\t\t\t\tif(type === \"rangeStart\" && elementValue) this.selectValueDefault = elementValue.start ? elementValue.start.split(\"-\") : []\r\n\t\t\t\telse if(type === \"rangeEnd\" && elementValue) this.selectValueDefault = elementValue.end ? elementValue.end.split(\"-\") : []\r\n\t\t\t\telse this.selectValueDefault = elementValue.id ? elementValue.id.split(\"-\") : []\r\n\t\t\t}else{\r\n\t\t\t\tlet checked = elementValue.id,\r\n\t\t\t\t\tselectValueArray = this.selectValueArray || []\r\n\t\t\t\t//排除为0的情况\r\n\t\t\t\tif(typeof checked === 'undefined' || typeof checked === 'object') checked = \"\"\r\n\t\t\t\tconst checkedIndex = selectValueArray.findIndex(item => item.value == checked)\r\n\t\t\t\tthis.pickerMode = \"selector\"\r\n\t\t\t\tthis.selectValueDefault = checkedIndex === -1 ? [0] : [checkedIndex]\r\n\t\t\t}\r\n\t\t\tthis.$refs.selectPicker.show();\r\n\t\t},\r\n\t\tselectDataChoice(e){\r\n\t\t\tconst elementArry = [9,31]\r\n\t\t\tlet value = {id:e.value[0],name:e.label}\r\n\t\t\tif(elementArry.indexOf(this.selectElement.baseType) !== -1 && !this.selectElement.static_advancedFilter) value = e.label\r\n\t\t\tthis.elementValueChang({\r\n\t\t\t\telement:this.selectElement,\r\n\t\t\t\tvalue:value,\r\n\t\t\t\ttriggerBaseType:2,\r\n\t\t\t\tstatic_advancedFilter:this.selectElement.static_advancedFilter,\r\n\t\t\t\trangeType:this.selectElement.rangeType\r\n\t\t\t})\r\n\t\t},\r\n\t\tjsFnc(param,jsFncList){//js触发器逻辑\r\n\t\t\tconst jsFunctionList = jsFncList[0].jsFunctionList || [],\r\n\t\t\t\t  jsFunctionListType = jsFunctionList.length>0 ? jsFunctionList[0].functionType : \"\"\r\n\t\t\t\r\n\t\t\tparam.jsFunctionList = jsFunctionList\r\n\t\t\tparam.mobileTabId = this.tabInfo.mobileTabId\r\n\t\t\tif(jsFunctionListType === 1){//时间区间\r\n\t\t\t\treturn formCom.checkedDateRange(param,this)\r\n\t\t\t}else if(jsFunctionListType === 2){//数字区间\r\n\t\t\t\treturn formCom.checkedNumberRange(param,this)\r\n\t\t\t}\r\n\t\t},\r\n\t\t//控件的关联面板\r\n\t\tshowElementRelationTab(element){\r\n\t\t\tconst relationTabId = element.relationTabId,\r\n\t\t\t\t  mobileTabsBYRelation = this.tabInfo.mobileTabs[relationTabId]\r\n\t\t\t\t  \r\n\t\t\tconst params = {\r\n\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\tbundleId:this.tabInfo.bundleId,\r\n\t\t\t\tmobileTabShowType:mobileTabsBYRelation.mobileTabShowType,\r\n\t\t\t\tjumpTag:this.tabInfo.jumpTag,\r\n\t\t\t\tbundleParams:this.tabInfo.bundleParams,\r\n\t\t\t\tmobileTabsBYRelation\r\n\t\t\t}\r\n\t\t\tformCom.elementRelationTab(element, params, this)\r\n\t\t\t\r\n\t\t},\r\n\t\t//表单控件值发生改变\r\n\t\tasync elementValueChang(param){\r\n\t\t\tif(param.static_advancedFilter) {//筛选条件\r\n\t\t\t\tthis.advancedFilterConditions[param.element.elementId] = param.value.id\r\n\t\t\t\treturn \r\n\t\t\t}\r\n\t\t\tif(param.rangeType === \"rangeStart\") {//时间区级控件\r\n\t\t\t\tthis.currentFormData[param.element.elementId] = {...this.currentFormData[param.element.elementId],...{start:param.value}}\r\n\t\t\t\treturn \r\n\t\t\t}else if(param.rangeType === \"rangeEnd\"){\r\n\t\t\t\tthis.currentFormData[param.element.elementId] = {...this.currentFormData[param.element.elementId],...{end:param.value}}\r\n\t\t\t\treturn \r\n\t\t\t}\r\n\t\t\t//js触发器\r\n\t\t\tconst triggers = this.tabInfo.trigger[param.element.elementId] || [],\r\n\t\t\t\t  jsFncList = triggers.filter( item => item.basetype === 5 && item.triggerType===4) || []\r\n\t\t\tif(jsFncList.length>0 && !this.jsFnc(param,jsFncList)){//如果存在js触发器，并且js触发器器返回false不进行前端触发器\r\n\t\t\t\tthis.STATE_formElementFocus(false)\r\n\t\t\t\treturn\r\n\t\t\t}  \r\n\t\t\tlet currentFormData = this.currentFormData,\r\n\t\t\t\tselcetInfo = {}\r\n\t\t\tconst isSearchSelectById = [3,45],\r\n\t\t\t\t\t\t{triggerBaseType} = param,\r\n\t\t\t\t\t\t{mainTableName, mainColumnName, baseType,elementId} = param.element\r\n\t\t\tif(triggerBaseType === 3 && param.value) {//赋值\r\n\t\t\t\tlet mainColumnValue = {},isMultiple=false\r\n\t\t\t\tconst key = `${mainTableName}_${param.value}`\r\n\t\t\t\tif(baseType === 45) isMultiple = true //是否是多选数据\r\n\t\t\t\tawait commonApi.getSearchSelectById(this,{//单条数据\r\n\t\t\t\t\tid:param.value,\r\n\t\t\t\t\ttabSource:mainTableName\r\n\t\t\t\t},isMultiple).then ( value => {\r\n\t\t\t\t\tselcetInfo[key] = value\r\n\t\t\t\t\tlet result = {}\r\n\t\t\t\t\t//如果不是是多选\r\n\t\t\t\t\tif(!isMultiple) result = {id:value.id,name:value[mainColumnName] || \"\"}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tlet resultLabel = [],resultValue = []\r\n\t\t\t\t\t\tvalue.map(item => {\r\n\t\t\t\t\t\t\tresultValue.push(item.id)\r\n\t\t\t\t\t\t\tresultLabel.push(item[mainColumnName] || \"\")\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tresult = {id:resultValue.join(\",\"),name:resultLabel.join(\",\")}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainColumnValue = result\r\n\t\t\t\t})\r\n\t\t\t\tcurrentFormData[elementId] = mainColumnValue\r\n\t\t\t}else if(triggerBaseType === \"upImg\"){\r\n\t\t\t\tcurrentFormData[elementId] = param.value\r\n\t\t\t}else{\r\n\t\t\t\tlet data = param.value\r\n\t\t\t\t//如果不是下拉框\r\n\t\t\t\tif([2,20,21,22].indexOf(baseType) === -1) data = {id:param.value,name:param.value }\r\n\t\t\t\tcurrentFormData[elementId] = data\r\n\t\t\t}\r\n\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\tformData:currentFormData\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tconst triggerConfig = {\r\n\t\t\t\teventType:triggerBaseType,\r\n\t\t\t\ttriggerList:this.tabInfo.trigger,\r\n\t\t\t\trelationMainTab:this.tabInfo.relationMainTab,\r\n\t\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\t\ttriggerElements:[param.element],\r\n\t\t\t\toldElements:this.formConfig.baseParams.tabElements,\r\n\t\t\t\tcurrentElements:this.currentElements,\r\n\t\t\t\tcurrentBottomBtns:this.formConfig.baseParams.currentBottomBtns || [],\r\n\t\t\t\tcurrentTopRightBtns:this.formConfig.baseParams.currentTopRightBtns || [],\r\n\t\t\t\tcurrentComboBoxs:this.formConfig.baseParams.currentComboBoxs || [],\r\n\t\t\t\tcurrentTabsChilds:this.formConfig.baseParams.currentTabsChilds || [],\r\n\t\t\t\tformData:currentFormData,\r\n\t\t\t\toldFormData:{...this.oldFormData},\r\n\t\t\t\tsearchSelectInfo:selcetInfo,\r\n\t\t\t\trules:this.rules[this.tabInfo.mobileTabId],\r\n\t\t\t\tsearchSelects:[],\r\n\t\t\t\tselecShasCanModify:[],//是否需要重新更新\r\n\t\t\t}\r\n\t\t\tthis.Static_GlobalFucs.formElementsTrigger({...triggerConfig},this).then(tabParams => {\r\n\t\t\t\tthis.currentFormData = {...this.currentFormData,...tabParams.formData}\r\n\t\t\t\t//设置按钮、下拉菜单\r\n\t\t\t\tthis.SET_ALLBTNS({\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tcomboBoxs:tabParams.currentComboBoxs,\r\n\t\t\t\t\tbottomBtns:tabParams.currentBottomBtns,\r\n\t\t\t\t\ttopRightBtns:tabParams.currentTopRightBtns\r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tformData:tabParams.formData\r\n\t\t\t\t})\r\n\t\t\t\tthis.SET_COM_TABCHILD({//设置子面板\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\ttabsChilds:tabParams.currentTabsChilds\r\n\t\t\t\t})\r\n\t\t\t\tif(tabParams.updateElement && tabParams.updateElement.length>0){\r\n\t\t\t\t\tthis.$emit(\"childRelod\",tabParams.updateElement)\r\n\t\t\t\t}\r\n\t\t\t\tthis.SET_VER_RULES({//设置校验规则\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\trules:tabParams.rules\r\n\t\t\t\t})\r\n\t\t\t\tthis.STATE_formElementFocus(false)\r\n\t\t\t})\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tif(this.tabInfo.templateType === \"advancedFilter\") this.currentConditions = this.advancedFilterConditions\r\n\t\tthis.currentFormData = {...this.oldFormData}\r\n\t\tthis.currentElements = this.formConfig.baseParams.currentElements\r\n\t\t//请求下拉框数据\r\n\t\tconst param = {\r\n\t\t\tdropDownList:[...this.tabInfo.cascadeSelects,...this.tabInfo.commonSelects],\r\n\t\t\trelationMainTab:this.tabInfo.relationMainTab,\r\n\t\t\tmobileTabId:this.tabInfo.mobileTabId,\r\n\t\t\tfilterParams:this.tabInfo.selectsFilterParams\r\n\t\t}\r\n\t\tif(param.dropDownList.length>0){\r\n\t\t\tformCom.getSelectValues(param,this).then( value => {\r\n\t\t\t\tfor(let key in value){\r\n\t\t\t\t\tlet dropDownValue = value[key].map( item => {return {value:item.id,label:item.name}})\r\n\t\t\t\t\tlet static_down = [...dropDownValue]\r\n\t\t\t\t\tstatic_down.unshift({value:'',label:this.$i18nMsg('lang-form-select')})\r\n\t\t\t\t\tstatic_selectDatas[key] = static_down\r\n\t\t\t\t\tthis.SET_FORM_OPTIONS({\r\n\t\t\t\t\t\telementId:key,\r\n\t\t\t\t\t\toptions:dropDownValue\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t//设置数据选择框监听\r\n\t\tlet onKey = `searchSelect${this.tabInfo.mobileTabId}`\r\n\t\tbus.$on(onKey, (params) => { //获取传递的参数并进行操作\r\n\t\t\tlet param = {\r\n\t\t\t\tid:params.id,\r\n\t\t\t\ttabSource:params.element.mainTableName\r\n\t\t\t}\r\n\t\t\tconst triggerBaseType = params.triggerBaseType || 3\r\n\t\t\tlet changeParam = {element:params.element,value:params.id,triggerBaseType:triggerBaseType}\r\n\t\t\tthis.elementValueChang(changeParam)//赋值\r\n\t\t})\r\n\t},\r\n\tbeforeDestroy () {\r\n\t\t//注销前先解绑监听\r\n\t\tlet onKey = `searchSelect${this.tabInfo.mobileTabId}`\r\n\t\tbus.$off(onKey);\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":""}