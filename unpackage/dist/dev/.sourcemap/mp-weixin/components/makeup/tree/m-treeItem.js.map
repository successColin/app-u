{"version":3,"sources":["webpack:///D:/code/2.0app/components/makeup/tree/m-treeItem.vue?472a","webpack:///D:/code/2.0app/components/makeup/tree/m-treeItem.vue?08a2","webpack:///D:/code/2.0app/components/makeup/tree/m-treeItem.vue?0b34","webpack:///D:/code/2.0app/components/makeup/tree/m-treeItem.vue?4713","uni-app:///components/makeup/tree/m-treeItem.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","pxToREM","m1","g0","checkedIds","findIndex","checkId","treeItem","id","m2","m3","m4","m5","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,wNACIA,EADJ,sKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wCACZ,aAAAF,E;;;;2GCtBf,qnC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,QAAQ,KACjBC,EAAKR,EAAIO,QAAQ,IACjBE,EAAKT,EAAIU,WAAWC,WAAU,SAASC,GACzC,MAAO,GAAKA,IAAY,GAAKZ,EAAIa,SAASC,MAExCC,EAAKf,EAAIO,QAAQ,IACjBS,EAAKhB,EAAIO,QAAQ,IACjBU,EAAKjB,EAAIO,QAAQ,IACjBW,EAAKlB,EAAIO,QAAQ,IACrBP,EAAImB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLnB,GAAIA,EACJI,GAAIA,EACJC,GAAIA,EACJM,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtB1B,EAAO2B,eAAgB,G;;;;2DC/BvB,ovBAA6rB,eAAG,G;;;;+NC0ChsB,kBACA,sCACA,kCACA,oD,4iCACA,CACA,mBACA,OACA,UACA,YACA,WAEA,OACA,YACA,WAEA,0BACA,qCACA,kBACA,uBACA,gBACA,cACA,YACA,WACA,aACA,YAEA,UACA,aACA,YAEA,iBACA,yCACA,qCAGA,KA/BA,WAgCA,OACA,QACA,YACA,WACA,aACA,qBAGA,eACA,kCADA,IAEA,oCAFA,CAGA,SAHA,WAIA,8DAEA,UANA,WAOA,yCACA,8DAOA,OACA,UADA,SACA,GACA,MACA,oBACA,0DAGA,QA9DA,WA+DA,0CAEA,QAjEA,WAqEA,qBACA,mDACA,wDAEA,qFAEA,SACA,cADA,SACA,uIACA,yCADA,gCAEA,uBAFA,OAIA,mCACA,eALA,8CAOA,cARA,SAQA,mJACA,IACA,iCACA,MACA,GACA,QACA,QACA,uBACA,8BAEA,KACA,2BAEA,SACA,yBAEA,IACA,MACA,WAEA,eApBA,SAqBA,0EACA,sBACA,gDAvBA,8CA0BA,eAlCA,SAkCA,KACA,oBACA,iBAOA,sDACA,MACA,iCACA,WACA,aAGA,mCACA,kBAdA,iCACA,WACA,gB","file":"components/makeup/tree/m-treeItem.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./m-treeItem.vue?vue&type=template&id=80394f92&\"\nvar renderjs\nimport script from \"./m-treeItem.vue?vue&type=script&lang=js&\"\nexport * from \"./m-treeItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/makeup/tree/m-treeItem.vue\"\nexport default component.exports","export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-treeItem.vue?vue&type=template&id=80394f92&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.pxToREM(10)\n  var m1 = _vm.pxToREM(24)\n  var g0 = _vm.checkedIds.findIndex(function(checkId) {\n    return \"\" + checkId === \"\" + _vm.treeItem.id\n  })\n  var m2 = _vm.pxToREM(36)\n  var m3 = _vm.pxToREM(36)\n  var m4 = _vm.pxToREM(36)\n  var m5 = _vm.pxToREM(36)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        g0: g0,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-treeItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-treeItem.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"tree-item\">\r\n\t\t<view class=\"tree-item-text\" @click=\"treeItemClick(treeItem.id,treeItem.isGroup,treeItem.childCount,treeItem.type)\">\r\n\t\t\t<block v-if=\"!isLoading\"><m-normal-icon v-if=\"treeItem.childCount || hasChild\" class=\"tree-item-icon\" :class=\"{icontransform:open}\" icon=\"iconshushouqijiantou\" :iconSize=\"pxToREM(10)\"></m-normal-icon></block>\r\n\t\t\t<image v-else :src=\"tailSpin\" style=\"width: 25px; height: 25px;\" mode=\"aspectFill\" ></image>\r\n\t\t\t<m-normal-icon v-if=\"treeItem.isGroup\" class=\"tree-item-icon\" color=\"#fab71c\" icon=\"common_icon_group\" :iconSize=\"pxToREM(24)\"></m-normal-icon>\r\n\t\t\t<block v-if=\"showType == 1\">{{(treeItem.name || \"\")}}</block>\r\n\t\t\t<block v-else-if=\"showType == 2\">{{(treeItem.name || \"\")  + \"_\" + (treeItem.keyCode || \"\")}}</block>\r\n\t\t\t<block v-else-if=\"showType == 3\">{{(treeItem.keyCode || \"\") + \"_\" + (treeItem.name || \"\")}}</block> \r\n\t\t\t<block v-else-if=\"showType == 4\">{{treeItem.keyCode || \"\"}}</block>\r\n\t\t\t<block v-if=\"!treeItem.isGroup\">\r\n\t\t\t\t<view class=\"tree-item-check checked\" :style=\"{color:themeColorCode}\" @tap.stop=\"treeItemSelect(treeItem)\" v-if=\"checkedIds.findIndex(checkId => `${checkId}`===`${treeItem.id}`)!==-1\" >\r\n\t\t\t\t\t<m-normal-icon v-if=\"multiple\" icon=\"checkbox_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t<m-normal-icon v-else icon=\"checkboxRadio_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tree-item-check\" @tap.stop=\"treeItemSelect(treeItem)\" v-else >\r\n\t\t\t\t\t<m-normal-icon v-if=\"multiple\" icon=\"unCheckbox_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t<m-normal-icon v-else icon=\"unCheckboxRadio_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t\t<view v-show=\"open\" v-if=\"children.length>0\" class=\"tree-item-Child\">\r\n\t\t    <m-tree-item v-for=\"(item,index) in children\"  \r\n\t\t\t\t:multiple=\"multiple\"\r\n\t\t\t\t:treeItem=\"item\" \r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t:showType = \"showType\"\r\n\t\t\t\t:dataSource=\"dataSource\" \r\n\t\t\t\t:elementMultiRelation=\"elementMultiRelation\"\r\n\t\t\t\t:asyncNode=\"asyncNode\"\r\n\t\t\t\t:groupDataSource=\"groupDataSource\"\r\n\t\t\t\t:checkedIds = \"checkedIds\" \r\n\t\t\t\t:elementId=\"elementId\"\r\n\t\t\t\t:level = \"level + 1 \">\r\n\t\t\t</m-tree-item>\r\n\t\t</view>\r\n\t\t<!-- <m-loading v-if=\"isLoading\" class=\"animated\"\r\n\t\t\t:class=\"[isLoading ? 'fadeIn':'fadeOut']\"></m-loading> -->\r\n\t</view>\n</template>\n\n<script>\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\timport {treeApi} from '@/common/request/api.js'\r\n\timport bus from '@/static/js/bus'\r\n\timport tailSpin from \"@/static/images/svg/tail-spin.svg\"\r\n\texport default {\r\n\t  name: \"m-tree-item\",\r\n\t  props: {\r\n\t\t\tshowType:{//显示类型 1-名称；2-名称+编码；3-编码+名称；4-编码\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:1\r\n\t\t\t},\r\n\t\t\tlevel:{//树的层级\r\n\t\t\t\ttype:Number,\r\n\t\t\t\tdefault:1\r\n\t\t\t},\r\n\t\t\telementId:[Number,String],\r\n\t\t\telementMultiRelation:[Number,String],\r\n\t\t\tdataSource:String,\r\n\t\t\tgroupDataSource:String,\r\n\t\t\ttreeItem:Object,\r\n\t\t\tisLast:Number,\r\n\t\t\tpage:Number,\r\n\t\t\tasyncNode:{//是否异步，默认false\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t},\r\n\t\t\tmultiple:{//是否多选\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t},\r\n\t\t\tcheckedIds:Array,\r\n\t\t\tcheckedColumn:{type:String,default:\"id\"},//监测选中的字段\r\n\t\t\topenColumn:{type:String,default:\"\"},//监测需要\r\n\t\t\t// alreadyCheckId:Number\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\topen:false,\r\n\t\t\t\tchildren:[],\r\n\t\t\t\tchecked:false,\r\n\t\t\t\tisLoading:false,\r\n\t\t\t\ttailSpin:tailSpin\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState([\"themeColorCode\"]),\r\n\t\t\t...mapState(\"Tree\",[\"ancestors\"]),\r\n\t\t\thasChild(){\r\n\t\t\t\treturn this.treeItem.children && this.treeItem.children.length\r\n\t\t\t},\r\n\t\t\topenIsNot(){//是否需要自动打开\r\n\t\t\t\tif(this.treeItem[this.openColumn]){\r\n\t\t\t\t\treturn this.ancestors.indexOf(this.treeItem[this.openColumn]) !== -1\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\topenIsNot(newValue){\r\n\t\t\t\tif(!newValue) return\r\n\t\t\t\tconst treeItem = this.treeItem\r\n\t\t\t\tthis.treeItemClick(treeItem.id,treeItem.isGroup,treeItem.childCount,treeItem.type)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.children = this.treeItem.children || []\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// if(this.level === 1){\r\n\t\t\t// \tthis.treeItemClick(this.treeItem.id,this.treeItem.isGroup,this.treeItem.childCount,this.treeItem.type)\r\n\t\t\t// }\r\n\t\t\tconst treeItem = this.treeItem\r\n\t\t\tif(this.ancestors.indexOf(this.treeItem.nodeKey) !== -1){\r\n\t\t\t\tthis.treeItemClick(treeItem.id,treeItem.isGroup,treeItem.childCount,treeItem.type)\r\n\t\t\t}\r\n\t\t\tif(this.checkedIds.indexOf(treeItem[this.checkedColumn])!==-1) this.treeItemSelect(treeItem,\"create\")\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync treeItemClick(id,isGroup,childCount,type) {\r\n\t\t\t\tif(this.asyncNode && this.children.length===0 && childCount>0){\r\n\t\t\t\t\tawait this.asyncTreeNode(id,isGroup,type)\r\n\t\t\t\t}\r\n\t\t\t\tthis.children = this.treeItem.children || []\r\n\t\t\t\tthis.open = !this.open\r\n\t\t\t},\r\n\t\t\tasync asyncTreeNode(id,isGroup,type){\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tlet elementMultiRelation = Number(this.elementMultiRelation)\r\n\t\t\t\tlet type1 = \"D\",\r\n\t\t\t\t\tparams = {\r\n\t\t\t\t\t\tid:id || 0,\r\n\t\t\t\t\t\tgroup:0,\r\n\t\t\t\t\t\telementMultiRelation:elementMultiRelation,\r\n\t\t\t\t\t\trootPath:this.treeItem.rootpath\r\n\t\t\t\t\t}\r\n\t\t\t\tif(elementMultiRelation!=1){\r\n\t\t\t\t\tparams.dataSource=this.dataSource\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparams.type=type\r\n\t\t\t\t\tparams.elementId = this.elementId\r\n\t\t\t\t}\r\n\t\t\t\tif(isGroup){\r\n\t\t\t\t\ttype1 = 'G',\r\n\t\t\t\t\tparams.group = 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tawait treeApi.currencyStandardSelectionBoxSingleTree(this, params,type1).then(value => {\r\n\t\t\t\t\t_this.treeItem.children = value\r\n\t\t\t\t\tsetTimeout(() => { _this.isLoading = false }, 100)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttreeItemSelect(treeItem,type){\r\n\t\t\t\tconst children = this.children\r\n\t\t\t\tif(type===\"create\"){\r\n\t\t\t\t\tbus.$emit('treeCheckNode', {\r\n\t\t\t\t\t\ttreeItem:treeItem,\r\n\t\t\t\t\t\tchildren:children\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\tconst checkedIdsIndex = this.checkedIds.indexOf(treeItem[this.checkedColumn])\r\n\t\t\t\tif(checkedIdsIndex === -1){\r\n\t\t\t\t\tbus.$emit('treeCheckNode', {\r\n\t\t\t\t\t\ttreeItem:treeItem,\r\n\t\t\t\t\t\tchildren:children\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbus.$emit('treeNoCheckNode', {\r\n\t\t\t\t\t\ttreeItem:treeItem\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t}\n</script>\n"],"sourceRoot":""}