{"version":3,"sources":["webpack:///D:/code/2.0app/components/makeup/m-plainList.vue?5b27","webpack:///D:/code/2.0app/components/makeup/m-plainList.vue?9a5c","webpack:///D:/code/2.0app/components/makeup/m-plainList.vue?ceab","webpack:///D:/code/2.0app/components/makeup/m-plainList.vue?c4ce","uni-app:///components/makeup/m-plainList.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$i18nMsg","m1","l0","__map","listData","item","index","g0","alreadyCheckId_","findIndex","checkId","id","$orig","__get_orig","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,0OACIA,EADJ,mKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,oCACZ,aAAAF,E;;;;2GCtBf,onC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAAS,0BAClBC,EAAKR,EAAIO,SAAS,0BAElBE,EAAKT,EAAIU,MAAMV,EAAIW,UAAU,SAASC,EAAMC,GAC9C,IAAIC,EAAKd,EAAIe,gBAAgBC,WAAU,SAASC,GAC9C,MAAO,GAAKA,IAAY,GAAKL,EAAKM,MAEpC,MAAO,CACLC,MAAOnB,EAAIoB,WAAWR,GACtBE,GAAIA,MAIRd,EAAIqB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLrB,GAAIA,EACJI,GAAIA,EACJC,GAAIA,MAKRiB,GAAmB,EACnBC,EAAkB,GACtB5B,EAAO6B,eAAgB,G;;;;2DC/BvB,suBAA+qB,eAAG,G;;;;0ICoClrB,sBAEA,sCACA,6C,29CAEA,CACA,kBACA,OACA,QACA,YACA,QAFA,WAGA,WAGA,QACA,aACA,YAEA,aACA,WACA,QAFA,WAGA,uCAGA,UACA,aACA,YAEA,sCAEA,eACA,mCAEA,KA5BA,WA6BA,OACA,cACA,oBACA,UACA,YACA,OACA,aACA,eACA,gBAEA,aACA,YACA,eACA,gBACA,mBACA,kBAGA,OACA,YADA,WAEA,oBAEA,aAJA,WAKA,qBAGA,SACA,gBADA,WACA,WACA,oCACA,gGACA,GACA,mCAGA,SARA,SAQA,wBACA,KATA,WASA,oBACA,KAVA,WAUA,oBACA,UAXA,WAWA,qBACA,aAZA,WAYA,oBACA,cAbA,SAaA,GACA,mBAEA,uDACA,wEAEA,eAnBA,SAmBA,OACA,sFACA,mBACA,MAgBA,QACA,eACA,yBACA,+BAEA,qBACA,2BAGA,wBACA,2BACA,aA3BA,CACA,UACA,kBACA,uFACA,6BACA,sCAEA,oBACA,wBAGA,0BACA,2BACA,WAkBA,YArDA,WAqDA,2EACA,eACA,gBACA,iCACA,YACA,sBACA,0FACA,iFACA,6CAEA,eACA,KACA,gBACA,eACA,KACA,cACA,IACA,+BAGA,kBACA,sCACA,yBACA,oEAEA,mDACA,kBACA,eACA,iBACA,eACA,aACA,cACA,0BACA,aACA,eACA,gCACA,eACA,uBAEA,oBACA,oBACA,YACA,8BAKA,QA3JA,WAsKA,GATA,uDACA,sBACA,0FACA,iFACA,6CAIA,4BACA,8BACA,yBAEA,YADA,wCAGA,wBAEA,4CACA,yB","file":"components/makeup/m-plainList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./m-plainList.vue?vue&type=template&id=03f5d8c6&name=mPlainList&\"\nvar renderjs\nimport script from \"./m-plainList.vue?vue&type=script&lang=js&\"\nexport * from \"./m-plainList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/makeup/m-plainList.vue\"\nexport default component.exports","export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-plainList.vue?vue&type=template&id=03f5d8c6&name=mPlainList&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$i18nMsg(\"lang-form-modalCancel\")\n  var m1 = _vm.$i18nMsg(\"lang-form-modalConfirm\")\n\n  var l0 = _vm.__map(_vm.listData, function(item, index) {\n    var g0 = _vm.alreadyCheckId_.findIndex(function(checkId) {\n      return \"\" + checkId === \"\" + item.id\n    })\n    return {\n      $orig: _vm.__get_orig(item),\n      g0: g0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-plainList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-plainList.vue?vue&type=script&lang=js&\"","<template name=\"mPlainList\">\r\n\t<!-- 普通列表，不进行配置 -->\r\n\t<view class=\"mPlainList\" v-show=\"showPicker\">\r\n\t\t<view :class=\"{'listMask':!insert}\" @click=\"maskClick\" catchtouchmove=\"true\"></view>\r\n\t\t<view class=\"show-content animated fadeIn\" v-if='listData.length>0' :class=\"{'list-picker-view-show':!insert}\">\r\n\t\t\t<view class=\"list-picker__hd\" catchtouchmove=\"true\" v-if=\"!insert\">\r\n\t\t\t  <view class=\"list-picker__action\" @click=\"pickerCancel\">{{ $i18nMsg('lang-form-modalCancel') }}</view>\r\n\t\t\t  <view class=\"list-picker__action\" :style=\"{color:themeColorCode}\" @click=\"pickerConfirm\">{{ $i18nMsg('lang-form-modalConfirm') }}</view>\r\n\t\t\t</view>\r\n\t\t\t<ul class=\"list\">\r\n\t\t\t\t<li class=\"list-item\" v-for=\"(item,index) in listData\" :id=\"item.id\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"list-item-content\">\r\n\t\t\t\t\t\t<view class=\"flex-item\" v-for=\"(column,index) in showColumns\"  :key=\"index\" :class=\"{'main-item':index===0}\">\r\n\t\t\t\t\t\t\t{{ item[column] || \"\" }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"list-item-check checked\" :style=\"{color:themeColorCode}\" @tap.stop=\"listItemSelect(item.id,false,index)\" v-if=\"alreadyCheckId_.findIndex(checkId => `${checkId}`===`${item.id}`)!==-1\" >\r\n\t\t\t\t\t\t<m-font-icon v-if=\"multiple\" icon=\"checkbox_app\" :iconSize=\"36\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon v-else icon=\"checkboxRadio_app\" :iconSize=\"36\"></m-font-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"list-item-check\" @tap.stop=\"listItemSelect(item.id,true,index)\" v-else >\r\n\t\t\t\t\t\t<m-font-icon v-if=\"multiple\" icon=\"unCheckbox_app\" :iconSize=\"36\"></m-font-icon>\r\n\t\t\t\t\t\t<m-font-icon v-else icon=\"unCheckboxRadio_app\" :iconSize=\"36\"></m-font-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</view>\r\n\t\t<view  v-if=\"!isLoading && listData.length===0\" class=\"animated nodata\"\r\n\t\t\t:class=\"[listData.length===0 ? 'fadeIn':'fadeOut']\" \r\n\t\t\t:style=\"{backgroundImage:`url(${nodataImg})`}\"></view>\r\n\t\t<m-loading v-if=\"isLoading\" class=\"animated\"\r\n\t\t\t:class=\"[isLoading ? 'fadeIn':'fadeOut']\"></m-loading>\r\n\t</view>\r\n</template>\r\n\r\n<script>\t\r\n\timport { mapState, mapMutations } from 'vuex'\r\n\t\r\n\timport {listApi} from '@/common/request/api.js'\r\n\timport nodataImg from \"@/static/images/nodata.png\"\r\n\t\r\n\texport default {\r\n\t\tname:'mPlainList',\r\n\t\tprops: {\r\n\t\t\tconfig: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault(){\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinsert:{//insert是否内嵌。ture-内嵌；false以底部弹出框的显示进行弹出\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:true\r\n\t\t\t},\r\n\t\t\tshowColumns: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault(){\r\n\t\t\t\t\treturn [\"keycode\",\"name\",\"groupname\"]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmultiple:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t},\r\n\t\t\talreadyCheckId:[String,Number,Array]\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"themeColorCode\"]),\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowPicker:true,//是否显示\r\n\t\t\t\tnodataImg:nodataImg,\r\n\t\t\t\tpageNum:1,\r\n\t\t\t\tpageSize:20,\r\n\t\t\t\tpage:1,\r\n\t\t\t\tbasicConfig:{\r\n\t\t\t\t\tdefaultLoad:true,//是否默认加载 true默认请求数据库\r\n\t\t\t\t\totherParams:{},//额外参数\r\n\t\t\t\t},\r\n\t\t\t\tisLoading:false,//是否正在加载\r\n\t\t\t\tlistData:[],//列表数据\r\n\t\t\t\tcheckedData:[],//选择的数据\r\n\t\t\t\tcheckedIndex:[],\r\n\t\t\t\talreadyCheckId_:[],//已经选中的\r\n\t\t\t\tsearchParams:{}//搜索参数\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\totherParams(){//额外参数发生改变\r\n\t\t\t\tthis.getListData()\r\n\t\t\t},\r\n\t\t\tsearchParams(){\r\n\t\t\t\tthis.getListData()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thasAlreadyCheck(){\r\n\t\t\t\tlet alreadyCheckNode = this.listData.filter(item => {\r\n\t\t\t\t\t\treturn this.alreadyCheckId_.findIndex( id => `${id}` === `${item.id}`) !== -1\r\n\t\t\t\t\t}) || []\r\n\t\t\t\tif(alreadyCheckNode.length) this.checkedData = [...alreadyCheckNode]\r\n\t\t\t},\r\n\t\t\t//搜索\r\n\t\t\tdoSearch(params){this.searchParams = params},\r\n\t\t\tshow(){this.showPicker = true;},//弹出列表与insert:false配合使用\r\n\t\t\thide(){this.showPicker = false;},//隐藏列表与insert:false配合使用\r\n\t\t\tmaskClick() {this.pickerCancel();},//点击蒙版与insert:false配合使用\r\n\t\t\tpickerCancel() {this.showPicker = false;},\r\n\t\t\tpickerConfirm(e) {//添加确定按钮与insert:false配合使用\r\n\t\t\t\tthis.showPicker = false;\r\n\t\t\t\t//如果是多选那么返回树数组，否则返回对象\r\n\t\t\t\tif(this.multiple) this.$emit('onConfirm', this.checkedData);\r\n\t\t\t\telse this.$emit('onConfirm', this.checkedData.length?this.checkedData[0]:{});\r\n\t\t\t},\r\n\t\t\tlistItemSelect(nodeID,isChecked,index){//选择或者取消节点\r\n\t\t\t\tconst isCheckIndex = this.checkedData.findIndex(item => `${item.id}` === `${nodeID}`)\r\n\t\t\t\tconst node = this.listData[index]\r\n\t\t\t\tif(!isChecked){//如果是取消选中\r\n\t\t\t\t\tif(isCheckIndex !== -1){ //checkedData中有该数据时\r\n\t\t\t\t\t\tif(this.multiple){//如果是多选进行删除checkedData和alreadyCheckId_中对应的值\r\n\t\t\t\t\t\t\tconst checkIdIndex = this.alreadyCheckId_.findIndex(id => `${id}` === `${nodeID}`)\r\n\t\t\t\t\t\t\tthis.checkedData.splice(isCheckIndex, 1) \r\n\t\t\t\t\t\t\tthis.alreadyCheckId_.splice(checkIdIndex, 1)\r\n\t\t\t\t\t\t}else{//如果是单选直接替换\r\n\t\t\t\t\t\t\tthis.checkedData = []\r\n\t\t\t\t\t\t\tthis.alreadyCheckId_ = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit(\"unCheckNode\",{\r\n\t\t\t\t\t\tcheckList:this.checkedData,\r\n\t\t\t\t\t\tnode:node\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{//如果选中\r\n\t\t\t\t\tif(isCheckIndex === -1){ //checkedData中没有该数据时\r\n\t\t\t\t\t\tif(this.multiple){//如果是多选进行push\r\n\t\t\t\t\t\t\tthis.checkedData.push(node)\r\n\t\t\t\t\t\t\tthis.alreadyCheckId_.push(nodeID)\r\n\t\t\t\t\t\t}else{//如果是单选直接替换\r\n\t\t\t\t\t\t\tthis.checkedData = [node]\r\n\t\t\t\t\t\t\tthis.alreadyCheckId_ = [nodeID]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$emit(\"checkNode\",{\r\n\t\t\t\t\t\tcheckList:this.checkedData,\r\n\t\t\t\t\t\tnode:node\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetListData(type='load'){//获取数据\r\n\t\t\t\tlet pageNum = this.pageNum,\r\n\t\t\t\t\tpageSize = this.pageSize\r\n\t\t\t\tif(type === \"loadnext\" && pageNum==this.page) return\r\n\t\t\t\tif(type === \"load\"){\r\n\t\t\t\t\tif(this.alreadyCheckId) {//重新获取数据时，选中的等于默认选中的\r\n\t\t\t\t\t\tif(typeof this.alreadyCheckId === \"string\") this.alreadyCheckId_ = this.alreadyCheckId.split(\",\")\r\n\t\t\t\t\t\telse if(typeof this.alreadyCheckId === \"number\") this.alreadyCheckId_ = [this.alreadyCheckId]\r\n\t\t\t\t\t\telse this.alreadyCheckId_ = [...this.alreadyCheckId]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.pageNum = 1\r\n\t\t\t\t\tpageNum = 1\r\n\t\t\t\t}else if(type === \"loadnext\"){\r\n\t\t\t\t\tthis.pageNum++\r\n\t\t\t\t\tpageNum++\r\n\t\t\t\t}else if(type==\"reload\"){\r\n\t\t\t\t\tpageNum = 1\r\n\t\t\t\t\tpageSize = this.pageNum *  _this.pageSize\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tconst baseParams = this.basicConfig.baseParams || {}\r\n\t\t\t\tconst pageInfo = {pageNum:pageNum,pageSize:pageSize}\r\n\t\t\t\tlet params = {...baseParams, ...this.basicConfig.otherParams, ...pageInfo, ...this.searchParams}\r\n\t\t\t\t\r\n\t\t\t\tlistApi.getListData(this, this.basicConfig.url, params)\r\n\t\t\t\t.then(value => {\r\n\t\t\t\t\tthis.isLoading = false\r\n\t\t\t\t\tlet data = value.datalist\r\n\t\t\t\t\tif(type===\"load\"){//第一次加载或者重新加载\r\n\t\t\t\t\t\tthis.listData = data\r\n\t\t\t\t\t\tconst total = value.total,\r\n\t\t\t\t\t\t\t  page = Math.ceil(total/this.pageSize)\r\n\t\t\t\t\t\tthis.page = page\r\n\t\t\t\t\t}else if(type===\"loadnext\"){\r\n\t\t\t\t\t\tthis.listData = this.listData.concat(data)\r\n\t\t\t\t\t}else if(type===\"reload\"){\r\n\t\t\t\t\t\tthis.listData = value.datalist\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.hasAlreadyCheck()\r\n\t\t\t\t\tthis.$emit(\"listInfo\",{//设置page和currentPage\r\n\t\t\t\t\t\tpage:this.page,\r\n\t\t\t\t\t\tcurrentPage:this.pageNum\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//设置默认配置\r\n\t\t\tthis.basicConfig ={...this.basicConfig, ...this.config}\r\n\t\t\tif(this.alreadyCheckId) {\r\n\t\t\t\tif(typeof this.alreadyCheckId === \"string\") this.alreadyCheckId_ = this.alreadyCheckId.split(\",\")\r\n\t\t\t\telse if(typeof this.alreadyCheckId === \"number\") this.alreadyCheckId_ = [this.alreadyCheckId]\r\n\t\t\t\telse this.alreadyCheckId_ = [...this.alreadyCheckId]\r\n\t\t\t}\r\n\t\t\t//insert是否内嵌。ture-内嵌；false以底部弹出框的显示进行弹出\r\n\t\t\t//如果弹出，默认显示不显示\r\n\t\t\tthis.showPicker = this.insert\r\n\t\t\tif(this.basicConfig.defaultLoad){\r\n\t\t\t\tif(!this.basicConfig.url){\r\n\t\t\t\t\tuni.showToast({ title: \"无url\", icon: \"none\" })\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\tthis.getListData()\r\n\t\t\t}else{\r\n\t\t\t\tthis.listData = this.basicConfig.listData || []\r\n\t\t\t\tthis.hasAlreadyCheck()\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n"],"sourceRoot":""}