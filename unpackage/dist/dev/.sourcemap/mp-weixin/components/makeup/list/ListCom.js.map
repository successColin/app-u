{"version":3,"sources":["webpack:///D:/code/2.0app/components/makeup/list/ListCom.vue?03ad","webpack:///D:/code/2.0app/components/makeup/list/ListCom.vue?23ac","webpack:///D:/code/2.0app/components/makeup/list/ListCom.vue?0027","webpack:///D:/code/2.0app/components/makeup/list/ListCom.vue?dd36","uni-app:///components/makeup/list/ListCom.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m4","_self","_c","pxToREM","m5","m6","m7","l2","__map","listData","item","listindex","f0","_f","listConfig","baseParams","listIcon","f1","m0","l0","otherParams","elementList","element","index","f2","g0","elementColor","indexOf","baseType","m1","fontColor","f3","$orig","__get_orig","l1","showPicsElement","m2","isHasPic","f4","m3","getCheck","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,6NACIA,EADJ,sKAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,qCACZ,aAAAF,E;;;;2GCtBf,6nC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,QAAQ,KACjBC,EAAKR,EAAIO,QAAQ,IACjBE,EAAKT,EAAIO,QAAQ,IACjBG,EAAKV,EAAIO,QAAQ,IAEjBI,EAAKX,EAAIY,MAAMZ,EAAIa,UAAU,SAASC,EAAMC,GAC9C,IAAIC,EAAKhB,EAAIiB,GAAG,WAAPjB,CACPc,EACAd,EAAIkB,WAAWC,WAAWC,SAC1B,QAGEC,EAAKrB,EAAIiB,GAAG,WAAPjB,CACPc,EACAd,EAAIkB,WAAWC,WAAWC,SAC1B,SAGEE,EAAKtB,EAAIO,QAAQ,IAEjBgB,EAAKvB,EAAIY,MAAMZ,EAAIkB,WAAWM,YAAYC,aAAa,SACzDC,EACAC,GAEA,IAAIC,EAAK5B,EAAIiB,GAAG,YAAPjB,CAAoBc,EAAMY,GAE/BG,EAAK7B,EAAI8B,aAAaC,QAAQL,EAAQM,UACtCC,EAAKjC,EAAIkC,UAAUpB,EAAMY,GAEzBS,EAAKnC,EAAIiB,GAAG,YAAPjB,CAAoBc,EAAMY,GAEnC,MAAO,CACLU,MAAOpC,EAAIqC,WAAWX,GACtBE,GAAIA,EACJC,GAAIA,EACJI,GAAIA,EACJE,GAAIA,MAIJG,EAAKtC,EAAIY,MAAMZ,EAAIuC,iBAAiB,SAASb,EAASC,GACxD,IAAIa,EAAKxC,EAAIyC,SAAS3B,EAAMY,GAExBgB,EAAK1C,EAAIiB,GAAG,YAAPjB,CAAoBc,EAAMY,GAEnC,MAAO,CACLU,MAAOpC,EAAIqC,WAAWX,GACtBc,GAAIA,EACJE,GAAIA,MAIJC,EAAK3C,EAAI4C,SAAS9B,GACtB,MAAO,CACLsB,MAAOpC,EAAIqC,WAAWvB,GACtBE,GAAIA,EACJK,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJe,GAAIA,EACJK,GAAIA,MAIR3C,EAAI6C,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACL7C,GAAIA,EACJI,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,MAKRuC,GAAmB,EACnBC,EAAkB,GACtBpD,EAAOqD,eAAgB,G;;;;2DCpFvB,ivBAA0rB,eAAG,G;;;;0ICiE7rB,gDACA,2CACA,kCACA,kBACA,sC,sxCAIA,CACA,yCACA,OACA,UACA,YACA,YAEA,SACA,YACA,aAEA,YACA,aACA,YAEA,YACA,YACA,QAFA,WAGA,OACA,YACA,mBACA,eACA,aAEA,eACA,gBAMA,KA/BA,WAgCA,OACA,UACA,OACA,cACA,YACA,YACA,cACA,eACA,gBACA,WACA,mBACA,oCACA,eAGA,eACA,kCADA,IAEA,yDAFA,CAGA,gBAHA,WAIA,4CAEA,SANA,WAOA,mBACA,6CACA,8BAEA,OADA,8BACA,+BAGA,SAdA,WAeA,qBACA,yBACA,eAGA,UApBA,WAqBA,qBACA,yBACA,uBAIA,SACA,SADA,SACA,OAEA,iBACA,kBACA,eAEA,WACA,WACA,WACA,iBACA,qBACA,cAEA,OADA,SACA,gBAEA,UAhBA,SAgBA,KACA,yBACA,8BACA,OACA,mBAMA,OAJA,YACA,KACA,QACA,OACA,GAEA,UA5BA,SA4BA,KACA,kBACA,aACA,8FACA,WACA,8BASA,OARA,iBACA,8CAEA,yCAEA,mCAEA,gEACA,IAGA,cACA,qCADA,IAEA,mDAFA,CAGA,WAHA,WAGA,gEACA,oBACA,2BAEA,cAPA,SAOA,GACA,yCACA,8BACA,6BACA,qCACA,wBACA,wBAEA,oBACA,mBAGA,kCACA,yBACA,+BACA,aAEA,2BAEA,gBA1BA,SA0BA,GACA,yCACA,8BACA,6BACA,gCACA,QACA,0BACA,6BAEA,6BACA,KACA,yBACA,+BACA,gCAEA,kCACA,6BAEA,YA5CA,SA4CA,GACA,IACA,eAEA,yBACA,+BACA,aAEA,kFAEA,cAtDA,SAsDA,GACA,oBAEA,SAzDA,SAyDA,GACA,oBACA,oBAEA,YA7DA,WA6DA,2EACA,OACA,eACA,gBACA,qCACA,YACA,oHAEA,oBACA,gBACA,eACA,KACA,cACA,IACA,8BAGA,sBAEA,6BACA,KAEA,4CACA,UACA,qDACA,8BADA,EACA,cADA,EACA,mBADA,EACA,YADA,EAEA,eAFA,EAEA,kBAFA,EAEA,aAEA,KACA,gCACA,gBACA,WACA,iBACA,IACA,kBACA,KAEA,qEACA,kCAEA,OAEA,oEAEA,kFAGA,wBAEA,aADA,+BACA,2BACA,mCACA,qBACA,WACA,2BAKA,kBACA,kDACA,kBACA,wBACA,QAEA,qBACA,KAQA,GAPA,mBACA,SACA,eACA,iDAEA,aAEA,YACA,iBACA,0BACA,aACA,aACA,eACA,gCACA,aACA,aACA,aACA,cAEA,iCACA,aACA,uBACA,2BACA,qBACA,sBAKA,QAnRA,WAoRA,wEACA,8CAEA,QAvRA,WAwRA,+DACA,uBAEA,+HACA,qB","file":"components/makeup/list/ListCom.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./ListCom.vue?vue&type=template&id=02ddcbcd&name=mList&\"\nvar renderjs\nimport script from \"./ListCom.vue?vue&type=script&lang=js&\"\nexport * from \"./ListCom.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/makeup/list/ListCom.vue\"\nexport default component.exports","export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ListCom.vue?vue&type=template&id=02ddcbcd&name=mList&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m4 = _vm.pxToREM(36)\n  var m5 = _vm.pxToREM(36)\n  var m6 = _vm.pxToREM(36)\n  var m7 = _vm.pxToREM(36)\n\n  var l2 = _vm.__map(_vm.listData, function(item, listindex) {\n    var f0 = _vm._f(\"listIcon\")(\n      item,\n      _vm.listConfig.baseParams.listIcon,\n      \"name\"\n    )\n\n    var f1 = _vm._f(\"listIcon\")(\n      item,\n      _vm.listConfig.baseParams.listIcon,\n      \"color\"\n    )\n\n    var m0 = _vm.pxToREM(36)\n\n    var l0 = _vm.__map(_vm.listConfig.otherParams.elementList, function(\n      element,\n      index\n    ) {\n      var f2 = _vm._f(\"listValue\")(item, element)\n\n      var g0 = _vm.elementColor.indexOf(element.baseType)\n      var m1 = _vm.fontColor(item, element)\n\n      var f3 = _vm._f(\"listValue\")(item, element)\n\n      return {\n        $orig: _vm.__get_orig(element),\n        f2: f2,\n        g0: g0,\n        m1: m1,\n        f3: f3\n      }\n    })\n\n    var l1 = _vm.__map(_vm.showPicsElement, function(element, index) {\n      var m2 = _vm.isHasPic(item, element)\n\n      var f4 = _vm._f(\"listImage\")(item, element)\n\n      return {\n        $orig: _vm.__get_orig(element),\n        m2: m2,\n        f4: f4\n      }\n    })\n\n    var m3 = _vm.getCheck(item)\n    return {\n      $orig: _vm.__get_orig(item),\n      f0: f0,\n      f1: f1,\n      m0: m0,\n      l0: l0,\n      l1: l1,\n      m3: m3\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ListCom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ListCom.vue?vue&type=script&lang=js&\"","<template name=\"mList\">\r\n\t<view class=\"mList\">\r\n\t\t<ul class=\"list\">\r\n\t\t\t<li class=\"list-item animated fadeIn\" v-for=\"(item,listindex) in listData\" \r\n\t\t\t :key=\"listindex\" @click=\"handleClick(item)\">\r\n\t\t\t\t<view class=\"list-item-icon\" v-if=\"listConfig.baseParams.hasIcon && listConfig.baseParams.listIcon.iconname\">\r\n\t\t\t\t\t<m-font-icon :iconSize=\"80\" \r\n\t\t\t\t\t :icon='item | listIcon(listConfig.baseParams.listIcon,\"name\")'\r\n\t\t\t\t\t :color='item | listIcon(listConfig.baseParams.listIcon,\"color\")'></m-font-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list-item-content\">\r\n\t\t\t\t\t<block v-for=\"(element,index) in listConfig.otherParams.elementList\" \r\n\t\t\t\t\t :key=\"index\">\r\n\t\t\t\t\t\t<block v-if=\"element.visiabled && element.baseType !==8\">\r\n\t\t\t\t\t\t\t<m-rate class=\"flex-item\" v-if=\"element.baseType === 36\" sourceType=\"list\"\r\n\t\t\t\t\t\t\t :element = \"element\" \r\n\t\t\t\t\t\t\t :size=\"pxToREM(36)\"\r\n\t\t\t\t\t\t\t :value=\"item | listValue(element)\"\r\n\t\t\t\t\t\t\t :isEllipsis = \"element.columnspan !== 24\"\r\n\t\t\t\t\t\t\t :class=\"{'flex-item-full':element.columnspan === 24,\r\n\t\t\t\t\t\t\t 'flex-item-half':element.columnspan === 12,\r\n\t\t\t\t\t\t\t 'flex-item-lof3':element.columnspan === 8,\r\n\t\t\t\t\t\t\t 'flex-item-lof4':element.columnspan === 6}\">\r\n\t\t\t\t\t\t\t</m-rate>\r\n\t\t\t\t\t\t\t<m-label v-else sourceType=\"list\" class=\"flex-item\"\r\n\t\t\t\t\t\t\t :style=\"{color:elementColor.indexOf(element.baseType)!==-1 ? fontColor(item, element) : ''}\"\r\n\t\t\t\t\t\t\t :element = \"element\"\r\n\t\t\t\t\t\t\t :value=\"item | listValue(element)\"\r\n\t\t\t\t\t\t\t :isEllipsis = \"element.columnspan !== 24\"\r\n\t\t\t\t\t\t\t :class=\"{'flex-item-full':element.columnspan === 24,\r\n\t\t\t\t\t\t\t 'flex-item-half':element.columnspan === 12,\r\n\t\t\t\t\t\t\t 'flex-item-lof3':element.columnspan === 8,\r\n\t\t\t\t\t\t\t 'flex-item-lof4':element.columnspan === 6}\">\r\n\t\t\t\t\t\t\t</m-label>\r\n\t\t\t\t\t\t</block> \r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t\t<block v-for=\"(element,index) in showPicsElement\" :key=\"index\">\r\n\t\t\t\t\t<image v-if=\"isHasPic(item,element)\" :src=\"item | listImage(element)\" style=\"width:200upx;height: 100upx;\"  mode=\"aspectFit\"></image>\r\n\t\t\t\t</block>\r\n\t\t\t\t<block v-if=\"listConfig.baseParams.hasCheck\">\r\n\t\t\t\t\t<view class=\"list-item-check checked\" :style=\"{color:themeColorCode}\" @tap.stop=\"handleUnChecked(item)\" v-if=\"getCheck(item)\" >\r\n\t\t\t\t\t\t<m-normal-icon v-if=\"listConfig.baseParams.multiple\" icon=\"checkbox_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t\t<m-normal-icon v-else icon=\"checkboxRadio_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"list-item-check\" @tap.stop=\"handleChecked(item)\" v-else >\r\n\t\t\t\t\t\t<m-normal-icon v-if=\"listConfig.baseParams.multiple\" icon=\"unCheckbox_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t\t<m-normal-icon v-else icon=\"unCheckboxRadio_app\" :iconSize=\"pxToREM(36)\"></m-normal-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<mni-pager v-if=\"listConfig.hasPager\" ref=\"listPager\" :total=\"page\"\r\n\t\t @prev=\"pagerClick\" @next=\"pagerClick\"></mni-pager>\r\n\t\t<view v-if=\"showNoData && !listConfig.hasPager\" :class='[hasData ? \"mList-bottom\" : \"noData\"]'>\r\n\t\t\t<block v-if=\"page===currentPage && hasData\">~End~</block>\r\n\t\t\t<mLodingSvg v-else-if=\"isLoading\" ></mLodingSvg>\r\n\t\t\t<block v-else-if=\"!hasData\">\r\n\t\t\t\t<image src=\"@/static/images/nodata.png\" class=\"nodata\" mode=\"widthFix\" ></image>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { static_basicDatas } from '@/common/constant/constant.js'\r\nimport { ELEMENT_COLOR_SELECT } from '@/common/constant/element.js'\r\nimport { COMMON_FORMAT_DECIMAL } from '@/common/common.js'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport {listApi} from '@/common/request/api.js'\r\nimport mLabel from '@/components/element/m-label.vue'\r\nimport mRate from '@/components/element/m-rate.vue'\r\nimport mniPager from './mni-pager.vue'\r\nexport default {\r\n\tcomponents: {mLabel,mRate,mniPager},\r\n\tprops:{\r\n\t\tpageSize:{\r\n\t\t\ttype:Number,\r\n\t\t\tdefault: 15\r\n\t\t},\r\n\t\ttabInfo:{\r\n\t\t\ttype:Object,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tshowNoData:{\r\n\t\t\ttype:Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tlistConfig:{\r\n\t\t\ttype:Object,\r\n\t\t\tdefault(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tbaseParams:{//基本参数\r\n\t\t\t\t\t\tmobileTabSource: '',//面板数据源\r\n\t\t\t\t\t\telementList:[],//界面元素\r\n\t\t\t\t\t\tlistIcon:{},//列表图标控件\r\n\t\t\t\t\t},\r\n\t\t\t\t\totherParams:{},\r\n\t\t\t\t\thasPager:false,//是否有分页器\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tpageNum:1,\r\n\t\t\tpage:1,\r\n\t\t\tcurrentPage:0,\r\n\t\t\tlistData:[],\r\n\t\t\tcheckIds:[],\r\n\t\t\tcheckDatas:[],\r\n\t\t\totherParams:{},\r\n\t\t\tsearchParams:{},\r\n\t\t\thasData:true,//是否有数据\r\n\t\t\tshowPicsElement:[],\r\n\t\t\telementColor:ELEMENT_COLOR_SELECT,\r\n\t\t\tisLoading:false\r\n\t\t} \r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"themeColorCode\"]),\r\n\t\t...mapState(\"common\", [\"tabsFormDatas\",\"tabsElements\"]),\r\n\t\tisCheckedParams(){\r\n\t\t\treturn this.listConfig.isCheckedParams || {}\r\n\t\t},\r\n\t\tgetCheck(){//判断是否选中\r\n\t\t\treturn function(item) {\r\n\t\t\t\tlet nodeId = item[this.isCheckedParams.primaryKey] || \"\"\r\n\t\t\t\ttry{nodeId = JSON.parse(nodeId)}catch(e){}\r\n\t\t\t\tnodeId = typeof nodeId !== \"object\" ? nodeId : nodeId.id\r\n\t\t\t\treturn this.checkIds.indexOf(nodeId)!==-1\r\n\t\t\t}\r\n\t\t},\r\n\t\tisHasPic(){\r\n\t\t\treturn function(data,element) {\r\n\t\t\t\tlet value = data[element.elementId] || {}\r\n\t\t\t\treturn value.id ? true : false\r\n\t\t\t}\r\n\t\t},\r\n\t\tfontColor(){//获取字体颜色\r\n\t\t\treturn function(node, element){\r\n\t\t\t\tlet value = node[element.elementId] || {}\r\n\t\t\t\treturn value.color || \"\"\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\tlistIcon(item, listIconConfig, type) {\r\n\t\t\t//图标的样式由类型决定，样式分别由状态、优先级决定。默认取状态的颜色\r\n\t\t\tlet iconnameElement = listIconConfig.iconname,\r\n\t\t\t\tprioritycolorElement = listIconConfig.prioritycolor,\r\n\t\t\t\tstatecolorElement = listIconConfig.statecolor\r\n\t\t\t\r\n\t\t\tlet iconnamedata = item[iconnameElement] || {},\r\n\t\t\t\tprioritycolordata = item[prioritycolorElement] || {},\r\n\t\t\t\tstatecolordata = item[statecolorElement] || {}\r\n\t\t\tlet iconname = iconnamedata.iconname || \"\",\r\n\t\t\t\tprioritycolor = prioritycolordata.color || \"#FAB71C\",\r\n\t\t\t\tcolor = statecolordata.color || \"\"\r\n\t\t\tif(!color) color = prioritycolor\r\n\t\t\treturn type === \"name\" ? iconname : color\r\n\t\t},\r\n\t\tlistImage(listData,element){//列表显示图片\r\n\t\t\tlet url = listData[element.elementId] || \"\"\r\n\t\t\ttry{url = JSON.parse(url)}catch(e){}\r\n\t\t\turl = url.id\r\n\t\t\tlet urlAry = url.split(\"_\") //保存到表的url前面默认会加上图片id，便于后续删除\r\n\t\t\tlet id = -1\r\n\t\t\tif(urlAry.length>1){\r\n\t\t\t\tid = urlAry[0]\r\n\t\t\t\turl = urlAry[1]\r\n\t\t\t}else url = urlAry[0]\r\n\t\t\treturn url\r\n\t\t},\r\n\t\tlistValue(listData,element){\r\n\t\t\tconst elementId = element.elementId,\r\n\t\t\t\t  baseType = element.baseType\r\n\t\t\tlet static_basicData = static_basicDatas.find( basicData => basicData.elmentType.indexOf(baseType) !== -1) || {basicData:\"\"}\r\n\t\t\tlet value = listData[elementId] || \"\"\r\n\t\t\ttry{value = JSON.parse(value)}catch(e){}\r\n\t\t\tif(baseType === 9 || baseType === 31)\r\n\t\t\t\tif(static_basicData.basicData.search(value.id) != -1) value = {id:\"\",name:\"\"}\r\n\t\t\telse {\r\n\t\t\t\tif(value.id === static_basicData.basicData) value = {id:\"\",name:\"\"}\r\n\t\t\t}\r\n\t\t\tvalue = typeof value !== \"object\" ? value : (value.name || \"\")\r\n\t\t\t//如果字段类型为4：decimal去除后面无用的点\r\n\t\t\tif(element.relationColumnType === 4 && value) value = COMMON_FORMAT_DECIMAL(value)\r\n\t\t\treturn value\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\t...mapMutations([\"SET_GlobalIds\"]),\r\n\t\t...mapMutations(\"common\",[\"SET_TABS_FORMDATAS\"]),\r\n\t\tpagerClick(config={}){//向前\r\n\t\t\tthis.pageNum = config.page\r\n\t\t\tthis.getListData(\"pager\")\r\n\t\t},\r\n\t\thandleChecked(item){//选中\r\n\t\t\tlet nodeId = item[this.isCheckedParams.primaryKey]\r\n\t\t\ttry{nodeId = JSON.parse(nodeId)}catch(e){}\r\n\t\t\tnodeId = typeof nodeId !== \"object\" ? nodeId : nodeId.id\r\n\t\t\tif(this.listConfig.baseParams.multiple) {\r\n\t\t\t\tthis.checkDatas.push(item)\r\n\t\t\t\tthis.checkIds.push(nodeId)\r\n\t\t\t} else {\r\n\t\t\t\tthis.checkDatas = [item]\r\n\t\t\t\tthis.checkIds = [nodeId]\r\n\t\t\t} \r\n\t\t\t//设置全局变量GlobalIds\r\n\t\t\tthis.SET_GlobalIds(this.checkIds)\r\n\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\tformData:item\r\n\t\t\t})\r\n\t\t\tthis.$emit(\"checkNode\",item)\r\n\t\t},\r\n\t\thandleUnChecked(item){//取消选中\r\n\t\t\tlet nodeId = item[this.isCheckedParams.primaryKey]\r\n\t\t\ttry{nodeId = JSON.parse(nodeId)}catch(e){}\r\n\t\t\tnodeId = typeof nodeId !== \"object\" ? nodeId : nodeId.id\r\n\t\t\tconst index = this.checkIds.indexOf(nodeId)\r\n\t\t\tif(index !== -1){\r\n\t\t\t\tthis.checkIds.splice(index,1)\r\n\t\t\t\tthis.checkDatas.splice(index,1)\r\n\t\t\t} \r\n\t\t\tconst checkIndex = this.checkDatas.length\r\n\t\t\tif(checkIndex>0) \r\n\t\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\t\tformData:this.checkDatas[checkIndex-1]\r\n\t\t\t\t})\r\n\t\t\tthis.SET_GlobalIds(this.checkIds)\r\n\t\t\tthis.$emit(\"unCheckNode\",item)\r\n\t\t},\r\n\t\thandleClick(listItem) {//点击列表\r\n\t\t\tconst _this = this\r\n\t\t\tlet params = {listItem:listItem}\r\n\t\t\t\r\n\t\t\tthis.SET_TABS_FORMDATAS({//设置表单数据\r\n\t\t\t\ttabId:this.tabInfo.mobileTabId,\r\n\t\t\t\tformData:listItem\r\n\t\t\t})\r\n\t\t\tthis.$emit(\"clickList\",{...this.tabInfo,...this.listConfig.goEventParams, ...params})\r\n\t\t},\r\n\t\tsetOtherParam(param){//改变默认传参\r\n\t\t\tthis.otherParams = param\r\n\t\t},\r\n\t\tdoSearch(param){//搜索\r\n\t\t\tthis.searchParams = param\r\n\t\t\tthis.getListData()\r\n\t\t},\r\n\t\tgetListData(type=\"load\"){\r\n\t\t\tconst _this = this\r\n\t\t\tlet pageNum = this.pageNum,\r\n\t\t\t\tpageSize = this.pageSize\r\n\t\t\tif(type === \"loadnext\" && pageNum === this.page) return\r\n\t\t\tif(type === \"load\"){\r\n\t\t\t\tif(this.listConfig.hasPager && this.$refs.listPager && this.$refs.listPager.setCurrent) this.$refs.listPager.setCurrent(1)\r\n\t\t\t\t\r\n\t\t\t\tthis.pageNum = 1;pageNum = 1\r\n\t\t\t}else if(type === \"loadnext\"){\r\n\t\t\t\tthis.pageNum++\r\n\t\t\t\tpageNum++\r\n\t\t\t}else if(type==\"reload\"){\r\n\t\t\t\tpageNum = 1\r\n\t\t\t\tpageSize = this.pageNum *  this.pageSize\r\n\t\t\t}\r\n\t\t\t//如果没有默认数据，且有数据源，通过接口进行请求\r\n\t\t\tif(this.listConfig.url){\r\n\t\t\t\t\r\n\t\t\t\tconst pageInfo = {pageNum:pageNum,pageSize:pageSize}\r\n\t\t\t\tlet params = {}\r\n\t\t\t\t//如果是通过接口获取数据\r\n\t\t\t\tconst {dataSourceType} = this.listConfig.baseParams\r\n\t\t\t\tif(dataSourceType === 2){\r\n\t\t\t\t\tconst {commonApiHeaderId} = this.listConfig.baseParams,\r\n\t\t\t\t\t\t    {mobileTabId, interfaceInParam, elementList} = this.listConfig.otherParams,\r\n\t\t\t\t\t\t\t\t{relationMainTab, bundleParams} = this.tabInfo\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tlet interfaceInParamValue = {}//接口参数\r\n\t\t\t\t\tconst config = {otherTabId:relationMainTab,bundleParams}\r\n\t\t\t\t\tfor(let key in interfaceInParam){//如果有接口参数，需要进行变量的转化\r\n\t\t\t\t\t\tlet value = interfaceInParam[key]\r\n\t\t\t\t\t\tif(value === '@@PageSize' ){\r\n\t\t\t\t\t\t\tvalue = pageSize\r\n\t\t\t\t\t\t}else if(value === '@@PageIndex'){\r\n\t\t\t\t\t\t\tvalue = pageNum\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvalue = this.Static_GlobalFucs.Global_ParamFormat({...config,...{key:value}},this)\r\n\t\t\t\t\t\t\tif(value && typeof value === \"object\") value = value.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinterfaceInParamValue[key] = value\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparams = {mobileTabId,commonApiHeaderId,paramMap:interfaceInParamValue,elementList}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparams = {...this.listConfig.otherParams, ...this.otherParams, ...this.searchParams, ...pageInfo}\r\n\t\t\t\t}\r\n\t\t\t\t//如果是从其他面板中条过来的\r\n\t\t\t\tif(this.tabInfo.jumpTag){\r\n\t\t\t\t\tparams.jumpTag = this.tabInfo.jumpTag\r\n\t\t\t\t\tfor(let key in this.tabInfo.bundleParams){\r\n\t\t\t\t\t\tlet info = this.tabInfo.bundleParams[key]\r\n\t\t\t\t\t\tparams.globalQueryMap[key] = {\r\n\t\t\t\t\t\t\tvalue:info.id,\r\n\t\t\t\t\t\t\ttype:info.relationColumnType\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\tlistApi.getListData(this, this.listConfig.url, params)\r\n\t\t\t\t.then(value => {\r\n\t\t\t\t\tuni.stopPullDownRefresh()//停止下拉刷新\r\n\t\t\t\t\tvalue = value || {}\r\n\t\t\t\t\t//数据格式化\r\n\t\t\t\t\tlet listData1 = value.datalist || [],\r\n\t\t\t\t\t\tlistData = []\r\n\t\t\t\t\tlistData1.map((item) => {\r\n\t\t\t\t\t\tlet valueFormat = {}\r\n\t\t\t\t\t\tfor(let key in item){\r\n\t\t\t\t\t\t\tvalueFormat[key] = this.Static_GlobalFucs.Global_dataFormat(item[key])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlistData.push(valueFormat)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(type===\"load\"){//第一次加载或者重新加载\r\n\t\t\t\t\t\tconst total = value.total || 0,\r\n\t\t\t\t\t\t\t  page = Math.ceil(total/_this.pageSize)\r\n\t\t\t\t\t\tthis.listData = listData\r\n\t\t\t\t\t\tthis.page = page\r\n\t\t\t\t\t}else if(type===\"loadnext\"){\r\n\t\t\t\t\t\tthis.listData = this.listData.concat(listData)\r\n\t\t\t\t\t}else if(type===\"reload\"){\r\n\t\t\t\t\t\tthis.listData = listData\r\n\t\t\t\t\t}else if(type==\"pager\"){//分页器\r\n\t\t\t\t\t\tthis.listData = listData\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.listData.length>0) this.hasData = true\r\n\t\t\t\t\telse this.hasData = false\r\n\t\t\t\t\tthis.$Toast.hideLoading()\r\n\t\t\t\t\tthis.currentPage = this.pageNum\r\n\t\t\t\t}).finally(value => {\r\n\t\t\t\t\tthis.isLoading = false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tif(this.isCheckedParams.checkIds && this.isCheckedParams.checkIds.length>0)\r\n\t\t\tthis.checkIds = this.isCheckedParams.checkIds\r\n\t},\r\n\tcreated() {\r\n\t\tconsole.log(\"list===========================================\")\r\n\t\tthis.SET_GlobalIds([])//设置选中的条数为空\r\n\t\t//查找base64位图片\r\n\t\tthis.showPicsElement = this.listConfig.otherParams.elementList.filter(item => item.baseType === 8 && item.elementFormat === 2)\r\n\t\tthis.getListData()\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":""}