(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/mniUpload/MniUpload"],{446:
/*!*********************************************************!*\
  !*** D:/code/2.0app/components/mniUpload/MniUpload.vue ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./MniUpload.vue?vue&type=template&id=4103c6f8&scoped=true& */447),a=n(/*! ./MniUpload.vue?vue&type=script&lang=js& */449);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n(/*! ./MniUpload.vue?vue&type=style&index=0&id=4103c6f8&lang=scss&scoped=true& */453);var u,s=n(/*! ../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */11),o=Object(s["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"4103c6f8",null,!1,r["components"],u);o.options.__file="components/mniUpload/MniUpload.vue",t["default"]=o.exports},447:
/*!****************************************************************************************************!*\
  !*** D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=template&id=4103c6f8&scoped=true& ***!
  \****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./MniUpload.vue?vue&type=template&id=4103c6f8&scoped=true& */448);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},448:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=template&id=4103c6f8&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=!1,u=[];a._withStripped=!0},449:
/*!**********************************************************************************!*\
  !*** D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./MniUpload.vue?vue&type=script&lang=js& */450),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},450:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(/*! ./node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/regenerator */31)),a=n(/*! @/common/request/api.js */34),i=n(/*! ./upload.js */451),u=n(/*! vuex */8),s=o(n(/*! @/static/images/svg/tail-spin.svg */452));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,a,i,u){try{var s=e[i](u),o=s.value}catch(l){return void n(l)}s.done?t(o):Promise.resolve(o).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){l(i,r,a,u,s,"next",e)}function s(e){l(i,r,a,u,s,"throw",e)}u(void 0)}))}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={name:"MniUpload",props:{element:{type:Object,defalut:function(){return{}}},base64Url:{type:String,defalut:""},relationName:{type:String,defalut:""},uploadNum:{type:Number,defalut:-1},imageConfig:{type:Object,defalut:function(){return{allImgsParam:{},element:{}}}},requestConfig:{type:Object,defalut:function(){return{submitUrl:"file/uploadFiles",submitParam:{},getPicParam:{}}}},uploadType:{type:String,defalut:""},userImgPath:{type:String,defalut:""},newUserImgPath:{type:String,defalut:""}},data:function(){return{tailSpin:s.default,picsArray:[],realArray:{},chooseNumber:0,uploadumber:0,newUpload:[]}},computed:p({},(0,u.mapState)(["baseUrl","defaultUrl","token"]),{picNum:function(){return 2!==this.element.elementFormat?this.uploadNum:1},noUploadNumber:function(){return this.chooseNumber-this.uploadumber}}),methods:{delImg:function(t){var n=this;e.showModal({title:n.$i18nMsg("lang-form-modalTips"),content:n.$i18nMsg("lang-form-modalDel"),success:function(e){if(e.confirm){var r=n.picsArray[t];h(n,{image:r,picIndex:t})}}})},previewImgs:function(t){for(var n=[],r=0,a=this.picsArray.length;r<a;r++){var i=this.picsArray[r].url;n.push(i)}e.previewImage({current:t.currentTarget.dataset.src,urls:n})},chooseImags:function(){if(-1!==this.picNum&&this.picsArray.length>=this.picNum)this.Static_GlobalFucs.showToast({title:"图片最多可以选择".concat(this.picNum)});else{var t=this.picNum-this.picsArray.length;-1===this.picNum&&(t=9);var n=t>9?9:t,r=this;"touxiang"==this.uploadType&&(n=1),e.chooseImage({count:n,sizeType:["compressed"],sourceType:["album","camera"],success:function(e){r.chooseNumber+=e.tempFilePaths.length,(0,i.UPLOAD_URLTOBASE64)(e.tempFilePaths).then((function(t){for(var n=t.base64Array,a=t.orientationArray,i=[],u=[],s=0;s<n.length;s++){var o=a[s],l=n[s];-1!==[2,3,4,5,6,7,8].indexOf(o)||(i.push(l),u.push(e.tempFiles[s]))}r.showAndUploadPic(i,u)}))}})}},showAndUploadPic:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n){var r=1;2===this.element.elementFormat&&(r=2),v({showBase64:e,otherParam:this.requestConfig.submitParam,authType:r},this)}else{var a=this.baseUrl||this.defaultUrl;1,w({submitUrl:a+this.requestConfig.submitUrl,images:t,showBase64:e,token:this.token,otherParam:this.requestConfig.submitParam},this)}},getImages:function(){var e=this;this.requestConfig.getPicParam.relationId&&a.fileApi.getRelationFile(this.requestConfig.getPicParam).then((function(t){e.picsArray=t||[],e.$emit("allImgs",p({},e.imageConfig.allImgsParam,{},{value:t}))}))}},created:function(){if(2!==this.element.elementFormat)this.getImages();else if(this.base64Url){var e=this.base64Url.split("_"),t=-1,n="";e.length>1?(t=e[0],n=e[1]):n=e[0],this.picsArray.push({id:t,url:n})}}};t.default=d;var h=function(){var t=c(r.default.mark((function t(n,i){var u,s,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u=i.image,!u.relationId){t.next=6;break}return t.next=4,a.fileApi.filesRelationDel(u.id).then((function(t){e.showToast({icon:"none",title:"操作成功"})}));case 4:t.next=15;break;case 6:if(-1===u.id){t.next=12;break}return s=[],s.push({id:u.id}),t.next=11,a.fileApi.fileDelete(s).then((function(t){e.showToast({icon:"none",title:"操作成功"})}));case 11:n.$emit("onImgDel",u.id);case 12:o="",2!==n.element.elementFormat&&(o=n.picsArray),n.$emit("allImgs",p({},n.imageConfig.allImgsParam,{},{value:o}));case 15:n.picsArray.splice(i.picIndex,1);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(e,t,n,r){var a=[];if(e.success){var i=e.data||[];if(r.uploadumber+=i.length,-1===n)for(var u=0;u<i.length;u++)a.push({id:i[u].id,base64:t[u],url:i[u].url});else a.push({id:i[0].id,base64:t,url:i[0].url});2===r.element.elementFormat?r.$emit("allImgs",p({},r.imageConfig.allImgsParam,{},{value:i[0].url})):r.$emit("onUpImg",{uploadPics:i,getPicParam:r.requestConfig.getPicParam})}else r.$emit("onUpImgError",e.data);return a};function v(e,t){return y.apply(this,arguments)}function y(){return y=c(r.default.mark((function e(t,n){var i,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.showBase64,u={displayFileName:(new Date).getTime()+".jpg",imgByte:i,authType:t.authType||1},e.next=4,a.fileApi.fileUploadBase64(p({},u,{},t.otherParam)).then((function(e){var t=g(e,i,0,n);n.picsArray=n.picsArray.concat(t),2!==n.element.elementFormat&&n.$emit("allImgs",p({},n.imageConfig.allImgsParam,{},{value:n.picsArray}))}));case 4:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e,t){return P.apply(this,arguments)}function P(){return P=c(r.default.mark((function t(n,a){var i,u,s,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=n.images,u=r.default.mark((function t(u,s){var o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=i[u],t.next=3,e.uploadFile({url:n.submitUrl,header:{token:n.token},filePath:o.path,name:"file",formData:n.otherParam,success:function(e){if(200==e.statusCode){var t=JSON.parse(e.data),r=n.showBase64[u];r=g(t,r,u,a),a.picsArray=a.picsArray.concat(r),2!==a.element.elementFormat&&a.$emit("allImgs",p({},a.imageConfig.allImgsParam,{},{value:a.picsArray}))}},fail:function(e){console.warn(e,"请检查是否CORB/CORS错误!")}});case 3:case"end":return t.stop()}}),t)})),s=0,o=i.length;case 3:if(!(s<o)){t.next=8;break}return t.delegateYield(u(s,o),"t0",5);case 5:s++,t.next=3;break;case 8:case"end":return t.stop()}}),t)}))),P.apply(this,arguments)}function w(e,t){return O.apply(this,arguments)}function O(){return O=c(r.default.mark((function e(t,n){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b(t,n);case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},453:
/*!*******************************************************************************************************************!*\
  !*** D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=style&index=0&id=4103c6f8&lang=scss&scoped=true& ***!
  \*******************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./MniUpload.vue?vue&type=style&index=0&id=4103c6f8&lang=scss&scoped=true& */454),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},454:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/2.0app/components/mniUpload/MniUpload.vue?vue&type=style&index=0&id=4103c6f8&lang=scss&scoped=true& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/mniUpload/MniUpload.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/mniUpload/MniUpload-create-component',
    {
        'components/mniUpload/MniUpload-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(446))
        })
    },
    [['components/mniUpload/MniUpload-create-component']]
]);
